<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title></title>
  <style>
  @font-face {
  font-family: octicons-link;
  src: url(data:font/woff;charset=utf-8;base64,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) format('woff');
}

.markdown-body .octicon {
  display: inline-block;
  fill: currentColor;
  vertical-align: text-bottom;
}

.markdown-body .anchor {
  float: left;
  line-height: 1;
  margin-left: -20px;
  padding-right: 4px;
}

.markdown-body .anchor:focus {
  outline: none;
}

.markdown-body h1 .octicon-link,
.markdown-body h2 .octicon-link,
.markdown-body h3 .octicon-link,
.markdown-body h4 .octicon-link,
.markdown-body h5 .octicon-link,
.markdown-body h6 .octicon-link {
  color: #1b1f23;
  vertical-align: middle;
  visibility: hidden;
}

.markdown-body h1:hover .anchor,
.markdown-body h2:hover .anchor,
.markdown-body h3:hover .anchor,
.markdown-body h4:hover .anchor,
.markdown-body h5:hover .anchor,
.markdown-body h6:hover .anchor {
  text-decoration: none;
}

.markdown-body h1:hover .anchor .octicon-link,
.markdown-body h2:hover .anchor .octicon-link,
.markdown-body h3:hover .anchor .octicon-link,
.markdown-body h4:hover .anchor .octicon-link,
.markdown-body h5:hover .anchor .octicon-link,
.markdown-body h6:hover .anchor .octicon-link {
  visibility: visible;
}

.markdown-body {
  -ms-text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
  color: #24292e;
  line-height: 1.5;
  font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;
  font-size: 16px;
  line-height: 1.5;
  word-wrap: break-word;
}

.markdown-body .pl-c {
  color: #6a737d;
}

.markdown-body .pl-c1,
.markdown-body .pl-s .pl-v {
  color: #005cc5;
}

.markdown-body .pl-e,
.markdown-body .pl-en {
  color: #6f42c1;
}

.markdown-body .pl-s .pl-s1,
.markdown-body .pl-smi {
  color: #24292e;
}

.markdown-body .pl-ent {
  color: #22863a;
}

.markdown-body .pl-k {
  color: #d73a49;
}

.markdown-body .pl-pds,
.markdown-body .pl-s,
.markdown-body .pl-s .pl-pse .pl-s1,
.markdown-body .pl-sr,
.markdown-body .pl-sr .pl-cce,
.markdown-body .pl-sr .pl-sra,
.markdown-body .pl-sr .pl-sre {
  color: #032f62;
}

.markdown-body .pl-smw,
.markdown-body .pl-v {
  color: #e36209;
}

.markdown-body .pl-bu {
  color: #b31d28;
}

.markdown-body .pl-ii {
  background-color: #b31d28;
  color: #fafbfc;
}

.markdown-body .pl-c2 {
  background-color: #d73a49;
  color: #fafbfc;
}

.markdown-body .pl-c2:before {
  content: "^M";
}

.markdown-body .pl-sr .pl-cce {
  color: #22863a;
  font-weight: 700;
}

.markdown-body .pl-ml {
  color: #735c0f;
}

.markdown-body .pl-mh,
.markdown-body .pl-mh .pl-en,
.markdown-body .pl-ms {
  color: #005cc5;
  font-weight: 700;
}

.markdown-body .pl-mi {
  color: #24292e;
  font-style: italic;
}

.markdown-body .pl-mb {
  color: #24292e;
  font-weight: 700;
}

.markdown-body .pl-md {
  background-color: #ffeef0;
  color: #b31d28;
}

.markdown-body .pl-mi1 {
  background-color: #f0fff4;
  color: #22863a;
}

.markdown-body .pl-mc {
  background-color: #ffebda;
  color: #e36209;
}

.markdown-body .pl-mi2 {
  background-color: #005cc5;
  color: #f6f8fa;
}

.markdown-body .pl-mdr {
  color: #6f42c1;
  font-weight: 700;
}

.markdown-body .pl-ba {
  color: #586069;
}

.markdown-body .pl-sg {
  color: #959da5;
}

.markdown-body .pl-corl {
  color: #032f62;
  text-decoration: underline;
}

.markdown-body details {
  display: block;
}

.markdown-body summary {
  display: list-item;
}

.markdown-body a {
  background-color: transparent;
}

.markdown-body a:active,
.markdown-body a:hover {
  outline-width: 0;
}

.markdown-body strong {
  font-weight: inherit;
  font-weight: bolder;
}

.markdown-body h1 {
  font-size: 2em;
  margin: .67em 0;
}

.markdown-body img {
  border-style: none;
}

.markdown-body code,
.markdown-body kbd,
.markdown-body pre {
  font-family: monospace,monospace;
  font-size: 1em;
}

.markdown-body hr {
  box-sizing: content-box;
  height: 0;
  overflow: visible;
}

.markdown-body input {
  font: inherit;
  margin: 0;
}

.markdown-body input {
  overflow: visible;
}

.markdown-body [type=checkbox] {
  box-sizing: border-box;
  padding: 0;
}

.markdown-body * {
  box-sizing: border-box;
}

.markdown-body input {
  font-family: inherit;
  font-size: inherit;
  line-height: inherit;
}

.markdown-body a {
  color: #0366d6;
  text-decoration: none;
}

.markdown-body a:hover {
  text-decoration: underline;
}

.markdown-body strong {
  font-weight: 600;
}

.markdown-body hr {
  background: transparent;
  border: 0;
  border-bottom: 1px solid #dfe2e5;
  height: 0;
  margin: 15px 0;
  overflow: hidden;
}

.markdown-body hr:before {
  content: "";
  display: table;
}

.markdown-body hr:after {
  clear: both;
  content: "";
  display: table;
}

.markdown-body table {
  border-collapse: collapse;
  border-spacing: 0;
}

.markdown-body td,
.markdown-body th {
  padding: 0;
}

.markdown-body details summary {
  cursor: pointer;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  margin-bottom: 0;
  margin-top: 0;
}

.markdown-body h1 {
  font-size: 32px;
}

.markdown-body h1,
.markdown-body h2 {
  font-weight: 600;
}

.markdown-body h2 {
  font-size: 24px;
}

.markdown-body h3 {
  font-size: 20px;
}

.markdown-body h3,
.markdown-body h4 {
  font-weight: 600;
}

.markdown-body h4 {
  font-size: 16px;
}

.markdown-body h5 {
  font-size: 14px;
}

.markdown-body h5,
.markdown-body h6 {
  font-weight: 600;
}

.markdown-body h6 {
  font-size: 12px;
}

.markdown-body p {
  margin-bottom: 10px;
  margin-top: 0;
}

.markdown-body blockquote {
  margin: 0;
}

.markdown-body ol,
.markdown-body ul {
  margin-bottom: 0;
  margin-top: 0;
  padding-left: 0;
}

.markdown-body ol ol,
.markdown-body ul ol {
  list-style-type: lower-roman;
}

.markdown-body ol ol ol,
.markdown-body ol ul ol,
.markdown-body ul ol ol,
.markdown-body ul ul ol {
  list-style-type: lower-alpha;
}

.markdown-body dd {
  margin-left: 0;
}

.markdown-body code,
.markdown-body pre {
  font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;
  font-size: 12px;
}

.markdown-body pre {
  margin-bottom: 0;
  margin-top: 0;
}

.markdown-body input::-webkit-inner-spin-button,
.markdown-body input::-webkit-outer-spin-button {
  -webkit-appearance: none;
  appearance: none;
  margin: 0;
}

.markdown-body .border {
  border: 1px solid #e1e4e8!important;
}

.markdown-body .border-0 {
  border: 0!important;
}

.markdown-body .border-bottom {
  border-bottom: 1px solid #e1e4e8!important;
}

.markdown-body .rounded-1 {
  border-radius: 3px!important;
}

.markdown-body .bg-white {
  background-color: #fff!important;
}

.markdown-body .bg-gray-light {
  background-color: #fafbfc!important;
}

.markdown-body .text-gray-light {
  color: #6a737d!important;
}

.markdown-body .mb-0 {
  margin-bottom: 0!important;
}

.markdown-body .my-2 {
  margin-bottom: 8px!important;
  margin-top: 8px!important;
}

.markdown-body .pl-0 {
  padding-left: 0!important;
}

.markdown-body .py-0 {
  padding-bottom: 0!important;
  padding-top: 0!important;
}

.markdown-body .pl-1 {
  padding-left: 4px!important;
}

.markdown-body .pl-2 {
  padding-left: 8px!important;
}

.markdown-body .py-2 {
  padding-bottom: 8px!important;
  padding-top: 8px!important;
}

.markdown-body .pl-3,
.markdown-body .px-3 {
  padding-left: 16px!important;
}

.markdown-body .px-3 {
  padding-right: 16px!important;
}

.markdown-body .pl-4 {
  padding-left: 24px!important;
}

.markdown-body .pl-5 {
  padding-left: 32px!important;
}

.markdown-body .pl-6 {
  padding-left: 40px!important;
}

.markdown-body .f6 {
  font-size: 12px!important;
}

.markdown-body .lh-condensed {
  line-height: 1.25!important;
}

.markdown-body .text-bold {
  font-weight: 600!important;
}

.markdown-body:before {
  content: "";
  display: table;
}

.markdown-body:after {
  clear: both;
  content: "";
  display: table;
}

.markdown-body>:first-child {
  margin-top: 0!important;
}

.markdown-body>:last-child {
  margin-bottom: 0!important;
}

.markdown-body a:not([href]) {
  color: inherit;
  text-decoration: none;
}

.markdown-body blockquote,
.markdown-body dl,
.markdown-body ol,
.markdown-body p,
.markdown-body pre,
.markdown-body table,
.markdown-body ul {
  margin-bottom: 16px;
  margin-top: 0;
}

.markdown-body hr {
  background-color: #e1e4e8;
  border: 0;
  height: .25em;
  margin: 24px 0;
  padding: 0;
}

.markdown-body blockquote {
  border-left: .25em solid #dfe2e5;
  color: #6a737d;
  padding: 0 1em;
}

.markdown-body blockquote>:first-child {
  margin-top: 0;
}

.markdown-body blockquote>:last-child {
  margin-bottom: 0;
}

.markdown-body kbd {
  background-color: #fafbfc;
  border: 1px solid #c6cbd1;
  border-bottom-color: #959da5;
  border-radius: 3px;
  box-shadow: inset 0 -1px 0 #959da5;
  color: #444d56;
  display: inline-block;
  font-size: 11px;
  line-height: 10px;
  padding: 3px 5px;
  vertical-align: middle;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  font-weight: 600;
  line-height: 1.25;
  margin-bottom: 16px;
  margin-top: 24px;
}

.markdown-body h1 {
  font-size: 2em;
}

.markdown-body h1,
.markdown-body h2 {
  border-bottom: 1px solid #eaecef;
  padding-bottom: .3em;
}

.markdown-body h2 {
  font-size: 1.5em;
}

.markdown-body h3 {
  font-size: 1.25em;
}

.markdown-body h4 {
  font-size: 1em;
}

.markdown-body h5 {
  font-size: .875em;
}

.markdown-body h6 {
  color: #6a737d;
  font-size: .85em;
}

.markdown-body ol,
.markdown-body ul {
  padding-left: 2em;
}

.markdown-body ol ol,
.markdown-body ol ul,
.markdown-body ul ol,
.markdown-body ul ul {
  margin-bottom: 0;
  margin-top: 0;
}

.markdown-body li {
  word-wrap: break-all;
}

.markdown-body li>p {
  margin-top: 16px;
}

.markdown-body li+li {
  margin-top: .25em;
}

.markdown-body dl {
  padding: 0;
}

.markdown-body dl dt {
  font-size: 1em;
  font-style: italic;
  font-weight: 600;
  margin-top: 16px;
  padding: 0;
}

.markdown-body dl dd {
  margin-bottom: 16px;
  padding: 0 16px;
}

.markdown-body table {
  display: block;
  overflow: auto;
  width: 100%;
}

.markdown-body table th {
  font-weight: 600;
}

.markdown-body table td,
.markdown-body table th {
  border: 1px solid #dfe2e5;
  padding: 6px 13px;
}

.markdown-body table tr {
  background-color: #fff;
  border-top: 1px solid #c6cbd1;
}

.markdown-body table tr:nth-child(2n) {
  background-color: #f6f8fa;
}

.markdown-body img {
  background-color: #fff;
  box-sizing: content-box;
  max-width: 100%;
}

.markdown-body img[align=right] {
  padding-left: 20px;
}

.markdown-body img[align=left] {
  padding-right: 20px;
}

.markdown-body code {
  background-color: rgba(27,31,35,.05);
  border-radius: 3px;
  font-size: 85%;
  margin: 0;
  padding: .2em .4em;
}

.markdown-body pre {
  word-wrap: normal;
}

.markdown-body pre>code {
  background: transparent;
  border: 0;
  font-size: 100%;
  margin: 0;
  padding: 0;
  white-space: pre;
  word-break: normal;
}

.markdown-body .highlight {
  margin-bottom: 16px;
}

.markdown-body .highlight pre {
  margin-bottom: 0;
  word-break: normal;
}

.markdown-body .highlight pre,
.markdown-body pre {
  background-color: #f6f8fa;
  border-radius: 3px;
  font-size: 85%;
  line-height: 1.45;
  overflow: auto;
  padding: 16px;
}

.markdown-body pre code {
  background-color: transparent;
  border: 0;
  display: inline;
  line-height: inherit;
  margin: 0;
  max-width: auto;
  overflow: visible;
  padding: 0;
  word-wrap: normal;
}

.markdown-body .commit-tease-sha {
  color: #444d56;
  display: inline-block;
  font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;
  font-size: 90%;
}

.markdown-body .blob-wrapper {
  border-bottom-left-radius: 3px;
  border-bottom-right-radius: 3px;
  overflow-x: auto;
  overflow-y: hidden;
}

.markdown-body .blob-wrapper-embedded {
  max-height: 240px;
  overflow-y: auto;
}

.markdown-body .blob-num {
  -moz-user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  color: rgba(27,31,35,.3);
  cursor: pointer;
  font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;
  font-size: 12px;
  line-height: 20px;
  min-width: 50px;
  padding-left: 10px;
  padding-right: 10px;
  text-align: right;
  user-select: none;
  vertical-align: top;
  white-space: nowrap;
  width: 1%;
}

.markdown-body .blob-num:hover {
  color: rgba(27,31,35,.6);
}

.markdown-body .blob-num:before {
  content: attr(data-line-number);
}

.markdown-body .blob-code {
  line-height: 20px;
  padding-left: 10px;
  padding-right: 10px;
  position: relative;
  vertical-align: top;
}

.markdown-body .blob-code-inner {
  color: #24292e;
  font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;
  font-size: 12px;
  overflow: visible;
  white-space: pre;
  word-wrap: normal;
}

.markdown-body .pl-token.active,
.markdown-body .pl-token:hover {
  background: #ffea7f;
  cursor: pointer;
}

.markdown-body kbd {
  background-color: #fafbfc;
  border: 1px solid #d1d5da;
  border-bottom-color: #c6cbd1;
  border-radius: 3px;
  box-shadow: inset 0 -1px 0 #c6cbd1;
  color: #444d56;
  display: inline-block;
  font: 11px SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;
  line-height: 10px;
  padding: 3px 5px;
  vertical-align: middle;
}

.markdown-body :checked+.radio-label {
  border-color: #0366d6;
  position: relative;
  z-index: 1;
}

.markdown-body .tab-size[data-tab-size="1"] {
  -moz-tab-size: 1;
  tab-size: 1;
}

.markdown-body .tab-size[data-tab-size="2"] {
  -moz-tab-size: 2;
  tab-size: 2;
}

.markdown-body .tab-size[data-tab-size="3"] {
  -moz-tab-size: 3;
  tab-size: 3;
}

.markdown-body .tab-size[data-tab-size="4"] {
  -moz-tab-size: 4;
  tab-size: 4;
}

.markdown-body .tab-size[data-tab-size="5"] {
  -moz-tab-size: 5;
  tab-size: 5;
}

.markdown-body .tab-size[data-tab-size="6"] {
  -moz-tab-size: 6;
  tab-size: 6;
}

.markdown-body .tab-size[data-tab-size="7"] {
  -moz-tab-size: 7;
  tab-size: 7;
}

.markdown-body .tab-size[data-tab-size="8"] {
  -moz-tab-size: 8;
  tab-size: 8;
}

.markdown-body .tab-size[data-tab-size="9"] {
  -moz-tab-size: 9;
  tab-size: 9;
}

.markdown-body .tab-size[data-tab-size="10"] {
  -moz-tab-size: 10;
  tab-size: 10;
}

.markdown-body .tab-size[data-tab-size="11"] {
  -moz-tab-size: 11;
  tab-size: 11;
}

.markdown-body .tab-size[data-tab-size="12"] {
  -moz-tab-size: 12;
  tab-size: 12;
}

.markdown-body .task-list-item {
  list-style-type: none;
}

.markdown-body .task-list-item+.task-list-item {
  margin-top: 3px;
}

.markdown-body .task-list-item input {
  margin: 0 .2em .25em -1.6em;
  vertical-align: middle;
}

.markdown-body hr {
  border-bottom-color: #eee;
}

.markdown-body .pl-0 {
  padding-left: 0!important;
}

.markdown-body .pl-1 {
  padding-left: 4px!important;
}

.markdown-body .pl-2 {
  padding-left: 8px!important;
}

.markdown-body .pl-3 {
  padding-left: 16px!important;
}

.markdown-body .pl-4 {
  padding-left: 24px!important;
}

.markdown-body .pl-5 {
  padding-left: 32px!important;
}

.markdown-body .pl-6 {
  padding-left: 40px!important;
}

.markdown-body .pl-7 {
  padding-left: 48px!important;
}

.markdown-body .pl-8 {
  padding-left: 64px!important;
}

.markdown-body .pl-9 {
  padding-left: 80px!important;
}

.markdown-body .pl-10 {
  padding-left: 96px!important;
}

.markdown-body .pl-11 {
  padding-left: 112px!important;
}

.markdown-body .pl-12 {
  padding-left: 128px!important;
}

/*# sourceURL=webpack://./node_modules/github-markdown-css/github-markdown.css */
/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL25vZGVfbW9kdWxlcy9naXRodWItbWFya2Rvd24tY3NzL2dpdGh1Yi1tYXJrZG93bi5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSwwQkFBMEI7RUFDMUIsMkRBQXF0RTtBQUN2dEU7O0FBRUE7RUFDRSxxQkFBcUI7RUFDckIsa0JBQWtCO0VBQ2xCLDJCQUEyQjtBQUM3Qjs7QUFFQTtFQUNFLFdBQVc7RUFDWCxjQUFjO0VBQ2Qsa0JBQWtCO0VBQ2xCLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGFBQWE7QUFDZjs7QUFFQTs7Ozs7O0VBTUUsY0FBYztFQUNkLHNCQUFzQjtFQUN0QixrQkFBa0I7QUFDcEI7O0FBRUE7Ozs7OztFQU1FLHFCQUFxQjtBQUN2Qjs7QUFFQTs7Ozs7O0VBTUUsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsMEJBQTBCO0VBQzFCLDhCQUE4QjtFQUM5QixjQUFjO0VBQ2QsZ0JBQWdCO0VBQ2hCLGtJQUFrSTtFQUNsSSxlQUFlO0VBQ2YsZ0JBQWdCO0VBQ2hCLHFCQUFxQjtBQUN2Qjs7QUFFQTtFQUNFLGNBQWM7QUFDaEI7O0FBRUE7O0VBRUUsY0FBYztBQUNoQjs7QUFFQTs7RUFFRSxjQUFjO0FBQ2hCOztBQUVBOztFQUVFLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsY0FBYztBQUNoQjs7QUFFQTs7Ozs7OztFQU9FLGNBQWM7QUFDaEI7O0FBRUE7O0VBRUUsY0FBYztBQUNoQjs7QUFFQTtFQUNFLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSx5QkFBeUI7RUFDekIsY0FBYztBQUNoQjs7QUFFQTtFQUNFLHlCQUF5QjtFQUN6QixjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsYUFBYTtBQUNmOztBQUVBO0VBQ0UsY0FBYztFQUNkLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLGNBQWM7QUFDaEI7O0FBRUE7OztFQUdFLGNBQWM7RUFDZCxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFD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 */
  </style>
  <style>
  /**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
	color: black;
	background: none;
	text-shadow: 0 1px white;
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	font-size: 1em;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
	text-shadow: none;
	background: #b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
	text-shadow: none;
	background: #b3d4fc;
}

@media print {
	code[class*="language-"],
	pre[class*="language-"] {
		text-shadow: none;
	}
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #f5f2f0;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #999;
}

.token.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
	color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
	color: #9a6e3a;
	/* This background color was intended by the author of this theme. */
	background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
	color: #07a;
}

.token.function,
.token.class-name {
	color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
	color: #e90;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}

/*# sourceURL=webpack://./node_modules/prismjs/themes/prism.css */
/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL25vZGVfbW9kdWxlcy9wcmlzbWpzL3RoZW1lcy9wcmlzbS5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7RUFJRTs7QUFFRjs7Q0FFQyxZQUFZO0NBQ1osZ0JBQWdCO0NBQ2hCLHdCQUF3QjtDQUN4QixzRUFBc0U7Q0FDdEUsY0FBYztDQUNkLGdCQUFnQjtDQUNoQixnQkFBZ0I7Q0FDaEIsb0JBQW9CO0NBQ3BCLGtCQUFrQjtDQUNsQixpQkFBaUI7Q0FDakIsZ0JBQWdCOztDQUVoQixnQkFBZ0I7Q0FDaEIsY0FBYztDQUNkLFdBQVc7O0NBRVgscUJBQXFCO0NBQ3JCLGtCQUFrQjtDQUNsQixpQkFBaUI7Q0FDakIsYUFBYTtBQUNkOztBQUVBOztDQUVDLGlCQUFpQjtDQUNqQixtQkFBbUI7QUFDcEI7O0FBRUE7O0NBRUMsaUJBQWlCO0NBQ2pCLG1CQUFtQjtBQUNwQjs7QUFFQTtDQUNDOztFQUVDLGlCQUFpQjtDQUNsQjtBQUNEOztBQUVBLGdCQUFnQjtBQUNoQjtDQUNDLFlBQVk7Q0FDWixjQUFjO0NBQ2QsY0FBYztBQUNmOztBQUVBOztDQUVDLG1CQUFtQjtBQUNwQjs7QUFFQSxnQkFBZ0I7QUFDaEI7Q0FDQyxhQUFhO0NBQ2IsbUJBQW1CO0NBQ25CLG1CQUFtQjtBQUNwQjs7QUFFQTs7OztDQUlDLGdCQUFnQjtBQUNqQjs7QUFFQTtDQUNDLFdBQVc7QUFDWjs7QUFFQTtDQUNDLFdBQVc7QUFDWjs7QUFFQTs7Ozs7OztDQU9DLFdBQVc7QUFDWjs7QUFFQTs7Ozs7O0NBTUMsV0FBVztBQUNaOztBQUVBOzs7OztDQUtDLGNBQWM7Q0FDZCxvRUFBb0U7Q0FDcEUsaUNBQWlDO0FBQ2xDOztBQUVBOzs7Q0FHQyxXQUFXO0FBQ1o7O0FBRUE7O0NBRUMsY0FBYztBQUNmOztBQUVBOzs7Q0FHQyxXQUFXO0FBQ1o7O0FBRUE7O0NBRUMsaUJBQWlCO0FBQ2xCO0FBQ0E7Q0FDQyxrQkFBa0I7QUFDbkI7O0FBRUE7Q0FDQyxZQUFZO0FBQ2IiLCJzb3VyY2VSb290IjoiIn0= */
  </style>
  <style>
  /* stylelint-disable font-family-no-missing-generic-family-keyword */
@font-face {
  font-family: 'KaTeX_AMS';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_AMS-Regular.73ea273a.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_AMS-Regular.d562e886.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_AMS-Regular.853be924.ttf) format('truetype');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Caligraphic';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Caligraphic-Bold.a1abf90d.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Caligraphic-Bold.d757c535.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Caligraphic-Bold.7489a2fb.ttf) format('truetype');
  font-weight: bold;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Caligraphic';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Caligraphic-Regular.d6484fce.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Caligraphic-Regular.db074fa2.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Caligraphic-Regular.7e873d38.ttf) format('truetype');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Fraktur';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Fraktur-Bold.931d67ea.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Fraktur-Bold.354501ba.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Fraktur-Bold.4c761b37.ttf) format('truetype');
  font-weight: bold;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Fraktur';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Fraktur-Regular.172d3529.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Fraktur-Regular.6fdf0ac5.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Fraktur-Regular.ed305b54.ttf) format('truetype');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Main';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Main-Bold.39890742.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Main-Bold.0c3b8929.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Main-Bold.8169508b.ttf) format('truetype');
  font-weight: bold;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Main';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Main-BoldItalic.20f389c4.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Main-BoldItalic.428978dc.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Main-BoldItalic.828abcb2.ttf) format('truetype');
  font-weight: bold;
  font-style: italic;
}
@font-face {
  font-family: 'KaTeX_Main';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Main-Italic.fe2176f7.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Main-Italic.fd947498.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Main-Italic.fa675e5e.ttf) format('truetype');
  font-weight: normal;
  font-style: italic;
}
@font-face {
  font-family: 'KaTeX_Main';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Main-Regular.f650f111.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Main-Regular.4f35fbcc.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Main-Regular.9eba1d77.ttf) format('truetype');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Math';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Math-BoldItalic.dcbcbd93.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Math-BoldItalic.3f07ed67.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Math-BoldItalic.bf2d440b.ttf) format('truetype');
  font-weight: bold;
  font-style: italic;
}
@font-face {
  font-family: 'KaTeX_Math';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Math-Italic.6d3d25f4.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Math-Italic.96759856.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Math-Italic.8a5f9363.ttf) format('truetype');
  font-weight: normal;
  font-style: italic;
}
@font-face {
  font-family: 'KaTeX_SansSerif';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_SansSerif-Bold.95591a92.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_SansSerif-Bold.b9cd458a.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_SansSerif-Bold.5b49f499.ttf) format('truetype');
  font-weight: bold;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_SansSerif';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_SansSerif-Italic.7d393d38.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_SansSerif-Italic.8d593cfa.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_SansSerif-Italic.b257a18c.ttf) format('truetype');
  font-weight: normal;
  font-style: italic;
}
@font-face {
  font-family: 'KaTeX_SansSerif';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_SansSerif-Regular.cd5e231e.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_SansSerif-Regular.02271ec5.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_SansSerif-Regular.2f7bc363.ttf) format('truetype');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Script';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Script-Regular.c81d1b2a.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Script-Regular.073b3402.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Script-Regular.fc9ba524.ttf) format('truetype');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Size1';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Size1-Regular.6eec866c.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Size1-Regular.0108e89c.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Size1-Regular.6de7d4b5.ttf) format('truetype');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Size2';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Size2-Regular.2960900c.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Size2-Regular.3a99e70a.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Size2-Regular.57f5c183.ttf) format('truetype');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Size3';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Size3-Regular.e1951519.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Size3-Regular.7947224e.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Size3-Regular.8d6b6822.ttf) format('truetype');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Size4';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Size4-Regular.e418bf25.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Size4-Regular.aeffd802.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Size4-Regular.4ad7c7e8.ttf) format('truetype');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Typewriter';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Typewriter-Regular.c295e7f7.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Typewriter-Regular.4c6b94fd.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Typewriter-Regular.c5c02d76.ttf) format('truetype');
  font-weight: normal;
  font-style: normal;
}
.katex {
  font: normal 1.21em KaTeX_Main, Times New Roman, serif;
  line-height: 1.2;
  text-indent: 0;
  text-rendering: auto;
}
.katex * {
  -ms-high-contrast-adjust: none !important;
  border-color: currentColor;
}
.katex .katex-version::after {
  content: "0.15.2";
}
.katex .katex-mathml {
  /* Accessibility hack to only show to screen readers
         Found at: http://a11yproject.com/posts/how-to-hide-content/ */
  position: absolute;
  clip: rect(1px, 1px, 1px, 1px);
  padding: 0;
  border: 0;
  height: 1px;
  width: 1px;
  overflow: hidden;
}
.katex .katex-html {
  /* \newline is an empty block at top level, between .base elements */
}
.katex .katex-html > .newline {
  display: block;
}
.katex .base {
  position: relative;
  display: inline-block;
  white-space: nowrap;
  width: -webkit-min-content;
  width: -moz-min-content;
  width: min-content;
}
.katex .strut {
  display: inline-block;
}
.katex .textbf {
  font-weight: bold;
}
.katex .textit {
  font-style: italic;
}
.katex .textrm {
  font-family: KaTeX_Main;
}
.katex .textsf {
  font-family: KaTeX_SansSerif;
}
.katex .texttt {
  font-family: KaTeX_Typewriter;
}
.katex .mathnormal {
  font-family: KaTeX_Math;
  font-style: italic;
}
.katex .mathit {
  font-family: KaTeX_Main;
  font-style: italic;
}
.katex .mathrm {
  font-style: normal;
}
.katex .mathbf {
  font-family: KaTeX_Main;
  font-weight: bold;
}
.katex .boldsymbol {
  font-family: KaTeX_Math;
  font-weight: bold;
  font-style: italic;
}
.katex .amsrm {
  font-family: KaTeX_AMS;
}
.katex .mathbb,
.katex .textbb {
  font-family: KaTeX_AMS;
}
.katex .mathcal {
  font-family: KaTeX_Caligraphic;
}
.katex .mathfrak,
.katex .textfrak {
  font-family: KaTeX_Fraktur;
}
.katex .mathtt {
  font-family: KaTeX_Typewriter;
}
.katex .mathscr,
.katex .textscr {
  font-family: KaTeX_Script;
}
.katex .mathsf,
.katex .textsf {
  font-family: KaTeX_SansSerif;
}
.katex .mathboldsf,
.katex .textboldsf {
  font-family: KaTeX_SansSerif;
  font-weight: bold;
}
.katex .mathitsf,
.katex .textitsf {
  font-family: KaTeX_SansSerif;
  font-style: italic;
}
.katex .mainrm {
  font-family: KaTeX_Main;
  font-style: normal;
}
.katex .vlist-t {
  display: inline-table;
  table-layout: fixed;
  border-collapse: collapse;
}
.katex .vlist-r {
  display: table-row;
}
.katex .vlist {
  display: table-cell;
  vertical-align: bottom;
  position: relative;
}
.katex .vlist > span {
  display: block;
  height: 0;
  position: relative;
}
.katex .vlist > span > span {
  display: inline-block;
}
.katex .vlist > span > .pstrut {
  overflow: hidden;
  width: 0;
}
.katex .vlist-t2 {
  margin-right: -2px;
}
.katex .vlist-s {
  display: table-cell;
  vertical-align: bottom;
  font-size: 1px;
  width: 2px;
  min-width: 2px;
}
.katex .vbox {
  display: inline-flex;
  flex-direction: column;
  align-items: baseline;
}
.katex .hbox {
  display: inline-flex;
  flex-direction: row;
  width: 100%;
}
.katex .thinbox {
  display: inline-flex;
  flex-direction: row;
  width: 0;
  max-width: 0;
}
.katex .msupsub {
  text-align: left;
}
.katex .mfrac > span > span {
  text-align: center;
}
.katex .mfrac .frac-line {
  display: inline-block;
  width: 100%;
  border-bottom-style: solid;
}
.katex .mfrac .frac-line,
.katex .overline .overline-line,
.katex .underline .underline-line,
.katex .hline,
.katex .hdashline,
.katex .rule {
  min-height: 1px;
}
.katex .mspace {
  display: inline-block;
}
.katex .llap,
.katex .rlap,
.katex .clap {
  width: 0;
  position: relative;
}
.katex .llap > .inner,
.katex .rlap > .inner,
.katex .clap > .inner {
  position: absolute;
}
.katex .llap > .fix,
.katex .rlap > .fix,
.katex .clap > .fix {
  display: inline-block;
}
.katex .llap > .inner {
  right: 0;
}
.katex .rlap > .inner,
.katex .clap > .inner {
  left: 0;
}
.katex .clap > .inner > span {
  margin-left: -50%;
  margin-right: 50%;
}
.katex .rule {
  display: inline-block;
  border: solid 0;
  position: relative;
}
.katex .overline .overline-line,
.katex .underline .underline-line,
.katex .hline {
  display: inline-block;
  width: 100%;
  border-bottom-style: solid;
}
.katex .hdashline {
  display: inline-block;
  width: 100%;
  border-bottom-style: dashed;
}
.katex .sqrt > .root {
  /* These values are taken from the definition of `\r@@t`,
             `\mkern 5mu` and `\mkern -10mu`. */
  margin-left: 0.27777778em;
  margin-right: -0.55555556em;
}
.katex .sizing.reset-size1.size1,
.katex .fontsize-ensurer.reset-size1.size1 {
  font-size: 1em;
}
.katex .sizing.reset-size1.size2,
.katex .fontsize-ensurer.reset-size1.size2 {
  font-size: 1.2em;
}
.katex .sizing.reset-size1.size3,
.katex .fontsize-ensurer.reset-size1.size3 {
  font-size: 1.4em;
}
.katex .sizing.reset-size1.size4,
.katex .fontsize-ensurer.reset-size1.size4 {
  font-size: 1.6em;
}
.katex .sizing.reset-size1.size5,
.katex .fontsize-ensurer.reset-size1.size5 {
  font-size: 1.8em;
}
.katex .sizing.reset-size1.size6,
.katex .fontsize-ensurer.reset-size1.size6 {
  font-size: 2em;
}
.katex .sizing.reset-size1.size7,
.katex .fontsize-ensurer.reset-size1.size7 {
  font-size: 2.4em;
}
.katex .sizing.reset-size1.size8,
.katex .fontsize-ensurer.reset-size1.size8 {
  font-size: 2.88em;
}
.katex .sizing.reset-size1.size9,
.katex .fontsize-ensurer.reset-size1.size9 {
  font-size: 3.456em;
}
.katex .sizing.reset-size1.size10,
.katex .fontsize-ensurer.reset-size1.size10 {
  font-size: 4.148em;
}
.katex .sizing.reset-size1.size11,
.katex .fontsize-ensurer.reset-size1.size11 {
  font-size: 4.976em;
}
.katex .sizing.reset-size2.size1,
.katex .fontsize-ensurer.reset-size2.size1 {
  font-size: 0.83333333em;
}
.katex .sizing.reset-size2.size2,
.katex .fontsize-ensurer.reset-size2.size2 {
  font-size: 1em;
}
.katex .sizing.reset-size2.size3,
.katex .fontsize-ensurer.reset-size2.size3 {
  font-size: 1.16666667em;
}
.katex .sizing.reset-size2.size4,
.katex .fontsize-ensurer.reset-size2.size4 {
  font-size: 1.33333333em;
}
.katex .sizing.reset-size2.size5,
.katex .fontsize-ensurer.reset-size2.size5 {
  font-size: 1.5em;
}
.katex .sizing.reset-size2.size6,
.katex .fontsize-ensurer.reset-size2.size6 {
  font-size: 1.66666667em;
}
.katex .sizing.reset-size2.size7,
.katex .fontsize-ensurer.reset-size2.size7 {
  font-size: 2em;
}
.katex .sizing.reset-size2.size8,
.katex .fontsize-ensurer.reset-size2.size8 {
  font-size: 2.4em;
}
.katex .sizing.reset-size2.size9,
.katex .fontsize-ensurer.reset-size2.size9 {
  font-size: 2.88em;
}
.katex .sizing.reset-size2.size10,
.katex .fontsize-ensurer.reset-size2.size10 {
  font-size: 3.45666667em;
}
.katex .sizing.reset-size2.size11,
.katex .fontsize-ensurer.reset-size2.size11 {
  font-size: 4.14666667em;
}
.katex .sizing.reset-size3.size1,
.katex .fontsize-ensurer.reset-size3.size1 {
  font-size: 0.71428571em;
}
.katex .sizing.reset-size3.size2,
.katex .fontsize-ensurer.reset-size3.size2 {
  font-size: 0.85714286em;
}
.katex .sizing.reset-size3.size3,
.katex .fontsize-ensurer.reset-size3.size3 {
  font-size: 1em;
}
.katex .sizing.reset-size3.size4,
.katex .fontsize-ensurer.reset-size3.size4 {
  font-size: 1.14285714em;
}
.katex .sizing.reset-size3.size5,
.katex .fontsize-ensurer.reset-size3.size5 {
  font-size: 1.28571429em;
}
.katex .sizing.reset-size3.size6,
.katex .fontsize-ensurer.reset-size3.size6 {
  font-size: 1.42857143em;
}
.katex .sizing.reset-size3.size7,
.katex .fontsize-ensurer.reset-size3.size7 {
  font-size: 1.71428571em;
}
.katex .sizing.reset-size3.size8,
.katex .fontsize-ensurer.reset-size3.size8 {
  font-size: 2.05714286em;
}
.katex .sizing.reset-size3.size9,
.katex .fontsize-ensurer.reset-size3.size9 {
  font-size: 2.46857143em;
}
.katex .sizing.reset-size3.size10,
.katex .fontsize-ensurer.reset-size3.size10 {
  font-size: 2.96285714em;
}
.katex .sizing.reset-size3.size11,
.katex .fontsize-ensurer.reset-size3.size11 {
  font-size: 3.55428571em;
}
.katex .sizing.reset-size4.size1,
.katex .fontsize-ensurer.reset-size4.size1 {
  font-size: 0.625em;
}
.katex .sizing.reset-size4.size2,
.katex .fontsize-ensurer.reset-size4.size2 {
  font-size: 0.75em;
}
.katex .sizing.reset-size4.size3,
.katex .fontsize-ensurer.reset-size4.size3 {
  font-size: 0.875em;
}
.katex .sizing.reset-size4.size4,
.katex .fontsize-ensurer.reset-size4.size4 {
  font-size: 1em;
}
.katex .sizing.reset-size4.size5,
.katex .fontsize-ensurer.reset-size4.size5 {
  font-size: 1.125em;
}
.katex .sizing.reset-size4.size6,
.katex .fontsize-ensurer.reset-size4.size6 {
  font-size: 1.25em;
}
.katex .sizing.reset-size4.size7,
.katex .fontsize-ensurer.reset-size4.size7 {
  font-size: 1.5em;
}
.katex .sizing.reset-size4.size8,
.katex .fontsize-ensurer.reset-size4.size8 {
  font-size: 1.8em;
}
.katex .sizing.reset-size4.size9,
.katex .fontsize-ensurer.reset-size4.size9 {
  font-size: 2.16em;
}
.katex .sizing.reset-size4.size10,
.katex .fontsize-ensurer.reset-size4.size10 {
  font-size: 2.5925em;
}
.katex .sizing.reset-size4.size11,
.katex .fontsize-ensurer.reset-size4.size11 {
  font-size: 3.11em;
}
.katex .sizing.reset-size5.size1,
.katex .fontsize-ensurer.reset-size5.size1 {
  font-size: 0.55555556em;
}
.katex .sizing.reset-size5.size2,
.katex .fontsize-ensurer.reset-size5.size2 {
  font-size: 0.66666667em;
}
.katex .sizing.reset-size5.size3,
.katex .fontsize-ensurer.reset-size5.size3 {
  font-size: 0.77777778em;
}
.katex .sizing.reset-size5.size4,
.katex .fontsize-ensurer.reset-size5.size4 {
  font-size: 0.88888889em;
}
.katex .sizing.reset-size5.size5,
.katex .fontsize-ensurer.reset-size5.size5 {
  font-size: 1em;
}
.katex .sizing.reset-size5.size6,
.katex .fontsize-ensurer.reset-size5.size6 {
  font-size: 1.11111111em;
}
.katex .sizing.reset-size5.size7,
.katex .fontsize-ensurer.reset-size5.size7 {
  font-size: 1.33333333em;
}
.katex .sizing.reset-size5.size8,
.katex .fontsize-ensurer.reset-size5.size8 {
  font-size: 1.6em;
}
.katex .sizing.reset-size5.size9,
.katex .fontsize-ensurer.reset-size5.size9 {
  font-size: 1.92em;
}
.katex .sizing.reset-size5.size10,
.katex .fontsize-ensurer.reset-size5.size10 {
  font-size: 2.30444444em;
}
.katex .sizing.reset-size5.size11,
.katex .fontsize-ensurer.reset-size5.size11 {
  font-size: 2.76444444em;
}
.katex .sizing.reset-size6.size1,
.katex .fontsize-ensurer.reset-size6.size1 {
  font-size: 0.5em;
}
.katex .sizing.reset-size6.size2,
.katex .fontsize-ensurer.reset-size6.size2 {
  font-size: 0.6em;
}
.katex .sizing.reset-size6.size3,
.katex .fontsize-ensurer.reset-size6.size3 {
  font-size: 0.7em;
}
.katex .sizing.reset-size6.size4,
.katex .fontsize-ensurer.reset-size6.size4 {
  font-size: 0.8em;
}
.katex .sizing.reset-size6.size5,
.katex .fontsize-ensurer.reset-size6.size5 {
  font-size: 0.9em;
}
.katex .sizing.reset-size6.size6,
.katex .fontsize-ensurer.reset-size6.size6 {
  font-size: 1em;
}
.katex .sizing.reset-size6.size7,
.katex .fontsize-ensurer.reset-size6.size7 {
  font-size: 1.2em;
}
.katex .sizing.reset-size6.size8,
.katex .fontsize-ensurer.reset-size6.size8 {
  font-size: 1.44em;
}
.katex .sizing.reset-size6.size9,
.katex .fontsize-ensurer.reset-size6.size9 {
  font-size: 1.728em;
}
.katex .sizing.reset-size6.size10,
.katex .fontsize-ensurer.reset-size6.size10 {
  font-size: 2.074em;
}
.katex .sizing.reset-size6.size11,
.katex .fontsize-ensurer.reset-size6.size11 {
  font-size: 2.488em;
}
.katex .sizing.reset-size7.size1,
.katex .fontsize-ensurer.reset-size7.size1 {
  font-size: 0.41666667em;
}
.katex .sizing.reset-size7.size2,
.katex .fontsize-ensurer.reset-size7.size2 {
  font-size: 0.5em;
}
.katex .sizing.reset-size7.size3,
.katex .fontsize-ensurer.reset-size7.size3 {
  font-size: 0.58333333em;
}
.katex .sizing.reset-size7.size4,
.katex .fontsize-ensurer.reset-size7.size4 {
  font-size: 0.66666667em;
}
.katex .sizing.reset-size7.size5,
.katex .fontsize-ensurer.reset-size7.size5 {
  font-size: 0.75em;
}
.katex .sizing.reset-size7.size6,
.katex .fontsize-ensurer.reset-size7.size6 {
  font-size: 0.83333333em;
}
.katex .sizing.reset-size7.size7,
.katex .fontsize-ensurer.reset-size7.size7 {
  font-size: 1em;
}
.katex .sizing.reset-size7.size8,
.katex .fontsize-ensurer.reset-size7.size8 {
  font-size: 1.2em;
}
.katex .sizing.reset-size7.size9,
.katex .fontsize-ensurer.reset-size7.size9 {
  font-size: 1.44em;
}
.katex .sizing.reset-size7.size10,
.katex .fontsize-ensurer.reset-size7.size10 {
  font-size: 1.72833333em;
}
.katex .sizing.reset-size7.size11,
.katex .fontsize-ensurer.reset-size7.size11 {
  font-size: 2.07333333em;
}
.katex .sizing.reset-size8.size1,
.katex .fontsize-ensurer.reset-size8.size1 {
  font-size: 0.34722222em;
}
.katex .sizing.reset-size8.size2,
.katex .fontsize-ensurer.reset-size8.size2 {
  font-size: 0.41666667em;
}
.katex .sizing.reset-size8.size3,
.katex .fontsize-ensurer.reset-size8.size3 {
  font-size: 0.48611111em;
}
.katex .sizing.reset-size8.size4,
.katex .fontsize-ensurer.reset-size8.size4 {
  font-size: 0.55555556em;
}
.katex .sizing.reset-size8.size5,
.katex .fontsize-ensurer.reset-size8.size5 {
  font-size: 0.625em;
}
.katex .sizing.reset-size8.size6,
.katex .fontsize-ensurer.reset-size8.size6 {
  font-size: 0.69444444em;
}
.katex .sizing.reset-size8.size7,
.katex .fontsize-ensurer.reset-size8.size7 {
  font-size: 0.83333333em;
}
.katex .sizing.reset-size8.size8,
.katex .fontsize-ensurer.reset-size8.size8 {
  font-size: 1em;
}
.katex .sizing.reset-size8.size9,
.katex .fontsize-ensurer.reset-size8.size9 {
  font-size: 1.2em;
}
.katex .sizing.reset-size8.size10,
.katex .fontsize-ensurer.reset-size8.size10 {
  font-size: 1.44027778em;
}
.katex .sizing.reset-size8.size11,
.katex .fontsize-ensurer.reset-size8.size11 {
  font-size: 1.72777778em;
}
.katex .sizing.reset-size9.size1,
.katex .fontsize-ensurer.reset-size9.size1 {
  font-size: 0.28935185em;
}
.katex .sizing.reset-size9.size2,
.katex .fontsize-ensurer.reset-size9.size2 {
  font-size: 0.34722222em;
}
.katex .sizing.reset-size9.size3,
.katex .fontsize-ensurer.reset-size9.size3 {
  font-size: 0.40509259em;
}
.katex .sizing.reset-size9.size4,
.katex .fontsize-ensurer.reset-size9.size4 {
  font-size: 0.46296296em;
}
.katex .sizing.reset-size9.size5,
.katex .fontsize-ensurer.reset-size9.size5 {
  font-size: 0.52083333em;
}
.katex .sizing.reset-size9.size6,
.katex .fontsize-ensurer.reset-size9.size6 {
  font-size: 0.5787037em;
}
.katex .sizing.reset-size9.size7,
.katex .fontsize-ensurer.reset-size9.size7 {
  font-size: 0.69444444em;
}
.katex .sizing.reset-size9.size8,
.katex .fontsize-ensurer.reset-size9.size8 {
  font-size: 0.83333333em;
}
.katex .sizing.reset-size9.size9,
.katex .fontsize-ensurer.reset-size9.size9 {
  font-size: 1em;
}
.katex .sizing.reset-size9.size10,
.katex .fontsize-ensurer.reset-size9.size10 {
  font-size: 1.20023148em;
}
.katex .sizing.reset-size9.size11,
.katex .fontsize-ensurer.reset-size9.size11 {
  font-size: 1.43981481em;
}
.katex .sizing.reset-size10.size1,
.katex .fontsize-ensurer.reset-size10.size1 {
  font-size: 0.24108004em;
}
.katex .sizing.reset-size10.size2,
.katex .fontsize-ensurer.reset-size10.size2 {
  font-size: 0.28929605em;
}
.katex .sizing.reset-size10.size3,
.katex .fontsize-ensurer.reset-size10.size3 {
  font-size: 0.33751205em;
}
.katex .sizing.reset-size10.size4,
.katex .fontsize-ensurer.reset-size10.size4 {
  font-size: 0.38572806em;
}
.katex .sizing.reset-size10.size5,
.katex .fontsize-ensurer.reset-size10.size5 {
  font-size: 0.43394407em;
}
.katex .sizing.reset-size10.size6,
.katex .fontsize-ensurer.reset-size10.size6 {
  font-size: 0.48216008em;
}
.katex .sizing.reset-size10.size7,
.katex .fontsize-ensurer.reset-size10.size7 {
  font-size: 0.57859209em;
}
.katex .sizing.reset-size10.size8,
.katex .fontsize-ensurer.reset-size10.size8 {
  font-size: 0.69431051em;
}
.katex .sizing.reset-size10.size9,
.katex .fontsize-ensurer.reset-size10.size9 {
  font-size: 0.83317261em;
}
.katex .sizing.reset-size10.size10,
.katex .fontsize-ensurer.reset-size10.size10 {
  font-size: 1em;
}
.katex .sizing.reset-size10.size11,
.katex .fontsize-ensurer.reset-size10.size11 {
  font-size: 1.19961427em;
}
.katex .sizing.reset-size11.size1,
.katex .fontsize-ensurer.reset-size11.size1 {
  font-size: 0.20096463em;
}
.katex .sizing.reset-size11.size2,
.katex .fontsize-ensurer.reset-size11.size2 {
  font-size: 0.24115756em;
}
.katex .sizing.reset-size11.size3,
.katex .fontsize-ensurer.reset-size11.size3 {
  font-size: 0.28135048em;
}
.katex .sizing.reset-size11.size4,
.katex .fontsize-ensurer.reset-size11.size4 {
  font-size: 0.32154341em;
}
.katex .sizing.reset-size11.size5,
.katex .fontsize-ensurer.reset-size11.size5 {
  font-size: 0.36173633em;
}
.katex .sizing.reset-size11.size6,
.katex .fontsize-ensurer.reset-size11.size6 {
  font-size: 0.40192926em;
}
.katex .sizing.reset-size11.size7,
.katex .fontsize-ensurer.reset-size11.size7 {
  font-size: 0.48231511em;
}
.katex .sizing.reset-size11.size8,
.katex .fontsize-ensurer.reset-size11.size8 {
  font-size: 0.57877814em;
}
.katex .sizing.reset-size11.size9,
.katex .fontsize-ensurer.reset-size11.size9 {
  font-size: 0.69453376em;
}
.katex .sizing.reset-size11.size10,
.katex .fontsize-ensurer.reset-size11.size10 {
  font-size: 0.83360129em;
}
.katex .sizing.reset-size11.size11,
.katex .fontsize-ensurer.reset-size11.size11 {
  font-size: 1em;
}
.katex .delimsizing.size1 {
  font-family: KaTeX_Size1;
}
.katex .delimsizing.size2 {
  font-family: KaTeX_Size2;
}
.katex .delimsizing.size3 {
  font-family: KaTeX_Size3;
}
.katex .delimsizing.size4 {
  font-family: KaTeX_Size4;
}
.katex .delimsizing.mult .delim-size1 > span {
  font-family: KaTeX_Size1;
}
.katex .delimsizing.mult .delim-size4 > span {
  font-family: KaTeX_Size4;
}
.katex .nulldelimiter {
  display: inline-block;
  width: 0.12em;
}
.katex .delimcenter {
  position: relative;
}
.katex .op-symbol {
  position: relative;
}
.katex .op-symbol.small-op {
  font-family: KaTeX_Size1;
}
.katex .op-symbol.large-op {
  font-family: KaTeX_Size2;
}
.katex .op-limits > .vlist-t {
  text-align: center;
}
.katex .accent > .vlist-t {
  text-align: center;
}
.katex .accent .accent-body {
  position: relative;
}
.katex .accent .accent-body:not(.accent-full) {
  width: 0;
}
.katex .overlay {
  display: block;
}
.katex .mtable .vertical-separator {
  display: inline-block;
  min-width: 1px;
}
.katex .mtable .arraycolsep {
  display: inline-block;
}
.katex .mtable .col-align-c > .vlist-t {
  text-align: center;
}
.katex .mtable .col-align-l > .vlist-t {
  text-align: left;
}
.katex .mtable .col-align-r > .vlist-t {
  text-align: right;
}
.katex .svg-align {
  text-align: left;
}
.katex svg {
  display: block;
  position: absolute;
  width: 100%;
  height: inherit;
  fill: currentColor;
  stroke: currentColor;
  fill-rule: nonzero;
  fill-opacity: 1;
  stroke-width: 1;
  stroke-linecap: butt;
  stroke-linejoin: miter;
  stroke-miterlimit: 4;
  stroke-dasharray: none;
  stroke-dashoffset: 0;
  stroke-opacity: 1;
}
.katex svg path {
  stroke: none;
}
.katex img {
  border-style: none;
  min-width: 0;
  min-height: 0;
  max-width: none;
  max-height: none;
}
.katex .stretchy {
  width: 100%;
  display: block;
  position: relative;
  overflow: hidden;
}
.katex .stretchy::before,
.katex .stretchy::after {
  content: "";
}
.katex .hide-tail {
  width: 100%;
  position: relative;
  overflow: hidden;
}
.katex .halfarrow-left {
  position: absolute;
  left: 0;
  width: 50.2%;
  overflow: hidden;
}
.katex .halfarrow-right {
  position: absolute;
  right: 0;
  width: 50.2%;
  overflow: hidden;
}
.katex .brace-left {
  position: absolute;
  left: 0;
  width: 25.1%;
  overflow: hidden;
}
.katex .brace-center {
  position: absolute;
  left: 25%;
  width: 50%;
  overflow: hidden;
}
.katex .brace-right {
  position: absolute;
  right: 0;
  width: 25.1%;
  overflow: hidden;
}
.katex .x-arrow-pad {
  padding: 0 0.5em;
}
.katex .cd-arrow-pad {
  padding: 0 0.55556em 0 0.27778em;
}
.katex .x-arrow,
.katex .mover,
.katex .munder {
  text-align: center;
}
.katex .boxpad {
  padding: 0 0.3em;
}
.katex .fbox,
.katex .fcolorbox {
  box-sizing: border-box;
  border: 0.04em solid;
}
.katex .cancel-pad {
  padding: 0 0.2em;
}
.katex .cancel-lap {
  margin-left: -0.2em;
  margin-right: -0.2em;
}
.katex .sout {
  border-bottom-style: solid;
  border-bottom-width: 0.08em;
}
.katex .angl {
  box-sizing: border-box;
  border-top: 0.049em solid;
  border-right: 0.049em solid;
  margin-right: 0.03889em;
}
.katex .anglpad {
  padding: 0 0.03889em;
}
.katex .eqn-num::before {
  counter-increment: katexEqnNo;
  content: "(" counter(katexEqnNo) ")";
}
.katex .mml-eqn-num::before {
  counter-increment: mmlEqnNo;
  content: "(" counter(mmlEqnNo) ")";
}
.katex .mtr-glue {
  width: 50%;
}
.katex .cd-vert-arrow {
  display: inline-block;
  position: relative;
}
.katex .cd-label-left {
  display: inline-block;
  position: absolute;
  right: calc(50% + 0.3em);
  text-align: left;
}
.katex .cd-label-right {
  display: inline-block;
  position: absolute;
  left: calc(50% + 0.3em);
  text-align: right;
}
.katex-display {
  display: block;
  margin: 1em 0;
  text-align: center;
}
.katex-display > .katex {
  display: block;
  text-align: center;
  white-space: nowrap;
}
.katex-display > .katex > .katex-html {
  display: block;
  position: relative;
}
.katex-display > .katex > .katex-html > .tag {
  position: absolute;
  right: 0;
}
.katex-display.leqno > .katex > .katex-html > .tag {
  left: 0;
  right: auto;
}
.katex-display.fleqn > .katex {
  text-align: left;
  padding-left: 2em;
}
body {
  counter-reset: katexEqnNo mmlEqnNo;
}


/*# sourceURL=webpack://./node_modules/katex/dist/katex.css */
/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL25vZGVfbW9kdWxlcy9rYXRleC9kaXN0L2thdGV4LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvRUFBb0U7QUFDcEU7RUFDRSx3QkFBd0I7RUFDeEIsZ0xBQThKO0VBQzlKLG1CQUFtQjtFQUNuQixrQkFBa0I7QUFDcEI7QUFDQTtFQUNFLGdDQUFnQztFQUNoQyxnTEFBNks7RUFDN0ssaUJBQWlCO0VBQ2pCLGtCQUFrQjtBQUNwQjtBQUNBO0VBQ0UsZ0NBQWdDO0VBQ2hDLGdMQUFzTDtFQUN0TCxtQkFBbUI7RUFDbkIsa0JBQWtCO0FBQ3BCO0FBQ0E7RUFDRSw0QkFBNEI7RUFDNUIsa0xBQWlLO0VBQ2pLLGlCQUFpQjtFQUNqQixrQkFBa0I7QUFDcEI7QUFDQTtFQUNFLDRCQUE0QjtFQUM1QixtTEFBMEs7RUFDMUssbUJBQW1CO0VBQ25CLGtCQUFrQjtBQUNwQjtBQUNBO0VBQ0UseUJBQXlCO0VBQ3pCLG1MQUF3SjtFQUN4SixpQkFBaUI7RUFDakIsa0JBQWtCO0FBQ3BCO0FBQ0E7RUFDRSx5QkFBeUI7RUFDekIsbUxBQTBLO0VBQzFLLGlCQUFpQjtFQUNqQixrQkFBa0I7QUFDcEI7QUFDQTtFQUNFLHlCQUF5QjtFQUN6QixtTEFBOEo7RUFDOUosbUJBQW1CO0VBQ25CLGtCQUFrQjtBQUNwQjtBQUNBO0VBQ0UseUJBQXlCO0VBQ3pCLG1MQUFpSztFQUNqSyxtQkFBbUI7RUFDbkIsa0JBQWtCO0FBQ3BCO0FBQ0E7RUFDRSx5QkFBeUI7RUFDekIsbUxBQTBLO0VBQzFLLGlCQUFpQjtFQUNqQixrQkFBa0I7QUFDcEI7QUFDQTtFQUNFLHlCQUF5QjtFQUN6QixtTEFBOEo7RUFDOUosbUJBQW1CO0VBQ25CLGtCQUFrQjtBQUNwQjtBQUNBO0VBQ0UsOEJBQThCO0VBQzlCLG1MQUF1SztFQUN2SyxpQkFBaUI7RUFDakIsa0JBQWtCO0FBQ3BCO0FBQ0E7RUFDRSw4QkFBOEI7RUFDOUIsbUxBQTZLO0VBQzdLLG1CQUFtQjtFQUNu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 */
  </style>
  <style>
    .markdown-body {
      font-family: -apple-system,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;
      box-sizing: border-box;
      min-width: 200px;
      max-width: 980px;
      margin: 0 auto;
      padding: 45px;
    }

    @media not print {
      .markdown-body {
        padding: 45px;
      }

      @media (max-width: 767px) {
        .markdown-body {
          padding: 15px;
        }
      }
    }

    .hf-container {
      color: #24292e;
      line-height: 1.3;
    }

    .markdown-body .highlight pre,
    .markdown-body pre {
      white-space: pre-wrap;
    }
    .markdown-body table {
      display: table;
    }
    .markdown-body img[data-align="center"] {
      display: block;
      margin: 0 auto;
    }
    .markdown-body img[data-align="right"] {
      display: block;
      margin: 0 0 0 auto;
    }
    .markdown-body li.task-list-item {
      list-style-type: none;
    }
    .markdown-body li > [type=checkbox] {
      margin: 0 0 0 -1.3em;
    }
    .markdown-body input[type="checkbox"] ~ p {
      margin-top: 0;
      display: inline-block;
    }
    .markdown-body ol ol,
    .markdown-body ul ol {
      list-style-type: decimal;
    }
    .markdown-body ol ol ol,
    .markdown-body ol ul ol,
    .markdown-body ul ol ol,
    .markdown-body ul ul ol {
      list-style-type: decimal;
    }
  </style>
  <style>.markdown-body a.footnote-ref {
  text-decoration: none;
}

.footnotes {
  font-size: .85em;
  opacity: .8;
}

.footnotes li[role="doc-endnote"] {
  position: relative;
}

.footnotes .footnote-back {
  position: absolute;
  font-family: initial;
  top: .2em;
  right: 1em;
  text-decoration: none;
}

.inline-math.invalid,
.multiple-math.invalid {
  color: rgb(255, 105, 105);
}

.toc-container {
  width: 100%;
}

.toc-container .toc-title {
  font-weight: 700;
  font-size: 1.2em;
  margin-bottom: 0;
}

.toc-container li,
.toc-container ul,
.toc-container ul li {
  list-style: none !important;
}

.toc-container > ul {
  padding-left: 0;
}

.toc-container ul li span {
  display : flex;
}

.toc-container ul li span a {
  color: inherit;
  text-decoration: none;
}
.toc-container ul li span a:hover {
  color: inherit;
  text-decoration: none;
}

.toc-container ul li span span.dots {
  flex: 1;
  height: 0.65em;
  margin: 0 10px;
  border-bottom: 2px dotted black;
}

/*# sourceURL=webpack://./src/muya/lib/assets/styles/exportStyle.css */
/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9tdXlhL2xpYi9hc3NldHMvc3R5bGVzL2V4cG9ydFN0eWxlLmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLHFCQUFxQjtBQUN2Qjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsb0JBQW9CO0VBQ3BCLFNBQVM7RUFDVCxVQUFVO0VBQ1YscUJBQXFCO0FBQ3ZCOztBQUVBOztFQUVFLHlCQUF5QjtBQUMzQjs7QUFFQTtFQUNFLFdBQVc7QUFDYjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixnQkFBZ0I7RUFDaEIsZ0JBQWdCO0FBQ2xCOztBQUVBOzs7RUFHRSwyQkFBMkI7QUFDN0I7O0FBRUE7RUFDRSxlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsY0FBYztBQUNoQjs7QUFFQTtFQUNFLGNBQWM7RUFDZCxxQkFBcUI7QUFDdkI7QUFDQTtFQUNFLGNBQWM7RUFDZCxxQkFBcUI7QUFDdkI7O0FBRUE7RUFDRSxPQUFPO0VBQ1AsY0FBYztFQUNkLGNBQWM7RUFDZCwrQkFBK0I7QUFDakMiLCJzb3VyY2VSb290IjoiIn0= */</style>
  <style>.markdown-body{}pre.front-matter{display:none!important;}</style>
</head>
<body>
  <article class="markdown-body"><h1 class="atx" id="distributed-optimization-overview-and-matlab-examples">Distributed Optimization: Overview and MATLAB examples</h1>
<h2 class="atx" id="contents">Contents</h2>
<ol>
<li><p><a href="#overview">Overview</a></p>
</li>
<li><p><a href="#simple-example-of-multi-agent-optimization">Simple Example of Multi-Agent Optimization</a></p>
</li>
<li><p><a href="#real-world-application-distributed-resource-allocation-for-electric-vehicle-ev-charging">Real-world Application: Distributed Resource Allocation for Electric Vehicle (EV) Charging</a></p>
<p> 3.1. <a href="#solve-with-dgd">Solve with <strong>Distributed Gradient Descent (DGD)</strong></a></p>
<p> 3.2. <a href="#solve-with-admm">Solve with <strong>Alternating Direction Method of Multipliers (ADMM)</strong></a></p>
<p> 3.3. <a href="#solve-with-pso">Solve with <strong>Particle-Swarm Optimization (PSO)</strong></a></p>
<p> 3.4. <a href="#solve-with-ga">Solve with <strong>Genetic Algorithm (GA)</strong></a></p>
</li>
<li><p><a href="#discussion">Discussion</a></p>
</li>
<li><p><a href="#references">References</a></p>
</li>
</ol>
<h2 class="atx" id="overview">Overview</h2>
<h3 class="atx" id="general-concept">General Concept</h3>
<pre><code class="fenced-code-block language-sql"><span class="token number">1.</span> <span class="token keyword">Global</span> Optimization Problem
   F<span class="token punctuation">(</span>x<span class="token punctuation">,</span> x<span class="token punctuation">,</span> <span class="token punctuation">,</span> x_N<span class="token punctuation">)</span>
    NF<span class="token operator">/</span>

<span class="token number">2.</span> Multi<span class="token operator">-</span>Agent System
    Agent <span class="token number">1</span>
    Agent <span class="token number">2</span>
    
    Agent N

<span class="token number">3.</span> Agent <span class="token number">1</span> Workflow <span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">[</span><span class="token keyword">Local</span> <span class="token keyword">Data</span><span class="token operator">/</span>Knowledge<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token operator">/</span><span class="token punctuation">)</span>
         : p_pref<span class="token punctuation">,</span> 
    <span class="token punctuation">[</span><span class="token keyword">Local</span> Objective<span class="token operator">/</span>Cost<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token operator">/</span><span class="token punctuation">)</span>
         : <span class="token punctuation">(</span>p  p_pref<span class="token punctuation">)</span>  F 
    <span class="token punctuation">[</span><span class="token keyword">Local</span> Computation <span class="token keyword">Engine</span><span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
         : x<span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">,</span> 
         Method Choice: <span class="token punctuation">(</span><span class="token punctuation">)</span>
             a<span class="token punctuation">)</span> Gradient<span class="token operator">-</span>Based <span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token number">1.</span> f<span class="token punctuation">(</span>x<span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span> 
                <span class="token number">2.</span> f 
             b<span class="token punctuation">)</span> Gradient<span class="token operator">-</span>Free <span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token number">1.</span> f<span class="token punctuation">(</span>x<span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span> 
                <span class="token number">2.</span>  <span class="token operator">+</span> 
    <span class="token punctuation">[</span><span class="token keyword">Prepare</span> <span class="token operator">&amp;</span> Send Message<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">[</span>Communication Network<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
         :  <span class="token operator">/</span>  <span class="token operator">/</span>  <span class="token operator">/</span> 
         
    <span class="token punctuation">[</span>Receive Messages<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
         
    <span class="token punctuation">[</span><span class="token keyword">Update</span> State<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
          x<span class="token punctuation">(</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">[</span><span class="token keyword">Iterate</span> kk<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">(</span> kk<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token number">4.</span> Agent <span class="token number">2</span> Workflow
   <span class="token punctuation">(</span>Agent <span class="token number">1</span> <span class="token operator">/</span><span class="token punctuation">)</span>

<span class="token number">5.</span> 

<span class="token number">6.</span> Agent N Workflow
   <span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token number">7.</span> Whats Exchanged <span class="token keyword">on</span> the Network <span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">Current</span> states<span class="token operator">/</span>estimates x_j<span class="token punctuation">(</span>k<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">/</span> x_j<span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">Local</span> gradients f_j <span class="token punctuation">(</span> f_j<span class="token punctuation">)</span>
    Dual variables <span class="token operator">/</span> prices _j <span class="token punctuation">(</span> <span class="token operator">/</span>  _j<span class="token punctuation">)</span>
    Proposed actions <span class="token operator">or</span> bids <span class="token punctuation">(</span><span class="token punctuation">)</span>
    Best<span class="token operator">-</span>known solutions <span class="token punctuation">(</span><span class="token keyword">for</span> meta<span class="token operator">-</span>heuristics<span class="token punctuation">)</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    Aggregated <span class="token keyword">values</span> <span class="token punctuation">(</span>sums<span class="token punctuation">,</span> averages<span class="token punctuation">)</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
<p><strong>:</strong></p>
<ol>
<li><p><strong>Global Optimization Problem (F(x_1, ..., x_N)):</strong></p>
<ul>
<li></li>
<li>/ (: <code>sum f_i(x_i)</code> <code>x_1 = x_2 = ... = x_N</code> )</li>
<li></li>
</ul>
</li>
<li><p><strong>Multi-Agent System:</strong></p>
<ul>
<li> <code>Agent</code> (Agent 1, Agent 2, ..., Agent N) </li>
<li> <code>i</code>  <code>x_i</code> </li>
</ul>
</li>
<li><p><strong>Individual Agent (e.g., Agent 1):</strong></p>
<ul>
<li><strong>Local Data/Knowledge (/):</strong>  (:  <code>p_pref_i</code>)</li>
<li><strong>Local Objective/Cost (/):</strong>  <code>f_i(x_i)</code> </li>
<li><strong>Agent State/Estimate (x_i(k)) (/):</strong>  <code>k</code> </li>
<li><strong>Local Computation Engine ():</strong> <ul>
<li> <code>x_i(k)</code> <code>f_i</code></li>
<li><code>Local Method</code> () </li>
</ul>
</li>
<li><strong>Local Method ():</strong><ul>
<li><strong>Gradient-Based ():</strong><ul>
<li> <code>f_i</code>  <code>f_i(x_i(k))</code> </li>
<li> ()  (: DGDADMM) </li>
<li>:  (DGD)ADMM</li>
</ul>
</li>
<li><strong>Gradient-Free ():</strong><ul>
<li></li>
<li> ()  <code>f_i(x_i(k))</code> </li>
<li> (: PSO/GA)</li>
<li>:  (PSO) (GA) (ACO) ()</li>
</ul>
</li>
</ul>
</li>
<li><strong>Prepare/Send Message ():</strong> </li>
<li><strong>Receive Messages ():</strong> </li>
<li><strong>New State/Estimate (x_i(k+1)) (/):</strong> </li>
<li><strong>Iterate (k -&gt; k+1) ():</strong> 1<em></em></li>
</ul>
</li>
<li><p><strong>Communication Network ():</strong></p>
<ul>
<li></li>
<li><strong>Topology ():</strong>  ()</li>
<li> ()</li>
</ul>
</li>
<li><p><strong>Information Exchanged (What is Communicated) ():</strong></p>
<ul>
<li><ul>
<li><strong>Current states/estimates (x_j(k)) (/):</strong>  (DGD)</li>
<li><strong>Local gradients (f_j) ():</strong> </li>
<li><strong>Dual variables / Prices (_j) ( / ):</strong> ADMM</li>
<li><strong>Proposed actions / Bids ( / ):</strong> </li>
<li><strong>Best-known solutions ():</strong>  (: PSO)</li>
<li><strong>Aggregated values ():</strong>  (: ADMM EV <code>sum(p_i)</code> )</li>
</ul>
</li>
</ul>
</li>
</ol>
<p><strong>Overall Flow ():</strong></p>
<p></p>
<ol>
<li><strong>Initialization ():</strong>  <code>x_i(0)</code> </li>
<li><strong>Iteration <code>k</code> ( <code>k</code>):</strong>
a.  <strong>Local Computation ():</strong>  <code>i</code>  <code>x_i(k)</code>  ( <code>k-1</code> )  () 
b.  <strong>State Update ():</strong>  <code>x_i(k+1)</code> 
c.  <strong>Communication ():</strong>  <code>i</code>  (<code>x_i(k+1)</code> ) </li>
<li><strong>Repeat ():</strong> <code>k</code> 2a</li>
</ol>
<p> <code>x_i</code>  <code>F</code>  () </p>
<h3 class="atx" id="foundations-of-distributed-optimization">Foundations of Distributed Optimization</h3>
<ul>
<li><p><strong>Consensusbased Gradient Methods</strong> </p>
<ul>
<li><p><strong>Distributed Gradient Descent (DGD)</strong> EXTRA, DIGing, NIDS</p>
</li>
<li><p><strong>Gradient Tracking</strong> </p>
</li>
</ul>
</li>
<li><p><strong>Operator Splitting &amp; ADMM</strong> </p>
<ul>
<li><p><strong>Decentralized ADMM</strong>  (Alternating Direction Method of Multipliers) </p>
</li>
<li><p><strong> (asynchronous)</strong> <strong> (eventtriggered)</strong>  <strong> (communicationcompressed)</strong> </p>
</li>
</ul>
</li>
<li><p><strong>PrimalDual &amp; Second-Order Methods</strong> </p>
<ul>
<li><p><strong>PrimalDual Algorithms</strong> ChambollePock </p>
</li>
<li><p><strong>Distributed Newton / Quasi-Newton</strong> </p>
</li>
</ul>
</li>
</ul>
<hr>
<h3 class="atx" id="swarm-intelligence-meta-heuristics">Swarm Intelligence Meta-heuristics</h3>
<ul>
<li><p><strong>Particle Swarm Optimization (PSO) and Variants</strong> </p>
<ul>
<li><p><strong>Quantum-behaved PSO (QPSO)</strong> <strong>Bare-Bones PSO</strong>  <strong>Fully Informed PSO</strong> </p>
</li>
<li><p><strong>Multiswarms</strong> </p>
</li>
</ul>
</li>
<li><p><strong>Ant Colony Optimization (ACO)</strong> </p>
<ul>
<li><p><strong>MaxMin ACO</strong> </p>
</li>
<li><p><strong>Hybrid ACO-PSO</strong>  <strong>ACO-GA</strong> /</p>
</li>
</ul>
</li>
<li><p><strong>Other Bio-inspired Techniques</strong> </p>
<ul>
<li><strong>Artificial Bee Colony (ABC)</strong> <strong>Bacterial Foraging Optimization (BFO)</strong>  <strong>Firefly Algorithm</strong> </li>
</ul>
</li>
</ul>
<hr>
<h3 class="atx" id="swarm--multi-agent-control">Swarm / Multi-Agent Control</h3>
<ul>
<li><p><strong>Consensus &amp; Formation Control</strong> </p>
<ul>
<li><p><strong>Leaderless Consensus</strong> </p>
</li>
<li><p><strong>LeaderFollower</strong> </p>
</li>
</ul>
</li>
<li><p><strong>Distributed Model Predictive Control (DMPC)</strong> </p>
<ul>
<li>ADMM  MPC </li>
</ul>
</li>
<li><p><strong>Event-Triggered &amp; Self-Triggered Control</strong> </p>
<ul>
<li></li>
</ul>
</li>
<li><p><strong>Learning-Enhanced Control</strong> </p>
<ul>
<li><strong>Graph Neural Networks (GNNs)</strong>  <strong>Multi-Agent Reinforcement Learning (MARL)</strong> </li>
</ul>
</li>
</ul>
<hr>
<h3 class="atx" id="key-trends-andamp-open-challenges">Key Trends &amp; Open Challenges</h3>
<ul>
<li><p><strong>Communication Efficiency</strong> : /</p>
</li>
<li><p><strong>Robustness &amp; Privacy</strong> : </p>
</li>
<li><p><strong>Scalability</strong> : </p>
</li>
<li><p><strong>Nonconvex &amp; Time-Varying Objectives</strong> : </p>
</li>
<li><p><strong>Bridging Meta-heuristics &amp; Convex Methods</strong> : </p>
</li>
</ul>
<hr>
<h3 class="atx" id="in-summary">In Summary</h3>
<p><strong>/ADMM</strong><strong></strong><strong></strong><strong></strong><strong></strong></p>
<h2 class="atx" id="simple-example-of-multi-agent-optimization">Simple Example of Multi-Agent Optimization</h2>
<p><strong> (average consensus)</strong>  MATLAB <strong></strong><strong></strong></p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:1em;vertical-align:-0.25em;" class="strut"></span><span style="margin-right:0.10764em;" class="mord mathnormal">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span style="margin-right:0.2778em;" class="mspace"></span><span style="margin-right:0.2778em;" class="mspace"></span><span class="mrel">=</span><span style="margin-right:0.2778em;" class="mspace"></span><span style="margin-right:0.2778em;" class="mspace"></span></span><span class="base"><span style="height:3.106em;vertical-align:-1.2777em;" class="strut"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:1.8283em;" class="vlist"><span style="top:-1.8723em;margin-left:0em;"><span style="height:3.05em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span style="height:3.05em;" class="pstrut"></span><span><span class="mop op-symbol large-op"></span></span></span><span style="top:-4.3em;margin-left:0em;"><span style="height:3.05em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span style="margin-right:0.10903em;" class="mord mathnormal mtight">N</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span style="height:1.2777em;" class="vlist"><span></span></span></span></span></span><span style="margin-right:0.1667em;" class="mspace"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:0.8451em;" class="vlist"><span style="top:-2.655em;"><span style="height:3em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span style="height:3em;" class="pstrut"></span><span style="border-bottom-width:0.04em;" class="frac-line"></span></span><span style="top:-3.394em;"><span style="height:3em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span style="height:0.345em;" class="vlist"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen"><span class="delimsizing size1">(</span></span><span class="mord mathnormal">x</span><span style="margin-right:0.2222em;" class="mspace"></span><span class="mbin"></span><span style="margin-right:0.2222em;" class="mspace"></span></span><span class="base"><span style="height:1.404em;vertical-align:-0.35em;" class="strut"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:0.3117em;" class="vlist"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span style="height:0.15em;" class="vlist"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose"><span class="delimsizing size1">)</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span style="height:1.054em;" class="vlist"><span style="top:-3.3029em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span><p></p>
<hr>
<h3 class="atx" id="problem-formulation">Problem Formulation</h3>
<p>1<strong> (average consensus)</strong> <span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:0.6833em;" class="strut"></span><span style="margin-right:0.10903em;" class="mord mathnormal">N</span></span></span></span>  <a href="https://www.diva-portal.org/smash/get/diva2%3A453798/FULLTEXT01.pdf">Diva Portal</a></p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:1em;vertical-align:-0.25em;" class="strut"></span><span style="margin-right:0.10764em;" class="mord mathnormal">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span style="margin-right:0.2778em;" class="mspace"></span><span style="margin-right:0.2778em;" class="mspace"></span><span class="mrel">=</span><span style="margin-right:0.2778em;" class="mspace"></span><span style="margin-right:0.2778em;" class="mspace"></span></span><span class="base"><span style="height:3.106em;vertical-align:-1.2777em;" class="strut"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:1.8283em;" class="vlist"><span style="top:-1.8723em;margin-left:0em;"><span style="height:3.05em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span style="height:3.05em;" class="pstrut"></span><span><span class="mop op-symbol large-op"></span></span></span><span style="top:-4.3em;margin-left:0em;"><span style="height:3.05em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span style="margin-right:0.10903em;" class="mord mathnormal mtight">N</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span style="height:1.2777em;" class="vlist"><span></span></span></span></span></span><span style="margin-right:0.1667em;" class="mspace"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:1.3214em;" class="vlist"><span style="top:-2.314em;"><span style="height:3em;" class="pstrut"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span style="height:3em;" class="pstrut"></span><span style="border-bottom-width:0.04em;" class="frac-line"></span></span><span style="top:-3.677em;"><span style="height:3em;" class="pstrut"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span style="height:0.686em;" class="vlist"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span style="margin-right:0.1667em;" class="mspace"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span style="margin-right:0.2222em;" class="mspace"></span><span class="mbin"></span><span style="margin-right:0.2222em;" class="mspace"></span></span><span class="base"><span style="height:1.1141em;vertical-align:-0.25em;" class="strut"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:0.3117em;" class="vlist"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span style="height:0.15em;" class="vlist"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span style="height:0.8641em;" class="vlist"><span style="top:-3.113em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mpunct">,</span></span></span></span></span><p> <span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:1em;vertical-align:-0.25em;" class="strut"></span><span class="mopen">{</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:0.3117em;" class="vlist"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span style="height:0.15em;" class="vlist"><span></span></span></span></span></span></span><span class="mclose">}</span></span></span></span>  <a href="https://www.researchgate.net/publication/224371202_Distributed_Subgradient_Methods_for_Multi-Agent_Optimization">ResearchGate</a>
<strong> (Distributed Gradient Descent - DGD)</strong> </p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:1.3217em;vertical-align:-0.2769em;" class="strut"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:1.0448em;" class="vlist"><span style="top:-2.4231em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span style="margin-right:0.03148em;" class="mord mathnormal mtight">k</span><span class="mbin mtight">+</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span style="height:0.2769em;" class="vlist"><span></span></span></span></span></span></span><span style="margin-right:0.2778em;" class="mspace"></span><span style="margin-right:0.2778em;" class="mspace"></span><span class="mrel">=</span><span style="margin-right:0.2778em;" class="mspace"></span><span style="margin-right:0.2778em;" class="mspace"></span></span><span class="base"><span style="height:3.2421em;vertical-align:-1.4138em;" class="strut"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:1.8283em;" class="vlist"><span style="top:-1.8723em;margin-left:0em;"><span style="height:3.05em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span style="margin-right:0.05724em;" class="mord mathnormal mtight">j</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span style="height:3.05em;" class="pstrut"></span><span><span class="mop op-symbol large-op"></span></span></span><span style="top:-4.3em;margin-left:0em;"><span style="height:3.05em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span style="margin-right:0.10903em;" class="mord mathnormal mtight">N</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span style="height:1.4138em;" class="vlist"><span></span></span></span></span></span><span style="margin-right:0.1667em;" class="mspace"></span><span class="mord"><span style="margin-right:0.13889em;" class="mord mathnormal">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:0.3117em;" class="vlist"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span style="margin-right:0.05724em;" class="mord mathnormal mtight">ij</span></span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span style="height:0.2861em;" class="vlist"><span></span></span></span></span></span></span><span style="margin-right:0.1667em;" class="mspace"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:1.0448em;" class="vlist"><span style="top:-2.4231em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span style="margin-right:0.05724em;" class="mord mathnormal mtight">j</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span style="margin-right:0.03148em;" class="mord mathnormal mtight">k</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span style="height:0.413em;" class="vlist"><span></span></span></span></span></span></span><span style="margin-right:0.2778em;" class="mspace"></span><span style="margin-right:0.2222em;" class="mspace"></span><span class="mbin"></span><span style="margin-right:0.2778em;" class="mspace"></span><span style="margin-right:0.2222em;" class="mspace"></span></span><span class="base"><span style="height:1.3948em;vertical-align:-0.35em;" class="strut"></span><span style="margin-right:0.0037em;" class="mord mathnormal"></span><span style="margin-right:0.2778em;" class="mspace"></span><span class="mopen"><span class="delimsizing size1">(</span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:1.0448em;" class="vlist"><span style="top:-2.4231em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span style="margin-right:0.03148em;" class="mord mathnormal mtight">k</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span style="height:0.2769em;" class="vlist"><span></span></span></span></span></span></span><span style="margin-right:0.2222em;" class="mspace"></span><span class="mbin"></span><span style="margin-right:0.2222em;" class="mspace"></span></span><span class="base"><span style="height:1.2em;vertical-align:-0.35em;" class="strut"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:0.3117em;" class="vlist"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span style="height:0.15em;" class="vlist"><span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing size1">)</span></span><span class="mpunct">,</span></span></span></span></span><p><span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:0.6833em;" class="strut"></span><span style="margin-right:0.13889em;" class="mord mathnormal">W</span></span></span></span> <span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:0.5782em;vertical-align:-0.0391em;" class="strut"></span><span style="margin-right:0.0037em;" class="mord mathnormal"></span><span style="margin-right:0.2778em;" class="mspace"></span><span class="mrel">&gt;</span><span style="margin-right:0.2778em;" class="mspace"></span></span><span class="base"><span style="height:0.6444em;" class="strut"></span><span class="mord">0</span></span></span></span>  <a href="https://www.scirp.org/%28S%28czeh2tfqw2orz553k1w0r45%29%29/reference/referencespapers?referenceid=3220708">SCIRP</a> <a href="https://web.mit.edu/Asuman/Desktop/asuman/www/documents/distributed-journal-final.pdf">Massachusetts Institute of Technology</a>
<strong>Consensus ADMM</strong>  <a href="https://web.stanford.edu/~boyd/papers/pdf/admm_distr_stats.pdf">Stanford University</a><strong>Consensus ALADIN</strong>  <a href="https://arxiv.org/pdf/2306.05662">arXiv</a><strong>Consensus Equilibrium</strong>  <a href="https://engineering.purdue.edu/~bouman/Plug-and-Play/webdocs/SIIMS01.pdf">Purdue Engineering</a><strong> (eventtriggered)</strong>  <a href="https://www.sciencedirect.com/science/article/abs/pii/S0893608023006925">ScienceDirect</a><strong> (multilayer consensus)</strong> <a href="https://www.sciencedirect.com/science/article/abs/pii/S0306261921007923">ScienceDirect</a> </p>
<hr>
<h3 class="atx" id="matlab-prototype-script">MATLAB Prototype Script</h3>
<pre><code class="fenced-code-block language-matlab"><span class="token comment">% Distributed Average Consensus via DGD</span>
<span class="token comment">%-------------------------------------------------------</span>
<span class="token comment">% Number of agents</span>
<span class="token comment">% </span>
N <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>

<span class="token comment">% Local data: each agent i holds value a(i)</span>
<span class="token comment">% : ia(i)</span>
a <span class="token operator">=</span> <span class="token function">randn</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">5</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span>    <span class="token comment">% e.g. randomly around 10 (: 10)</span>

<span class="token comment">% Communication graph: here, a ring or complete graph</span>
<span class="token comment">% For simplicity, use complete graph weights (equal averaging)</span>
<span class="token comment">% : </span>
<span class="token comment">% </span>
W <span class="token operator">=</span> <span class="token function">ones</span><span class="token punctuation">(</span>N<span class="token punctuation">)</span> <span class="token operator">/</span> N<span class="token punctuation">;</span>

<span class="token comment">% Stepsize (small constant for stability)</span>
<span class="token comment">% </span>
alpha <span class="token operator">=</span> <span class="token number">0.1</span><span class="token punctuation">;</span>

<span class="token comment">% Initialization: each agent starts from zero</span>
<span class="token comment">% : </span>
x <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% Number of iterations</span>
<span class="token comment">% </span>
T <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>

<span class="token comment">% Store history for plotting</span>
<span class="token comment">% </span>
Xhist <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span> T<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">Xhist</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>

<span class="token keyword">for</span> k <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">:</span>T
    <span class="token comment">% Local consensus + gradient step</span>
    <span class="token comment">%  + </span>
    x <span class="token operator">=</span> W <span class="token operator">*</span> x <span class="token operator">-</span> alpha <span class="token operator">*</span> <span class="token punctuation">(</span>x <span class="token operator">-</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">% Save</span>
    <span class="token comment">% </span>
    <span class="token function">Xhist</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>
<span class="token keyword">end</span>

<span class="token comment">% True consensus value</span>
<span class="token comment">% </span>
x_star <span class="token operator">=</span> <span class="token function">mean</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% Plot convergence of each agent</span>
<span class="token comment">% </span>
figure<span class="token punctuation">;</span>
<span class="token function">plot</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">:</span>T<span class="token punctuation">,</span> Xhist<span class="token operator">'</span><span class="token punctuation">,</span> <span class="token string">'LineWidth'</span><span class="token punctuation">,</span> <span class="token number">1.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
hold on<span class="token punctuation">;</span>
<span class="token function">yline</span><span class="token punctuation">(</span>x_star<span class="token punctuation">,</span> <span class="token string">'k--'</span><span class="token punctuation">,</span> <span class="token string">'LineWidth'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">xlabel</span><span class="token punctuation">(</span><span class="token string">'Iteration k'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">ylabel</span><span class="token punctuation">(</span><span class="token string">'x_i^{(k)}'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">title</span><span class="token punctuation">(</span><span class="token string">'Distributed Gradient Descent: Average Consensus'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
legendStrings <span class="token operator">=</span> <span class="token function">arrayfun</span><span class="token punctuation">(</span><span class="token operator">@</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span> <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'Agent %d'</span><span class="token punctuation">,</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">:</span>N<span class="token punctuation">,</span> <span class="token string">'UniformOutput'</span><span class="token punctuation">,</span> false<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">legend</span><span class="token punctuation">(</span><span class="token punctuation">[</span>legendStrings<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'Optimal Mean'</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'Location'</span><span class="token punctuation">,</span><span class="token string">'best'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
grid on<span class="token punctuation">;</span></code></pre>
<hr>
<h3 class="atx" id="how-it-works">How It Works</h3>
<ol start="2">
<li><strong>Initialization</strong> </li>
</ol>
<p> <span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:0.6595em;" class="strut"></span><span class="mord mathnormal">i</span></span></span></span>  <span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:1.3217em;vertical-align:-0.2769em;" class="strut"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:1.0448em;" class="vlist"><span style="top:-2.4231em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">0</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span style="height:0.2769em;" class="vlist"><span></span></span></span></span></span></span><span style="margin-right:0.2778em;" class="mspace"></span><span class="mrel">=</span><span style="margin-right:0.2778em;" class="mspace"></span></span><span class="base"><span style="height:0.6444em;" class="strut"></span><span class="mord">0</span></span></span></span>  <span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:0.5806em;vertical-align:-0.15em;" class="strut"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:0.3117em;" class="vlist"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span style="height:0.15em;" class="vlist"><span></span></span></span></span></span></span></span></span></span> </p>
<ol start="4">
<li><strong>Consensus Step</strong> </li>
</ol>
<p> <span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:0.6833em;" class="strut"></span><span style="margin-right:0.13889em;" class="mord mathnormal">W</span></span></span></span> <strong> (complete graph)</strong> <span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:0.9694em;vertical-align:-0.2861em;" class="strut"></span><span class="mord"><span style="margin-right:0.13889em;" class="mord mathnormal">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:0.3117em;" class="vlist"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span style="margin-right:0.05724em;" class="mord mathnormal mtight">ij</span></span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span style="height:0.2861em;" class="vlist"><span></span></span></span></span></span></span><span style="margin-right:0.2778em;" class="mspace"></span><span class="mrel">=</span><span style="margin-right:0.2778em;" class="mspace"></span></span><span class="base"><span style="height:1em;vertical-align:-0.25em;" class="strut"></span><span class="mord">1/</span><span style="margin-right:0.10903em;" class="mord mathnormal">N</span></span></span></span> </p>
<ol start="6">
<li><strong>Local Gradient Step</strong> </li>
</ol>
<p> <span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:0.5806em;vertical-align:-0.15em;" class="strut"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:0.3117em;" class="vlist"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span style="height:0.15em;" class="vlist"><span></span></span></span></span></span></span></span></span></span>  <span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:1em;vertical-align:-0.25em;" class="strut"></span><span class="mord"></span><span style="margin-right:0.0037em;" class="mord mathnormal"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:0.3117em;" class="vlist"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span style="height:0.15em;" class="vlist"><span></span></span></span></span></span></span><span style="margin-right:0.2222em;" class="mspace"></span><span class="mbin"></span><span style="margin-right:0.2222em;" class="mspace"></span></span><span class="base"><span style="height:1em;vertical-align:-0.25em;" class="strut"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:0.3117em;" class="vlist"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span style="height:0.15em;" class="vlist"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> </p>
<ol start="8">
<li><strong>Convergence</strong> </li>
</ol>
<p><span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:0.4306em;" class="strut"></span><span style="margin-right:0.0037em;" class="mord mathnormal"></span></span></span></span>  <span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:0.6833em;" class="strut"></span><span style="margin-right:0.13889em;" class="mord mathnormal">W</span></span></span></span>  <span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:1.3217em;vertical-align:-0.2769em;" class="strut"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:1.0448em;" class="vlist"><span style="top:-2.4231em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span style="margin-right:0.03148em;" class="mord mathnormal mtight">k</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span style="height:0.2769em;" class="vlist"><span></span></span></span></span></span></span></span></span></span> </p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:0.6306em;" class="strut"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span style="height:0.6306em;" class="vlist"><span style="top:-3em;"><span style="height:3em;" class="pstrut"></span><span class="mord"><span class="mord mathnormal">a</span></span></span><span style="top:-3.5506em;"><span style="height:3em;" class="pstrut"></span><span style="border-bottom-width:0.04em;" class="overline-line"></span></span></span></span></span></span><span style="margin-right:0.2778em;" class="mspace"></span><span class="mrel">=</span><span style="margin-right:0.2778em;" class="mspace"></span></span><span class="base"><span style="height:2.3277em;vertical-align:-1.2777em;" class="strut"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:0.8451em;" class="vlist"><span style="top:-2.655em;"><span style="height:3em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span style="margin-right:0.10903em;" class="mord mathnormal mtight">N</span></span></span></span><span style="top:-3.23em;"><span style="height:3em;" class="pstrut"></span><span style="border-bottom-width:0.04em;" class="frac-line"></span></span><span style="top:-3.394em;"><span style="height:3em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span style="height:0.345em;" class="vlist"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span style="margin-right:0.1667em;" class="mspace"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:1.05em;" class="vlist"><span style="top:-1.8723em;margin-left:0em;"><span style="height:3.05em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.05em;"><span style="height:3.05em;" class="pstrut"></span><span><span class="mop op-symbol large-op"></span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span style="height:1.2777em;" class="vlist"><span></span></span></span></span></span><span style="margin-right:0.1667em;" class="mspace"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:0.3117em;" class="vlist"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span style="height:0.15em;" class="vlist"><span></span></span></span></span></span></span></span></span></span></span><p></p>
<hr>
<h2 class="atx" id="real-world-application-distributed-resource-allocation-for-electric-vehicle-ev-charging">Real-world Application: Distributed Resource Allocation for Electric Vehicle (EV) Charging</h2>
<p><strong>Scenario:</strong>
<code>N</code>  (EV)  <code>P_total</code> EV <code>i</code>  <code>p_pref_i</code>  <code>P_total</code> </p>
<p><strong>Optimization Goal:</strong>
EV <code>p_i</code> </p>
<ol>
<li> <code>P_total</code> : <code>sum(p_i) = P_total</code>()</li>
<li>
Minimize <code>sum_i (p_i - p_pref_i)^2</code>
Subject to <code>sum_i p_i = P_total</code></li>
</ol>
<p><strong>Distributed Solution Approach:</strong>

<code>p_i_optimal = p_pref_i + (P_total - sum(p_pref_j)) / N</code></p>
<p> <code>(P_total - sum(p_pref_j)) / N</code>  <code>P_total/N - mean(p_pref_j)</code> 
<code>p_i_optimal = p_pref_i + P_total/N - mean(p_pref)</code> </p>
<p></p>
<ol>
<li>EV <code>p_pref_i</code>  <code>P_total</code>  <code>N</code> </li>
<li>EV <code>mean(p_pref)</code>  (DGD) </li>
<li>EV <code>i</code>  <code>mean(p_pref)</code>  <code>z_i</code> : <code>p_i = p_pref_i + P_total/N - z_i</code></li>
</ol>
<pre><code class="fenced-code-block language-matlab">Preferred charging <span class="token function">rates</span> <span class="token punctuation">(</span>kW<span class="token punctuation">)</span><span class="token operator">:</span>
    <span class="token number">6.3362</span>    <span class="token number">8.7626</span>    <span class="token number">3.0009</span>    <span class="token number">5.4187</span>    <span class="token number">4.1740</span>    <span class="token number">3.7387</span>    <span class="token number">4.4901</span>    <span class="token number">5.7645</span>    <span class="token number">6.1741</span>    <span class="token number">7.3105</span>

Sum of preferred rates<span class="token operator">:</span> <span class="token number">55.17</span> kW
Total available power<span class="token operator">:</span> <span class="token number">50.00</span> kW</code></pre>
<h3 class="atx" id="solve-with-dgd">Solve with DGD</h3>
<p> DGD  <code>mean(p_pref)</code> </p>
<pre><code class="fenced-code-block language-matlab"><span class="token comment">% Distributed Resource Allocation for EV Charging via DGD</span>
<span class="token comment">%-----------------------------------------------------------------</span>

<span class="token comment">% Number of EVs (agents)</span>
<span class="token comment">% EV</span>
N <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>

<span class="token comment">% Total Power Capacity of the charging station (e.g., kW)</span>
<span class="token comment">% kW</span>
P_total <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span> 

<span class="token comment">% Local data: Each EV i has a preferred charging rate p_pref(i)</span>
<span class="token comment">% Let's say preferred rates are between 3 kW and 11 kW (typical Level 2 charging)</span>
<span class="token comment">% EV i  p_pref(i) </span>
<span class="token comment">% 3kW11kW2</span>
p_pref <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">8</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">% Randomly between 3 and 11 kW (311kW)</span>

<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Preferred charging rates (kW):\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">disp</span><span class="token punctuation">(</span>p_pref<span class="token operator">'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Sum of preferred rates: %.2f kW\n'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Total available power: %.2f kW\n\n'</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% Communication graph: Ring topology for a slightly more realistic scenario</span>
<span class="token comment">% than complete graph, but still simple.</span>
<span class="token comment">% For a ring, each agent communicates with two neighbors.</span>
<span class="token comment">% </span>
<span class="token comment">% 2</span>
W <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span>N<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token number">i</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">:</span>N
    <span class="token function">W</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">,</span><span class="token number">i</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">% Weight for self ()</span>
    <span class="token function">W</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">,</span> <span class="token function">mod</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> N<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">% Weight for previous neighbor (with wrap-around) ()</span>
    <span class="token function">W</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">,</span> <span class="token function">mod</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">,</span> N<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">;</span>     <span class="token comment">% Weight for next neighbor (with wrap-around) ()</span>
<span class="token keyword">end</span>
<span class="token comment">% A simple check for doubly stochastic (not strictly required for DGD convergence to mean</span>
<span class="token comment">% for this specific formulation, but good practice for consensus)</span>
<span class="token comment">% For DGD to average a_i, W must be doubly stochastic.</span>
<span class="token comment">% The DGD update x = Wx - alpha*(x-a) can be x_new(i) = x_old(i) + sum_j W(i,j)*(x_old(j)-x_old(i)) - alpha*(x_old(i)-a(i))</span>
<span class="token comment">% Or, as used: x_i^{k+1} = sum_j W_ij x_j^k - alpha * (x_i^k - a_i)</span>
<span class="token comment">% If W is column stochastic (sum(W(:,j))=1), Wx averages. If W is row stochastic (sum(W(i,:))=1), Wx convex combs.</span>
<span class="token comment">% For this problem, we need W to be such that W^k converges to (1/N)*ones(N,N) for consensus.</span>
<span class="token comment">% Let's use a common Metropolis-Hastings rule for W if graph is not complete.</span>
<span class="token comment">% Or, for simplicity and to keep it close to original, use complete graph avg.</span>
<span class="token comment">% DGD</span>
<span class="token comment">% DGDa_iW</span>
<span class="token comment">% DGD x = Wx - alpha*(x-a)  x_new(i) = x_old(i) + sum_j W(i,j)*(x_old(j)-x_old(i)) - alpha*(x_old(i)-a(i)) </span>
<span class="token comment">% : x_i^{k+1} = sum_j W_ij x_j^k - alpha * (x_i^k - a_i)</span>
<span class="token comment">% Wsum(W(:,j))=1WxWsum(W(i,:))=1Wx</span>
<span class="token comment">% W^k(1/N)*ones(N,N)W</span>
<span class="token comment">% Metropolis-HastingsW</span>
<span class="token comment">% </span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Using simplified complete graph weights for W (equal averaging).\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
W <span class="token operator">=</span> <span class="token function">ones</span><span class="token punctuation">(</span>N<span class="token punctuation">)</span> <span class="token operator">/</span> N<span class="token punctuation">;</span> 

<span class="token comment">% Stepsize for DGD (small constant for stability)</span>
<span class="token comment">% DGD</span>
alpha <span class="token operator">=</span> <span class="token number">0.2</span><span class="token punctuation">;</span> 

<span class="token comment">% Initialization: Each agent's estimate of mean(p_pref) starts from zero</span>
<span class="token comment">% (or could start from its own p_pref_i)</span>
<span class="token comment">% mean(p_pref)</span>
<span class="token comment">% p_pref_i</span>
z <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">% z_i will be agent i's estimate of mean(p_pref) (z_iimean(p_pref))</span>

<span class="token comment">% Number of iterations for consensus</span>
<span class="token comment">% </span>
T <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>

<span class="token comment">% Store history for plotting convergence of z</span>
<span class="token comment">% z</span>
Zhist <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span> T<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">Zhist</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> z<span class="token punctuation">;</span>

<span class="token comment">% --- DGD for estimating mean(p_pref) ---</span>
<span class="token comment">% --- mean(p_pref)DGD ---</span>
<span class="token keyword">for</span> k <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">:</span>T
    <span class="token comment">% Each agent updates its estimate z_i based on neighbors' estimates</span>
    <span class="token comment">% and its own preferred rate p_pref_i.</span>
    <span class="token comment">% The DGD update: z_new = W * z_old - alpha * (z_old - p_pref)</span>
    <span class="token comment">% Here, 'a' from the original example is 'p_pref'.</span>
    <span class="token comment">% 'x' from the original example is 'z'.</span>
    <span class="token comment">% p_pref_iz_i</span>
    <span class="token comment">% DGDz_new = W * z_old - alpha * (z_old - p_pref)</span>
    <span class="token comment">% 'a''p_pref'</span>
    <span class="token comment">% 'x''z'</span>
    z <span class="token operator">=</span> W <span class="token operator">*</span> z <span class="token operator">-</span> alpha <span class="token operator">*</span> <span class="token punctuation">(</span>z <span class="token operator">-</span> p_pref<span class="token punctuation">)</span><span class="token punctuation">;</span> 

    <span class="token function">Zhist</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> z<span class="token punctuation">;</span>
<span class="token keyword">end</span>

<span class="token comment">% True mean of preferred rates</span>
<span class="token comment">% </span>
mean_p_pref_true <span class="token operator">=</span> <span class="token function">mean</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% Plot convergence of z_i to mean(p_pref)</span>
<span class="token comment">% z_imean(p_pref)</span>
figure<span class="token punctuation">;</span>
<span class="token function">plot</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">:</span>T<span class="token punctuation">,</span> Zhist<span class="token operator">'</span><span class="token punctuation">,</span> <span class="token string">'LineWidth'</span><span class="token punctuation">,</span> <span class="token number">1.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
hold on<span class="token punctuation">;</span>
<span class="token function">yline</span><span class="token punctuation">(</span>mean_p_pref_true<span class="token punctuation">,</span> <span class="token string">'k--'</span><span class="token punctuation">,</span> <span class="token string">'LineWidth'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">xlabel</span><span class="token punctuation">(</span><span class="token string">'Iteration k'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">ylabel</span><span class="token punctuation">(</span><span class="token string">'z_i^{(k)} (Estimate of mean p_{pref})'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">title</span><span class="token punctuation">(</span><span class="token string">'DGD: Estimating Average Preferred Charging Rate'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
legendStrings <span class="token operator">=</span> <span class="token function">arrayfun</span><span class="token punctuation">(</span><span class="token operator">@</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span> <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'EV %d'</span><span class="token punctuation">,</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">:</span>N<span class="token punctuation">,</span> <span class="token string">'UniformOutput'</span><span class="token punctuation">,</span> false<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">legend</span><span class="token punctuation">(</span><span class="token punctuation">[</span>legendStrings<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'True Mean p_{pref}'</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'Location'</span><span class="token punctuation">,</span><span class="token string">'best'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
grid on<span class="token punctuation">;</span>

<span class="token comment">% --- Calculate final allocated power ---</span>
<span class="token comment">% ---  ---</span>
<span class="token comment">% Each EV uses its final estimate of mean(p_pref) (which is z(:,T+1))</span>
<span class="token comment">% If consensus is perfect, all z_i(T+1) are close to mean_p_pref_true.</span>
<span class="token comment">% EVmean(p_pref)z(:,T+1)</span>
<span class="token comment">% z_i(T+1)mean_p_pref_true</span>
estimated_mean_p_pref <span class="token operator">=</span> <span class="token function">Zhist</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span> T<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">% Each EV has its own estimate (EV)</span>

<span class="token comment">% Optimal allocation formula: p_i = p_pref_i + P_total/N - estimated_mean_p_pref_i</span>
<span class="token comment">% p_i = p_pref_i + P_total/N - estimated_mean_p_pref_i</span>
p_allocated <span class="token operator">=</span> p_pref <span class="token operator">+</span> <span class="token punctuation">(</span>P_total<span class="token operator">/</span>N<span class="token punctuation">)</span> <span class="token operator">-</span> estimated_mean_p_pref<span class="token punctuation">;</span>

<span class="token comment">% Ensure non-negativity (cannot draw negative power in this simple model)</span>
<span class="token comment">% and also that no EV exceeds a maximum possible rate (e.g., its p_pref_i or a physical limit like 11kW)</span>
<span class="token comment">% For simplicity, we'll just do non-negativity.</span>
<span class="token comment">% More advanced: if an EV hits 0, its demand is removed and power redistributed among others.</span>
<span class="token comment">% </span>
<span class="token comment">% EVp_pref_i11kW</span>
<span class="token comment">% </span>
<span class="token comment">% EV0EV</span>
p_allocated <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> p_allocated<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% Due to max(0,.) constraint, sum(p_allocated) might not be P_total.</span>
<span class="token comment">% A simple proportional rescaling if total allocated power is not P_total.</span>
<span class="token comment">% This is a heuristic step after the distributed calculation.</span>
<span class="token comment">% A fully distributed scheme for exact sum constraint with bounds is more complex (e.g., using ADMM).</span>
<span class="token comment">% max(0,.)sum(p_allocated)P_total</span>
<span class="token comment">% P_total</span>
<span class="token comment">% </span>
<span class="token comment">% ADMM</span>
current_sum_p_allocated <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_allocated<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> current_sum_p_allocated <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token function">abs</span><span class="token punctuation">(</span>current_sum_p_allocated <span class="token operator">-</span> P_total<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">1e-3</span> <span class="token comment">% Add tolerance ()</span>
    <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Sum of p_allocated before scaling: %.2f kW. Rescaling to match P_total = %.2f kW.\n'</span><span class="token punctuation">,</span> current_sum_p_allocated<span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>
    p_allocated <span class="token operator">=</span> p_allocated <span class="token operator">*</span> <span class="token punctuation">(</span>P_total <span class="token operator">/</span> current_sum_p_allocated<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">% Re-check for max(0,...) or other individual constraints if scaling pushed values out of bounds.</span>
    <span class="token comment">% For this example, we'll assume this simple scaling is sufficient.</span>
    <span class="token comment">% max(0,...)</span>
    <span class="token comment">% </span>
    p_allocated <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> p_allocated<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">% Ensure non-negativity again after scaling ()</span>
    <span class="token comment">% If scaling makes sum too low because some hit zero, another pass might be needed.</span>
    <span class="token comment">% For simplicity, we stop here.</span>
    <span class="token comment">% </span>
    <span class="token comment">% </span>
<span class="token keyword">else</span>
    <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Sum of p_allocated after max(0,.): %.2f kW. Close enough to P_total = %.2f kW.\n'</span><span class="token punctuation">,</span> current_sum_p_allocated<span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>


<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'\n--- Final Allocations ---\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">disp</span><span class="token punctuation">(</span><span class="token string">'EV # | Preferred (kW) | Allocated (kW) | Estimate of Mean Pref (kW)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token number">i</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span>N
    <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'%4d | %14.2f | %14.2f | %20.2f\n'</span><span class="token punctuation">,</span> <span class="token number">i</span><span class="token punctuation">,</span> <span class="token function">p_pref</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">p_allocated</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">estimated_mean_p_pref</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'--------------------------------------------------------------------\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Sum of Preferred Rates: %.2f kW\n'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Sum of Allocated Rates: %.2f kW (Target: %.2f kW)\n'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_allocated<span class="token punctuation">)</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% Analytical optimal solution (assuming perfect knowledge, no non-negativity initially)</span>
<span class="token comment">% </span>
p_optimal_analytical_no_bounds <span class="token operator">=</span> p_pref <span class="token operator">+</span> <span class="token punctuation">(</span>P_total <span class="token operator">-</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> N<span class="token punctuation">;</span>
<span class="token comment">% This analytical solution doesn't enforce p_i &gt;= 0.</span>
<span class="token comment">% True constrained optimum is harder to write in one line if bounds are active.</span>
<span class="token comment">% p_i &gt;= 0</span>
<span class="token comment">% </span>

<span class="token comment">% Plot results</span>
<span class="token comment">% </span>
figure<span class="token punctuation">;</span>
bar_data <span class="token operator">=</span> <span class="token punctuation">[</span>p_pref<span class="token punctuation">,</span> p_allocated<span class="token punctuation">,</span> p_optimal_analytical_no_bounds<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">% Cap negative analytical results at 0 for fairer comparison in plot</span>
<span class="token comment">% 0</span>
<span class="token function">bar_data</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token function">bar_data</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

b <span class="token operator">=</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span>N<span class="token punctuation">,</span> bar_data<span class="token punctuation">,</span> <span class="token string">'grouped'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">xlabel</span><span class="token punctuation">(</span><span class="token string">'Electric Vehicle (Agent)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">ylabel</span><span class="token punctuation">(</span><span class="token string">'Charging Rate (kW)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">title</span><span class="token punctuation">(</span><span class="token string">'Preferred vs. Allocated Charging Rates'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">xticks</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span>N<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">legend</span><span class="token punctuation">(</span><span class="token string">'Preferred Rate'</span><span class="token punctuation">,</span> <span class="token string">'DGD Allocated Rate'</span><span class="token punctuation">,</span> <span class="token string">'Analytical Optimal (w/o bounds, then &gt;=0)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
grid on<span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span> <span class="token operator">&gt;</span> P_total
    <span class="token function">annotation</span><span class="token punctuation">(</span><span class="token string">'textbox'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0.6</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'String'</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>
        <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'Demand (%.1fkW) &gt; Supply (%.1fkW)\nRates were scaled down.'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>
        <span class="token string">'FitBoxToText'</span><span class="token punctuation">,</span><span class="token string">'on'</span><span class="token punctuation">,</span> <span class="token string">'BackgroundColor'</span><span class="token punctuation">,</span> <span class="token string">'yellow'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">elseif</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span> <span class="token operator">&lt;</span> P_total
    <span class="token function">annotation</span><span class="token punctuation">(</span><span class="token string">'textbox'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0.6</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'String'</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>
        <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'Demand (%.1fkW) &lt; Supply (%.1fkW)\nRates were scaled up.'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>
        <span class="token string">'FitBoxToText'</span><span class="token punctuation">,</span><span class="token string">'on'</span><span class="token punctuation">,</span> <span class="token string">'BackgroundColor'</span><span class="token punctuation">,</span> <span class="token string">'cyan'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">else</span>
    <span class="token function">annotation</span><span class="token punctuation">(</span><span class="token string">'textbox'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0.6</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'String'</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>
        <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'Demand (%.1fkW) == Supply (%.1fkW)'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>
        <span class="token string">'FitBoxToText'</span><span class="token punctuation">,</span><span class="token string">'on'</span><span class="token punctuation">,</span> <span class="token string">'BackgroundColor'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span></code></pre>
<p><strong>Explanation of Changes:</strong></p>
<ol>
<li><strong>Problem Context:</strong>  <code>a(i)</code>  <code>p_pref(i)</code> (EV) <code>P_total</code> () </li>
<li><strong>Optimization Goal:</strong>  (EV) <code>sum p_i = P_total</code>  <code>sum (p_i - p_pref_i)^2</code>  <code>p_i</code> </li>
<li><strong>Distributed Computation:</strong><ul>
<li>DGD <code>mean(p_pref)</code>  <code>i</code>  <code>z_i</code>  <code>mean(p_pref)</code> </li>
<li>DGD <code>z = W * z - alpha * (z - p_pref)</code>  <code>x = W * x - alpha * (x - a)</code> </li>
</ul>
</li>
<li><strong>Final Allocation:</strong>  (<code>z_i</code> )  <code>mean(p_pref)</code> : <code>p_i = p_pref_i + P_total/N - z_i</code></li>
<li><strong>Constraints Handling (Simplified):</strong><ul>
<li><code>p_i &gt;= 0</code>:  <code>max(0, ...)</code> </li>
<li><code>sum(p_i) = P_total</code>: <code>max(0,...)</code>  <code>P_total</code>  (: ADMM (Alternating Direction Method of Multipliers) ) </li>
</ul>
</li>
<li><strong>Communication Graph <code>W</code>:</strong>  ( <code>W=ones(N)/N</code> ) <code>W = ones(N)/N</code> <code>W</code>  (: Metropolis-Hastings)</li>
<li><strong>Plotting:</strong><ul>
<li> <code>z_i</code>  <code>mean(p_pref)</code> </li>
<li>DGD () </li>
</ul>
</li>
</ol>
<p> (DGD) DGD (<code>mean(p_pref)</code>) </p>
<h3 class="atx" id=""></h3>
<pre><code class="fenced-code-block language-matlab">Using simplified complete graph weights <span class="token keyword">for</span> <span class="token function">W</span> <span class="token punctuation">(</span>equal averaging<span class="token punctuation">)</span><span class="token punctuation">.</span>
Sum of p_allocated after <span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token number">50.00</span> kW<span class="token punctuation">.</span> Close enough to P_total <span class="token operator">=</span> <span class="token number">50.00</span> kW<span class="token punctuation">.</span>

Final Allocations <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
EV # <span class="token operator">|</span> <span class="token function">Preferred</span> <span class="token punctuation">(</span>kW<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token function">Allocated</span> <span class="token punctuation">(</span>kW<span class="token punctuation">)</span> <span class="token operator">|</span> Estimate of Mean <span class="token function">Pref</span> <span class="token punctuation">(</span>kW<span class="token punctuation">)</span>
   <span class="token number">1</span> <span class="token operator">|</span>           <span class="token number">6.34</span> <span class="token operator">|</span>           <span class="token number">5.68</span> <span class="token operator">|</span>                 <span class="token number">5.65</span>
   <span class="token number">2</span> <span class="token operator">|</span>           <span class="token number">8.76</span> <span class="token operator">|</span>           <span class="token number">7.70</span> <span class="token operator">|</span>                 <span class="token number">6.06</span>
   <span class="token number">3</span> <span class="token operator">|</span>           <span class="token number">3.00</span> <span class="token operator">|</span>           <span class="token number">2.90</span> <span class="token operator">|</span>                 <span class="token number">5.10</span>
   <span class="token number">4</span> <span class="token operator">|</span>           <span class="token number">5.42</span> <span class="token operator">|</span>           <span class="token number">4.92</span> <span class="token operator">|</span>                 <span class="token number">5.50</span>
   <span class="token number">5</span> <span class="token operator">|</span>           <span class="token number">4.17</span> <span class="token operator">|</span>           <span class="token number">3.88</span> <span class="token operator">|</span>                 <span class="token number">5.29</span>
   <span class="token number">6</span> <span class="token operator">|</span>           <span class="token number">3.74</span> <span class="token operator">|</span>           <span class="token number">3.52</span> <span class="token operator">|</span>                 <span class="token number">5.22</span>
   <span class="token number">7</span> <span class="token operator">|</span>           <span class="token number">4.49</span> <span class="token operator">|</span>           <span class="token number">4.14</span> <span class="token operator">|</span>                 <span class="token number">5.35</span>
   <span class="token number">8</span> <span class="token operator">|</span>           <span class="token number">5.76</span> <span class="token operator">|</span>           <span class="token number">5.21</span> <span class="token operator">|</span>                 <span class="token number">5.56</span>
   <span class="token number">9</span> <span class="token operator">|</span>           <span class="token number">6.17</span> <span class="token operator">|</span>           <span class="token number">5.55</span> <span class="token operator">|</span>                 <span class="token number">5.63</span>
  <span class="token number">10</span> <span class="token operator">|</span>           <span class="token number">7.31</span> <span class="token operator">|</span>           <span class="token number">6.49</span> <span class="token operator">|</span>                 <span class="token number">5.82</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
Sum of Preferred Rates<span class="token operator">:</span> <span class="token number">55.17</span> kW
Sum of Allocated Rates<span class="token operator">:</span> <span class="token number">50.00</span> <span class="token function">kW</span> <span class="token punctuation">(</span>Target<span class="token operator">:</span> <span class="token number">50.00</span> kW<span class="token punctuation">)</span></code></pre>
<p><img alt="" src="dgd_iter.png"></p>
<p><img alt="" src="dgd.png"></p>
<hr>
<p>EV</p>
<h2 class="atx" id="alternating-direction-method-of-multipliers-admm">Alternating Direction Method of Multipliers (ADMM)</h2>
<p>ADMM</p>
<p><strong>Problem Recap:</strong>
Minimize <code>sum_i (p_i - p_pref_i)^2</code>
Subject to:</p>
<ol>
<li><code>sum_i p_i = P_total</code> (total power constraint)</li>
<li><code>p_i &gt;= 0</code> (non-negative power allocation)</li>
</ol>
<p><strong>ADMM Approach for this Problem (Distributed Price Coordination):</strong></p>
<p>ADMM <code>i</code> (EV) </p>
<ol>
<li><p><strong>Local Variables:</strong></p>
<ul>
<li><code>p_i</code>:  <code>i</code> </li>
<li><code>lambda_i</code>:  <code>i</code> <code>sum p_i = P_total</code>  <code>lambda_i</code>  <code>lambda_star</code> </li>
</ul>
</li>
<li><p><strong>ADMM Iterations:</strong>
</p>
<ul>
<li><p><strong>Step 1: Primal Update (Local Power Allocation <code>p_i</code>)</strong>
 <code>i</code>  <code>p_pref_i</code>  <code>lambda_i^k</code> ADMM <code>(beta/2)*(p_i - p_i^k)^2</code> <code>beta=0</code> 
<code>p_i^{k+1} = argmin_{p_val &gt;= 0} { (p_val - p_pref_i)^2 + lambda_i^k * p_val + (beta/2)*(p_val - p_i^k)^2 }</code>

<code>p_i^{k+1} = max(0, (2*p_pref_i - lambda_i^k + beta*p_i^k) / (2 + beta))</code></p>
</li>
<li><p><strong>Step 2: Dual Variable Update (Local Price Update <code>lambda_i</code>)</strong>
2
a.  <strong>Estimating Constraint Violation:</strong>  <code>sum_j p_j^{k+1}</code>  <code>P_total</code> DGD <code>p_j^{k+1}</code> 
b.  <strong>Updating <code>lambda_i</code>:</strong>  <code>lambda_i^k</code>  <code>lambda_i</code> </p>
<pre><code class="indented-code-block">`lambda_i^{local_update, k+1} = lambda_i^k + rho * ( (sum_j p_j^{k+1})_i^{estimate} - P_total )`
`rho` ADMM`(sum_j p_j^{k+1})_i^{estimate}`  `i` </code></pre>
</li>
<li><p><strong>Step 3: Dual Variable Consensus (Price Agreement <code>lambda_i</code>)</strong>
 <code>lambda_i</code>  <code>lambda_star</code>  <code>lambda_i^{local_update, k+1}</code> 
<code>lambda_i^{k+1} = Average_Consensus(lambda^{local_update, k+1})</code>
(<code>lambda_j^{local_update,k+1}</code> DGD)</p>
</li>
</ul>
</li>
</ol>
<p>ADMM</p>
<pre><code class="fenced-code-block language-matlab"><span class="token comment">% Distributed Resource Allocation for EV Charging via ADMM</span>
<span class="token comment">%-----------------------------------------------------------------</span>
clear<span class="token punctuation">;</span> clc<span class="token punctuation">;</span> close all<span class="token punctuation">;</span>

<span class="token comment">% --- Problem Setup ---</span>
<span class="token comment">% ---  ---</span>
N <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>                         <span class="token comment">% Number of EVs (agents) (EV)</span>
P_total <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>                   <span class="token comment">% Total Power Capacity (kW) ( (kW))</span>
p_pref <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">8</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">;</span>     <span class="token comment">% Preferred rates (3 to 11 kW) ( (311kW))</span>

<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Preferred charging rates (kW):\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">disp</span><span class="token punctuation">(</span>p_pref<span class="token operator">'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Sum of preferred rates: %.2f kW\n'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Total available power: %.2f kW\n\n'</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% --- Communication Graph (Complete Graph for Simplicity) ---</span>
<span class="token comment">% --- ---</span>
<span class="token comment">% W_consensus is for averaging/summing steps within ADMM</span>
<span class="token comment">% W_consensus ADMM/</span>
W_consensus <span class="token operator">=</span> <span class="token function">ones</span><span class="token punctuation">(</span>N<span class="token punctuation">)</span> <span class="token operator">/</span> N<span class="token punctuation">;</span> 
<span class="token comment">% For DGD-style consensus on lambda, a doubly stochastic matrix is good.</span>
<span class="token comment">% For simple averaging over a complete graph, 1/N works for each element.</span>
<span class="token comment">% If graph is not complete, Metropolis-Hastings or similar needed.</span>
<span class="token comment">% DGD</span>
<span class="token comment">% 1/N</span>
<span class="token comment">% Metropolis-Hastings</span>

<span class="token comment">% --- ADMM Parameters ---</span>
<span class="token comment">% --- ADMM ---</span>
T_admm <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>                   <span class="token comment">% Number of ADMM iterations (outer loop) (ADMM)</span>
rho <span class="token operator">=</span> <span class="token number">0.1</span><span class="token punctuation">;</span>                      <span class="token comment">% ADMM penalty parameter / dual step size (ADMM/)</span>
beta <span class="token operator">=</span> <span class="token number">0.05</span><span class="token punctuation">;</span>                    <span class="token comment">% Proximal term coefficient for p_i update (0 for simpler update) (p_i0)</span>

<span class="token comment">% --- Consensus Parameters (Inner Loops) ---</span>
<span class="token comment">% --- ---</span>
T_consensus <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>               <span class="token comment">% Iterations for inner consensus (sum_p and lambda) (sum_p)</span>
alpha_consensus <span class="token operator">=</span> <span class="token number">0.3</span><span class="token punctuation">;</span>          <span class="token comment">% Stepsize for DGD within consensus routines (DGD)</span>

<span class="token comment">% --- Initialization ---</span>
<span class="token comment">% ---  ---</span>
p <span class="token operator">=</span> p_pref<span class="token punctuation">;</span>                     <span class="token comment">% Initial power allocations (can be p_pref, 0, or P_total/N) (p_pref0P_total/N)</span>
<span class="token comment">% p = ones(N,1) * P_total/N;</span>
lambda <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">% Initial dual variables (price estimates) ()</span>

<span class="token comment">% --- Store History ---</span>
<span class="token comment">% ---  ---</span>
Phist_admm <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span> T_admm<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Lambdahist_admm <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span> T_admm<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Sum_p_hist_admm <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> T_admm<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">Phist_admm</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> p<span class="token punctuation">;</span>
<span class="token function">Lambdahist_admm</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> lambda<span class="token punctuation">;</span>
<span class="token function">Sum_p_hist_admm</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Starting ADMM...\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">% --- ADMM Algorithm ---</span>
<span class="token comment">% --- ADMM ---</span>
<span class="token keyword">for</span> k <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">:</span>T_admm
    <span class="token comment">% --- Step 1: Primal Update (Local p_i solve) ---</span>
    <span class="token comment">% --- 1p_i---</span>
    <span class="token comment">% p_i^{k+1} = max(0, (2*p_pref_i - lambda_i^k + beta*p_i^k) / (2 + beta))</span>
    p_prev_iter <span class="token operator">=</span> p<span class="token punctuation">;</span> <span class="token comment">% Store p_i^k for the proximal term (p_i^k)</span>
    <span class="token keyword">for</span> <span class="token number">i</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">:</span>N
        numerator <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token function">p_pref</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">lambda</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span> <span class="token operator">+</span> beta <span class="token operator">*</span> <span class="token function">p_prev_iter</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        denominator <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">+</span> beta<span class="token punctuation">;</span>
        <span class="token function">p</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> numerator <span class="token operator">/</span> denominator<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>

    <span class="token comment">% --- Step 2a: Distributed Summation of p_i^{k+1} ---</span>
    <span class="token comment">% --- 2ap_i^{k+1} ---</span>
    <span class="token comment">% Each agent needs an estimate of sum(p). We use DGD to average p_i, then multiply by N.</span>
    <span class="token comment">% Or, DGD to directly sum (more complex DGD variant). Simpler: average then scale.</span>
    <span class="token comment">% sum(p)DGDp_iN</span>
    <span class="token comment">% DGDDGD</span>

    current_p_for_avg <span class="token operator">=</span> p<span class="token punctuation">;</span> <span class="token comment">% Values to be averaged ()</span>
    avg_p_estimates <span class="token operator">=</span> current_p_for_avg<span class="token punctuation">;</span> <span class="token comment">% Initial estimate is local value ()</span>

    <span class="token comment">% Store history of sum_p estimation for this ADMM iteration (optional, for debug)</span>
    <span class="token comment">% ADMMsum_p</span>
    <span class="token comment">% AvgPHistInner = zeros(N, T_consensus+1); AvgPHistInner(:,1) = avg_p_estimates;</span>

    <span class="token keyword">for</span> iter_c <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">:</span>T_consensus
        <span class="token comment">% DGD for averaging: x_new = W_consensus * x_old - alpha_c * (x_old - values_to_average)</span>
        <span class="token comment">% Here, we want x_old to converge to mean(values_to_average).</span>
        <span class="token comment">% The standard DGD "x = Wx - alpha*(x-a)" makes x converge to mean(a).</span>
        <span class="token comment">% So 'x' is avg_p_estimates, 'a' is current_p_for_avg</span>
        <span class="token comment">% Using a simpler consensus averaging: new_estimates = W_consensus * old_estimates</span>
        <span class="token comment">% This simple form requires W_consensus to be doubly stochastic and primitive.</span>
        <span class="token comment">% For complete graph W_consensus = ones(N)/N, this works.</span>
        <span class="token comment">% DGDx_new = W_consensus * x_old - alpha_c * (x_old - values_to_average)</span>
        <span class="token comment">% x_oldmean(values_to_average)</span>
        <span class="token comment">% DGD "x = Wx - alpha*(x-a)" xmean(a)</span>
        <span class="token comment">% 'x'avg_p_estimates'a'current_p_for_avg</span>
        <span class="token comment">% new_estimates = W_consensus * old_estimates</span>
        <span class="token comment">% W_consensus</span>
        <span class="token comment">% W_consensus = ones(N)/N</span>
        avg_p_estimates <span class="token operator">=</span> W_consensus <span class="token operator">*</span> avg_p_estimates<span class="token punctuation">;</span> <span class="token comment">% Iterative averaging ()</span>
        <span class="token comment">% AvgPHistInner(:, iter_c+1) = avg_p_estimates;</span>
    <span class="token keyword">end</span>
    <span class="token comment">% After T_consensus iterations, avg_p_estimates(i) is agent i's estimate of mean(p)</span>
    <span class="token comment">% So, agent i's estimate of sum(p) is N * avg_p_estimates(i)</span>
    <span class="token comment">% T_consensusavg_p_estimates(i)imean(p)</span>
    <span class="token comment">% isum(p) N * avg_p_estimates(i)</span>
    estimated_sum_p_all_agents <span class="token operator">=</span> N <span class="token operator">*</span> avg_p_estimates<span class="token punctuation">;</span> <span class="token comment">% Vector of N estimates, ideally all similar (N)</span>

    <span class="token comment">% For the lambda update, each agent uses its own estimate of the sum.</span>
    <span class="token comment">% Or, we could pick one (e.g., agent 1's estimate) if we assume good consensus.</span>
    <span class="token comment">% Let's use each agent's individual estimate for local lambda update.</span>
    <span class="token comment">% </span>
    <span class="token comment">% 11</span>
    <span class="token comment">% </span>

    <span class="token comment">% --- Step 2b: Dual Variable Pre-Update (Local lambda_i update) ---</span>
    <span class="token comment">% --- 2blambda_i---</span>
    lambda_local_update <span class="token operator">=</span> lambda <span class="token operator">+</span> rho <span class="token operator">*</span> <span class="token punctuation">(</span>estimated_sum_p_all_agents <span class="token operator">-</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">% --- Step 3: Consensus on Dual Variables (lambda_i) ---</span>
    <span class="token comment">% --- 3lambda_i ---</span>
    <span class="token comment">% Agents run consensus on their lambda_local_update values.</span>
    <span class="token comment">% lambda_local_update</span>
    lambda_for_consensus <span class="token operator">=</span> lambda_local_update<span class="token punctuation">;</span>
    current_lambda_estimates <span class="token operator">=</span> lambda_for_consensus<span class="token punctuation">;</span> 

    <span class="token comment">% Store history of lambda estimation (optional)</span>
    <span class="token comment">% </span>
    <span class="token comment">% LambdaHistInner = zeros(N, T_consensus+1); LambdaHistInner(:,1) = current_lambda_estimates;</span>

    <span class="token keyword">for</span> iter_c <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">:</span>T_consensus
        <span class="token comment">% Similar consensus averaging for lambda</span>
        <span class="token comment">% </span>
        current_lambda_estimates <span class="token operator">=</span> W_consensus <span class="token operator">*</span> current_lambda_estimates<span class="token punctuation">;</span>
        <span class="token comment">% LambdaHistInner(:, iter_c+1) = current_lambda_estimates;</span>
    <span class="token keyword">end</span>
    lambda <span class="token operator">=</span> current_lambda_estimates<span class="token punctuation">;</span> <span class="token comment">% All lambda(i) should be close after consensus (lambda(i))</span>

    <span class="token comment">% --- Store history for ADMM iteration k ---</span>
    <span class="token comment">% --- ADMMk ---</span>
    <span class="token function">Phist_admm</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> p<span class="token punctuation">;</span>
    <span class="token function">Lambdahist_admm</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> lambda<span class="token punctuation">;</span> <span class="token comment">% Store the consensus-agreed lambda ()</span>
    <span class="token function">Sum_p_hist_admm</span><span class="token punctuation">(</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">% True sum for plotting global constraint satisfaction ()</span>

    <span class="token keyword">if</span> <span class="token function">mod</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> T_admm<span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span>
        <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'ADMM Iter %d/%d: Sum P = %.2f (Target P_total = %.1f), Avg Lambda = %.2f\n'</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>
                k<span class="token punctuation">,</span> T_admm<span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">,</span> P_total<span class="token punctuation">,</span> <span class="token function">mean</span><span class="token punctuation">(</span>lambda<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'ADMM Finished.\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% --- Results ---</span>
<span class="token comment">% ---  ---</span>
p_allocated_admm <span class="token operator">=</span> <span class="token function">Phist_admm</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span> T_admm<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'\n--- ADMM Final Allocations ---\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">disp</span><span class="token punctuation">(</span><span class="token string">'EV # | Preferred (kW) | Allocated (kW) | Final Lambda_i'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token number">i</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span>N
    <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'%4d | %14.2f | %14.2f | %14.4f\n'</span><span class="token punctuation">,</span> <span class="token number">i</span><span class="token punctuation">,</span> <span class="token function">p_pref</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">p_allocated_admm</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">lambda</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'--------------------------------------------------------------------\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Sum of Preferred Rates: %.2f kW\n'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Sum of Allocated Rates (ADMM): %.2f kW (Target: %.2f kW)\n'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_allocated_admm<span class="token punctuation">)</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Final Lambda values std dev: %.4e (should be small if consensus worked)\n'</span><span class="token punctuation">,</span> <span class="token function">std</span><span class="token punctuation">(</span>lambda<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">% --- Analytical Optimal Solution (for comparison) ---</span>
<span class="token comment">% --- ---</span>
<span class="token comment">% Solved via KKT conditions:</span>
<span class="token comment">% KKT</span>
<span class="token comment">% L = sum_i (p_i - p_pref_i)^2 - nu (sum_i p_i - P_total) - sum_i mu_i p_i</span>
<span class="token comment">% dL/dp_i = 2(p_i - p_pref_i) - nu - mu_i = 0</span>
<span class="token comment">% If p_i &gt; 0, then mu_i = 0 =&gt; p_i = p_pref_i + nu/2</span>
<span class="token comment">% If p_i = 0, then mu_i &gt;= 0 =&gt; 2(-p_pref_i) - nu - mu_i = 0 =&gt; nu &lt;= -2*p_pref_i</span>
<span class="token comment">% The single 'nu' here corresponds to '-lambda_star' from our ADMM.</span>
<span class="token comment">% So, p_i_opt = p_pref_i - lambda_star/2</span>
<span class="token comment">% We need to find lambda_star such that sum(max(0, p_pref_i - lambda_star/2)) = P_total</span>
<span class="token comment">% This can be found by a 1D root search for lambda_star.</span>
<span class="token comment">% 'nu'ADMM'-lambda_star'</span>
<span class="token comment">% p_i_opt = p_pref_i - lambda_star/2</span>
<span class="token comment">% sum(max(0, p_pref_i - lambda_star/2)) = P_total lambda_star</span>
<span class="token comment">% lambda_star1</span>
f_to_solve <span class="token operator">=</span> <span class="token operator">@</span><span class="token punctuation">(</span>l_star<span class="token punctuation">)</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> p_pref <span class="token operator">-</span> l_star<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> P_total<span class="token punctuation">;</span>
<span class="token comment">% Sensible search range for lambda_star:</span>
<span class="token comment">% If all p_pref are high, lambda_star will be positive (to reduce allocations)</span>
<span class="token comment">% If all p_pref are low, lambda_star will be negative (to increase allocations)</span>
<span class="token comment">% lambda_star</span>
<span class="token comment">% p_preflambda_star</span>
<span class="token comment">% p_preflambda_star</span>
min_l <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token function">min</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">max</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span> <span class="token operator">-</span> P_total<span class="token operator">/</span>N<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">% Heuristic lower bound ()</span>
max_l <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token function">max</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">min</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span> <span class="token operator">+</span> P_total<span class="token operator">/</span>N<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">% Heuristic upper bound ()</span>
<span class="token keyword">try</span>
    lambda_star_optimal <span class="token operator">=</span> <span class="token function">fzero</span><span class="token punctuation">(</span>f_to_solve<span class="token punctuation">,</span> <span class="token function">mean</span><span class="token punctuation">(</span>lambda<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">% Start search near ADMM's result (ADMM)</span>
<span class="token keyword">catch</span>
    <span class="token keyword">try</span> 
        lambda_star_optimal <span class="token operator">=</span> <span class="token function">fzero</span><span class="token punctuation">(</span>f_to_solve<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">% Try starting at 0 (0)</span>
    <span class="token keyword">catch</span>
        <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'fzero failed to find analytical lambda_star. Plotting without it.\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        lambda_star_optimal <span class="token operator">=</span> <span class="token keyword">NaN</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>
p_optimal_analytical <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> p_pref <span class="token operator">-</span> lambda_star_optimal<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">% --- Plotting ---</span>
<span class="token comment">% ---  ---</span>
<span class="token comment">% 1. Convergence of allocations p_i</span>
<span class="token comment">% 1. p_i</span>
figure<span class="token punctuation">;</span>
<span class="token function">plot</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">:</span>T_admm<span class="token punctuation">,</span> Phist_admm<span class="token operator">'</span><span class="token punctuation">,</span> <span class="token string">'LineWidth'</span><span class="token punctuation">,</span> <span class="token number">1.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">xlabel</span><span class="token punctuation">(</span><span class="token string">'ADMM Iteration k'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">ylabel</span><span class="token punctuation">(</span><span class="token string">'Allocated Power p_i^{(k)} (kW)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">title</span><span class="token punctuation">(</span><span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'ADMM: EV Power Allocations (N=%d, rho=%.2f, beta=%.2f)'</span><span class="token punctuation">,</span> N<span class="token punctuation">,</span> rho<span class="token punctuation">,</span> beta<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
legendStrings_p <span class="token operator">=</span> <span class="token function">arrayfun</span><span class="token punctuation">(</span><span class="token operator">@</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span> <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'EV %d'</span><span class="token punctuation">,</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">:</span>N<span class="token punctuation">,</span> <span class="token string">'UniformOutput'</span><span class="token punctuation">,</span> false<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">legend</span><span class="token punctuation">(</span>legendStrings_p<span class="token punctuation">,</span><span class="token string">'Location'</span><span class="token punctuation">,</span><span class="token string">'best'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
grid on<span class="token punctuation">;</span>

<span class="token comment">% 2. Convergence of dual variables lambda_i</span>
<span class="token comment">% 2. lambda_i</span>
figure<span class="token punctuation">;</span>
<span class="token function">plot</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">:</span>T_admm<span class="token punctuation">,</span> Lambdahist_admm<span class="token operator">'</span><span class="token punctuation">,</span> <span class="token string">'LineWidth'</span><span class="token punctuation">,</span> <span class="token number">1.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
hold on<span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token operator">~</span><span class="token function">isnan</span><span class="token punctuation">(</span>lambda_star_optimal<span class="token punctuation">)</span>
    <span class="token function">yline</span><span class="token punctuation">(</span>lambda_star_optimal<span class="token punctuation">,</span> <span class="token string">'k--'</span><span class="token punctuation">,</span> <span class="token string">'LineWidth'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'Label'</span><span class="token punctuation">,</span> <span class="token string">'Optimal \lambda* (analytical)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
<span class="token function">xlabel</span><span class="token punctuation">(</span><span class="token string">'ADMM Iteration k'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">ylabel</span><span class="token punctuation">(</span><span class="token string">'Dual Variable \lambda_i^{(k)}'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">title</span><span class="token punctuation">(</span><span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'ADMM: Convergence of Dual Variables (Price Estimates)'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
legendStrings_l <span class="token operator">=</span> <span class="token function">arrayfun</span><span class="token punctuation">(</span><span class="token operator">@</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span> <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'\\lambda_%d'</span><span class="token punctuation">,</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">:</span>N<span class="token punctuation">,</span> <span class="token string">'UniformOutput'</span><span class="token punctuation">,</span> false<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token operator">~</span><span class="token function">isnan</span><span class="token punctuation">(</span>lambda_star_optimal<span class="token punctuation">)</span>
    <span class="token function">legend</span><span class="token punctuation">(</span><span class="token punctuation">[</span>legendStrings_l<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'Optimal \lambda*'</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'Location'</span><span class="token punctuation">,</span><span class="token string">'best'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">else</span>
    <span class="token function">legend</span><span class="token punctuation">(</span>legendStrings_l<span class="token punctuation">,</span><span class="token string">'Location'</span><span class="token punctuation">,</span><span class="token string">'best'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
grid on<span class="token punctuation">;</span>

<span class="token comment">% 3. Convergence of Sum p_i to P_total</span>
<span class="token comment">% 3. Sum p_i  P_total </span>
figure<span class="token punctuation">;</span>
<span class="token function">plot</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">:</span>T_admm<span class="token punctuation">,</span> Sum_p_hist_admm<span class="token punctuation">,</span> <span class="token string">'b-'</span><span class="token punctuation">,</span> <span class="token string">'LineWidth'</span><span class="token punctuation">,</span> <span class="token number">1.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
hold on<span class="token punctuation">;</span>
<span class="token function">yline</span><span class="token punctuation">(</span>P_total<span class="token punctuation">,</span> <span class="token string">'r--'</span><span class="token punctuation">,</span> <span class="token string">'LineWidth'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">xlabel</span><span class="token punctuation">(</span><span class="token string">'ADMM Iteration k'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">ylabel</span><span class="token punctuation">(</span><span class="token string">'Total Allocated Power \Sigma p_i^{(k)} (kW)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">title</span><span class="token punctuation">(</span><span class="token string">'ADMM: Convergence of Total Power to P_{total}'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">legend</span><span class="token punctuation">(</span><span class="token string">'Sum p_i^{(k)}'</span><span class="token punctuation">,</span> <span class="token string">'P_{total}'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
grid on<span class="token punctuation">;</span> <span class="token function">ylim</span><span class="token punctuation">(</span><span class="token punctuation">[</span>P_total<span class="token operator">*</span><span class="token number">0.8</span><span class="token punctuation">,</span> P_total<span class="token operator">*</span><span class="token number">1.2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">% Adjust ylim if needed (ylim)</span>

<span class="token comment">% 4. Final Bar Chart Comparison</span>
<span class="token comment">% 4. </span>
figure<span class="token punctuation">;</span>
bar_data <span class="token operator">=</span> <span class="token punctuation">[</span>p_pref<span class="token punctuation">,</span> p_allocated_admm<span class="token punctuation">]</span><span class="token punctuation">;</span>
legend_items <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Preferred Rate'</span><span class="token punctuation">,</span> <span class="token string">'ADMM Allocated Rate'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token operator">~</span><span class="token function">isnan</span><span class="token punctuation">(</span>lambda_star_optimal<span class="token punctuation">)</span>
    bar_data <span class="token operator">=</span> <span class="token punctuation">[</span>bar_data<span class="token punctuation">,</span> p_optimal_analytical<span class="token punctuation">]</span><span class="token punctuation">;</span>
    legend_items <span class="token operator">=</span> <span class="token punctuation">[</span>legend_items<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'Analytical Optimal'</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

b <span class="token operator">=</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span>N<span class="token punctuation">,</span> bar_data<span class="token punctuation">,</span> <span class="token string">'grouped'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">xlabel</span><span class="token punctuation">(</span><span class="token string">'Electric Vehicle (Agent)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">ylabel</span><span class="token punctuation">(</span><span class="token string">'Charging Rate (kW)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">title</span><span class="token punctuation">(</span><span class="token string">'Preferred vs. Allocated Charging Rates (ADMM)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">xticks</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span>N<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">legend</span><span class="token punctuation">(</span>legend_items<span class="token punctuation">,</span> <span class="token string">'Location'</span><span class="token punctuation">,</span> <span class="token string">'northwest'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
grid on<span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span> <span class="token operator">&gt;</span> P_total
    annotation_text <span class="token operator">=</span> <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'Demand (%.1fkW) &gt; Supply (%.1fkW)\nRates adjusted by ADMM.'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>
    annotation_color <span class="token operator">=</span> <span class="token string">'yellow'</span><span class="token punctuation">;</span>
<span class="token keyword">elseif</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span> <span class="token operator">&lt;</span> P_total
    annotation_text <span class="token operator">=</span> <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'Demand (%.1fkW) &lt; Supply (%.1fkW)\nRates adjusted by ADMM.'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>
    annotation_color <span class="token operator">=</span> <span class="token string">'cyan'</span><span class="token punctuation">;</span>
<span class="token keyword">else</span>
    annotation_text <span class="token operator">=</span> <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'Demand (%.1fkW) == Supply (%.1fkW)'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>
    annotation_color <span class="token operator">=</span> <span class="token string">'green'</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
<span class="token function">annotation</span><span class="token punctuation">(</span><span class="token string">'textbox'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0.55</span><span class="token punctuation">,</span> <span class="token number">0.15</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'String'</span><span class="token punctuation">,</span> annotation_text<span class="token punctuation">,</span> <span class="token punctuation">...</span>
        <span class="token string">'FitBoxToText'</span><span class="token punctuation">,</span><span class="token string">'on'</span><span class="token punctuation">,</span> <span class="token string">'BackgroundColor'</span><span class="token punctuation">,</span> annotation_color<span class="token punctuation">,</span> <span class="token string">'FontSize'</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><strong>Key Elements and Changes:</strong></p>
<ol>
<li><strong>ADMM Framework:</strong> ADMM</li>
<li><strong>Dual Variables (<code>lambda_i</code>):</strong> ADMM <code>P_total</code> </li>
<li><strong>Proximal Term (<code>beta</code>):</strong> <code>p_i</code>  <code>(beta/2)*(p_val - p_i^k)^2</code> <code>p_i</code> 1 <code>rho</code> <code>beta=0</code> <code>p_i</code> </li>
<li><strong>Penalty Parameter (<code>rho</code>):</strong> ADMM<code>rho</code> <code>beta</code></li>
<li><strong>Nested Consensus:</strong><ul>
<li><strong>Summation of <code>p_i</code>:</strong> <code>sum p_i = P_total</code>  <code>W_consensus</code> </li>
<li><strong>Consensus on <code>lambda_i</code>:</strong>  <code>lambda_i</code>  <code>lambda_i</code> </li>
</ul>
</li>
<li><strong>Modularity:</strong> DGD</li>
</ol>
<p><strong>How it Compares to the Simpler DGD for Averaging:</strong></p>
<ul>
<li>DGD <code>mean(a)</code>  <code>p_i</code> <em></em></li>
<li>ADMM<em></em>DGDADMM<em></em><code>p</code>  <code>lambda</code> </li>
<li>ADMM</li>
</ul>
<p>ADMM</p>
<h3 class="atx" id="-1"></h3>
<pre><code class="fenced-code-block language-matlab">Starting ADMM<span class="token punctuation">...</span>
ADMM Iter <span class="token number">10</span><span class="token operator">/</span><span class="token number">100</span><span class="token operator">:</span> Sum P <span class="token operator">=</span> <span class="token number">50.01</span> <span class="token punctuation">(</span>Target P_total <span class="token operator">=</span> <span class="token number">50.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Avg Lambda <span class="token operator">=</span> <span class="token number">1.03</span>
ADMM Iter <span class="token number">20</span><span class="token operator">/</span><span class="token number">100</span><span class="token operator">:</span> Sum P <span class="token operator">=</span> <span class="token number">50.00</span> <span class="token punctuation">(</span>Target P_total <span class="token operator">=</span> <span class="token number">50.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Avg Lambda <span class="token operator">=</span> <span class="token number">1.03</span>
ADMM Iter <span class="token number">30</span><span class="token operator">/</span><span class="token number">100</span><span class="token operator">:</span> Sum P <span class="token operator">=</span> <span class="token number">50.00</span> <span class="token punctuation">(</span>Target P_total <span class="token operator">=</span> <span class="token number">50.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Avg Lambda <span class="token operator">=</span> <span class="token number">1.03</span>
ADMM Iter <span class="token number">40</span><span class="token operator">/</span><span class="token number">100</span><span class="token operator">:</span> Sum P <span class="token operator">=</span> <span class="token number">50.00</span> <span class="token punctuation">(</span>Target P_total <span class="token operator">=</span> <span class="token number">50.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Avg Lambda <span class="token operator">=</span> <span class="token number">1.03</span>
ADMM Iter <span class="token number">50</span><span class="token operator">/</span><span class="token number">100</span><span class="token operator">:</span> Sum P <span class="token operator">=</span> <span class="token number">50.00</span> <span class="token punctuation">(</span>Target P_total <span class="token operator">=</span> <span class="token number">50.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Avg Lambda <span class="token operator">=</span> <span class="token number">1.03</span>
ADMM Iter <span class="token number">60</span><span class="token operator">/</span><span class="token number">100</span><span class="token operator">:</span> Sum P <span class="token operator">=</span> <span class="token number">50.00</span> <span class="token punctuation">(</span>Target P_total <span class="token operator">=</span> <span class="token number">50.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Avg Lambda <span class="token operator">=</span> <span class="token number">1.03</span>
ADMM Iter <span class="token number">70</span><span class="token operator">/</span><span class="token number">100</span><span class="token operator">:</span> Sum P <span class="token operator">=</span> <span class="token number">50.00</span> <span class="token punctuation">(</span>Target P_total <span class="token operator">=</span> <span class="token number">50.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Avg Lambda <span class="token operator">=</span> <span class="token number">1.03</span>
ADMM Iter <span class="token number">80</span><span class="token operator">/</span><span class="token number">100</span><span class="token operator">:</span> Sum P <span class="token operator">=</span> <span class="token number">50.00</span> <span class="token punctuation">(</span>Target P_total <span class="token operator">=</span> <span class="token number">50.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Avg Lambda <span class="token operator">=</span> <span class="token number">1.03</span>
ADMM Iter <span class="token number">90</span><span class="token operator">/</span><span class="token number">100</span><span class="token operator">:</span> Sum P <span class="token operator">=</span> <span class="token number">50.00</span> <span class="token punctuation">(</span>Target P_total <span class="token operator">=</span> <span class="token number">50.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Avg Lambda <span class="token operator">=</span> <span class="token number">1.03</span>
ADMM Iter <span class="token number">100</span><span class="token operator">/</span><span class="token number">100</span><span class="token operator">:</span> Sum P <span class="token operator">=</span> <span class="token number">50.00</span> <span class="token punctuation">(</span>Target P_total <span class="token operator">=</span> <span class="token number">50.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Avg Lambda <span class="token operator">=</span> <span class="token number">1.03</span>
ADMM Finished<span class="token punctuation">.</span>

ADMM Final Allocations <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
EV # <span class="token operator">|</span> <span class="token function">Preferred</span> <span class="token punctuation">(</span>kW<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token function">Allocated</span> <span class="token punctuation">(</span>kW<span class="token punctuation">)</span> <span class="token operator">|</span> Final Lambda_i
   <span class="token number">1</span> <span class="token operator">|</span>           <span class="token number">6.34</span> <span class="token operator">|</span>           <span class="token number">5.82</span> <span class="token operator">|</span>         <span class="token number">1.0341</span>
   <span class="token number">2</span> <span class="token operator">|</span>           <span class="token number">8.76</span> <span class="token operator">|</span>           <span class="token number">8.25</span> <span class="token operator">|</span>         <span class="token number">1.0341</span>
   <span class="token number">3</span> <span class="token operator">|</span>           <span class="token number">3.00</span> <span class="token operator">|</span>           <span class="token number">2.48</span> <span class="token operator">|</span>         <span class="token number">1.0341</span>
   <span class="token number">4</span> <span class="token operator">|</span>           <span class="token number">5.42</span> <span class="token operator">|</span>           <span class="token number">4.90</span> <span class="token operator">|</span>         <span class="token number">1.0341</span>
   <span class="token number">5</span> <span class="token operator">|</span>           <span class="token number">4.17</span> <span class="token operator">|</span>           <span class="token number">3.66</span> <span class="token operator">|</span>         <span class="token number">1.0341</span>
   <span class="token number">6</span> <span class="token operator">|</span>           <span class="token number">3.74</span> <span class="token operator">|</span>           <span class="token number">3.22</span> <span class="token operator">|</span>         <span class="token number">1.0341</span>
   <span class="token number">7</span> <span class="token operator">|</span>           <span class="token number">4.49</span> <span class="token operator">|</span>           <span class="token number">3.97</span> <span class="token operator">|</span>         <span class="token number">1.0341</span>
   <span class="token number">8</span> <span class="token operator">|</span>           <span class="token number">5.76</span> <span class="token operator">|</span>           <span class="token number">5.25</span> <span class="token operator">|</span>         <span class="token number">1.0341</span>
   <span class="token number">9</span> <span class="token operator">|</span>           <span class="token number">6.17</span> <span class="token operator">|</span>           <span class="token number">5.66</span> <span class="token operator">|</span>         <span class="token number">1.0341</span>
  <span class="token number">10</span> <span class="token operator">|</span>           <span class="token number">7.31</span> <span class="token operator">|</span>           <span class="token number">6.79</span> <span class="token operator">|</span>         <span class="token number">1.0341</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
Sum of Preferred Rates<span class="token operator">:</span> <span class="token number">55.17</span> kW
Sum of Allocated <span class="token function">Rates</span> <span class="token punctuation">(</span>ADMM<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token number">50.00</span> <span class="token function">kW</span> <span class="token punctuation">(</span>Target<span class="token operator">:</span> <span class="token number">50.00</span> kW<span class="token punctuation">)</span>
Final Lambda values std dev<span class="token operator">:</span> <span class="token number">0.0000e+00</span> <span class="token punctuation">(</span>should be small <span class="token keyword">if</span> consensus worked<span class="token punctuation">)</span></code></pre>
<p><img alt="" src="admm_1.png"></p>
<p><img alt="" src="admm_2.png"></p>
<p><img alt="" src="admm_3.png"></p>
<p><img alt="" src="admm_4.png"></p>
<hr>
<p>MATLABGlobal Optimization Toolbox <code>particleswarm</code> EV (PSO) </p>
<h2 class="atx" id="solve-with-particle-swarm-optimization-pso">Solve with Particle Swarm Optimization (PSO)</h2>
<p><strong>Challenge with PSO for this Problem:</strong>
 <code>particleswarm</code>  (<code>lb</code>, <code>ub</code>) <code>sum(p_i) = P_total</code> <strong></strong></p>
<p><strong>Modified Optimization Problem for PSO:</strong></p>
<p>Minimize <code>f(p) = sum_i (p_i - p_pref_i)^2 + C * (sum_i p_i - P_total)^2</code>
Subject to:</p>
<ol>
<li><code>0 &lt;= p_i &lt;= P_total</code> (EV)</li>
</ol>
<p> <code>C</code> </p>
<pre><code class="fenced-code-block language-matlab"><span class="token comment">% Distributed Resource Allocation for EV Charging via PSO</span>
<span class="token comment">%-----------------------------------------------------------------</span>
clear<span class="token punctuation">;</span> clc<span class="token punctuation">;</span> close all<span class="token punctuation">;</span>

<span class="token comment">% --- Problem Setup ---</span>
<span class="token comment">% ---  ---</span>
N <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>                         <span class="token comment">% Number of EVs (agents) (EV)</span>
P_total <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>                   <span class="token comment">% Total Power Capacity (kW) ( (kW))</span>
p_pref <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">8</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">;</span>     <span class="token comment">% Preferred rates (3 to 11 kW) ( (311kW))</span>

<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Preferred charging rates (kW):\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">disp</span><span class="token punctuation">(</span>p_pref<span class="token operator">'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Sum of preferred rates: %.2f kW\n'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Total available power: %.2f kW\n\n'</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% --- PSO Parameters ---</span>
<span class="token comment">% --- PSO ---</span>
nvars <span class="token operator">=</span> N<span class="token punctuation">;</span>                      <span class="token comment">% Number of optimization variables (power for each EV) (EV)</span>

<span class="token comment">% Lower bounds (p_i &gt;= 0)</span>
<span class="token comment">%  (p_i &gt;= 0)</span>
lb <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% Upper bounds (0 &lt;= p_i &lt;= P_total theoretically, or max individual charge rate)</span>
<span class="token comment">% For simplicity, let's use P_total as a loose upper bound for each.</span>
<span class="token comment">% A tighter bound could be max(p_pref) or a physical EV charging limit.</span>
<span class="token comment">%  ( 0 &lt;= p_i &lt;= P_total)</span>
<span class="token comment">% EVP_total</span>
<span class="token comment">% max(p_pref)EV</span>
ub <span class="token operator">=</span> P_total <span class="token operator">*</span> <span class="token function">ones</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">% ub = min(P_total, max(15, p_pref * 1.5)); % Example of slightly tighter UB ()</span>

<span class="token comment">% Penalty coefficient for the sum constraint</span>
<span class="token comment">% </span>
penalty_coefficient <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span> <span class="token comment">% This might need tuning ()</span>

<span class="token comment">% --- Objective Function for PSO (with penalty) ---</span>
<span class="token comment">% --- PSO---</span>
<span class="token comment">% The input 'p' to this function will be a row vector (PSO standard)</span>
<span class="token comment">% 'p'PSO</span>
objectiveFunction <span class="token operator">=</span> <span class="token operator">@</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">(</span>p<span class="token operator">'</span> <span class="token operator">-</span> p_pref<span class="token punctuation">)</span><span class="token operator">.^</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">...</span>
                         penalty_coefficient <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token operator">-</span> P_total<span class="token punctuation">)</span><span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">;</span>
<span class="token comment">% Note: p' is used because p_pref is a column vector.</span>
<span class="token comment">% PSO passes 'p' as a row vector to the objective function.</span>
<span class="token comment">% p_prefp'</span>
<span class="token comment">% PSO'p'</span>

<span class="token comment">% --- PSO Options ---</span>
<span class="token comment">% --- PSO ---</span>
options <span class="token operator">=</span> <span class="token function">optimoptions</span><span class="token punctuation">(</span><span class="token string">'particleswarm'</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>
    <span class="token string">'SwarmSize'</span><span class="token punctuation">,</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token operator">*</span>nvars<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">...</span> <span class="token comment">% Number of particles ()</span>
    <span class="token string">'MaxIterations'</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token operator">*</span>nvars<span class="token punctuation">,</span> <span class="token punctuation">...</span>    <span class="token comment">% Max iterations ()</span>
    <span class="token string">'Display'</span><span class="token punctuation">,</span> <span class="token string">'iter'</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>           <span class="token comment">% Show iteration progress ()</span>
    <span class="token string">'ObjectiveLimit'</span><span class="token punctuation">,</span> <span class="token number">1e-4</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>      <span class="token comment">% Stop if objective is good enough ()</span>
    <span class="token string">'FunctionTolerance'</span><span class="token punctuation">,</span> <span class="token number">1e-6</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>   <span class="token comment">% Stop if objective change is small ()</span>
    <span class="token string">'UseParallel'</span><span class="token punctuation">,</span> false<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">% Set to true if you have Parallel Computing Toolbox</span>
                                      <span class="token comment">% and problem is large enough.</span>
                                      <span class="token comment">% Parallel Computing Toolboxtrue</span>

<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Starting PSO...\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">% --- Run PSO ---</span>
<span class="token comment">% --- PSO ---</span>
<span class="token comment">% particleswarm(objectiveFunction, nvars, lb, ub, options)</span>
<span class="token punctuation">[</span>p_optimal_pso_raw<span class="token punctuation">,</span> fval_pso<span class="token punctuation">,</span> exitflag<span class="token punctuation">,</span> output_pso<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">particleswarm</span><span class="token punctuation">(</span>objectiveFunction<span class="token punctuation">,</span> nvars<span class="token punctuation">,</span> lb<span class="token punctuation">,</span> ub<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'PSO Finished.\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'PSO Exit Flag: %d\n'</span><span class="token punctuation">,</span> exitflag<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">disp</span><span class="token punctuation">(</span>output_pso<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Objective function value at solution: %.4e\n'</span><span class="token punctuation">,</span> fval_pso<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Constraint term value: %.4e * (%.4f - %.1f)^2 = %.4e\n'</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>
    penalty_coefficient<span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_optimal_pso_raw<span class="token punctuation">)</span><span class="token punctuation">,</span> P_total<span class="token punctuation">,</span> <span class="token punctuation">...</span>
    penalty_coefficient <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span>p_optimal_pso_raw<span class="token punctuation">)</span> <span class="token operator">-</span> P_total<span class="token punctuation">)</span><span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% --- Post-processing the PSO solution ---</span>
<span class="token comment">% --- PSO ---</span>
<span class="token comment">% PSO solution is a row vector, convert to column for consistency</span>
<span class="token comment">% PSO</span>
p_allocated_pso <span class="token operator">=</span> p_optimal_pso_raw<span class="token operator">'</span><span class="token punctuation">;</span>

<span class="token comment">% Check the sum constraint satisfaction</span>
<span class="token comment">% </span>
sum_p_pso <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_allocated_pso<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Sum of allocated rates (PSO raw): %.4f kW (Target: %.2f kW)\n'</span><span class="token punctuation">,</span> sum_p_pso<span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% If the sum is not exactly P_total due to penalty approximation,</span>
<span class="token comment">% we can apply a simple scaling as a heuristic, provided the solution is "close".</span>
<span class="token comment">% This is common practice if the penalty method gets us near the feasible region.</span>
<span class="token comment">% P_total</span>
<span class="token comment">% </span>
<span class="token comment">% </span>
<span class="token keyword">if</span> <span class="token function">abs</span><span class="token punctuation">(</span>sum_p_pso <span class="token operator">-</span> P_total<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">1e-3</span> <span class="token operator">&amp;&amp;</span> sum_p_pso <span class="token operator">&gt;</span> <span class="token number">1e-6</span> <span class="token comment">% Add tolerance and check if sum is not zero ()</span>
    <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Normalizing PSO solution to meet sum constraint exactly.\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    p_allocated_pso_normalized <span class="token operator">=</span> p_allocated_pso <span class="token operator">*</span> <span class="token punctuation">(</span>P_total <span class="token operator">/</span> sum_p_pso<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">% Ensure non-negativity again after scaling (though unlikely to be an issue if lb was 0 and scaling factor &gt; 0)</span>
    <span class="token comment">% lb0&gt;0</span>
    p_allocated_pso_normalized <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> p_allocated_pso_normalized<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">% If this re-normalization drastically changes the solution or violates other complex constraints</span>
    <span class="token comment">% (not present here), then the penalty method or PSO tuning needs more work.</span>
    <span class="token comment">% </span>
    <span class="token comment">% PSO</span>
<span class="token keyword">else</span>
    p_allocated_pso_normalized <span class="token operator">=</span> p_allocated_pso<span class="token punctuation">;</span>
<span class="token keyword">end</span>
<span class="token comment">% Re-check sum after potential normalization</span>
<span class="token comment">% </span>
sum_p_pso_normalized <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_allocated_pso_normalized<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'\n--- PSO Final Allocations (after potential normalization) ---\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">disp</span><span class="token punctuation">(</span><span class="token string">'EV # | Preferred (kW) | Allocated (kW)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token number">i</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span>N
    <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'%4d | %14.2f | %14.2f\n'</span><span class="token punctuation">,</span> <span class="token number">i</span><span class="token punctuation">,</span> <span class="token function">p_pref</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">p_allocated_pso_normalized</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'--------------------------------------------------------------------\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Sum of Preferred Rates: %.2f kW\n'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Sum of Allocated Rates (PSO normalized): %.2f kW (Target: %.2f kW)\n'</span><span class="token punctuation">,</span> sum_p_pso_normalized<span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Original objective value (without penalty) for PSO solution: %.4f\n'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">(</span>p_allocated_pso_normalized <span class="token operator">-</span> p_pref<span class="token punctuation">)</span><span class="token operator">.^</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">% --- Analytical Optimal Solution (for comparison, same as in ADMM example) ---</span>
<span class="token comment">% --- ADMM---</span>
f_to_solve <span class="token operator">=</span> <span class="token operator">@</span><span class="token punctuation">(</span>lambda_star<span class="token punctuation">)</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> p_pref <span class="token operator">-</span> lambda_star<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> P_total<span class="token punctuation">;</span>
<span class="token keyword">try</span>
    lambda_star_optimal <span class="token operator">=</span> <span class="token function">fzero</span><span class="token punctuation">(</span>f_to_solve<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    p_optimal_analytical <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> p_pref <span class="token operator">-</span> lambda_star_optimal<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    analytical_available <span class="token operator">=</span> true<span class="token punctuation">;</span>
    <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Analytical optimal objective value: %.4f\n'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">(</span>p_optimal_analytical <span class="token operator">-</span> p_pref<span class="token punctuation">)</span><span class="token operator">.^</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">catch</span>
    <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'fzero failed to find analytical lambda_star. Plotting without it.\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    p_optimal_analytical <span class="token operator">=</span> <span class="token function">nan</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    analytical_available <span class="token operator">=</span> false<span class="token punctuation">;</span>
<span class="token keyword">end</span>

<span class="token comment">% --- Plotting ---</span>
<span class="token comment">% ---  ---</span>
figure<span class="token punctuation">;</span>
bar_data <span class="token operator">=</span> <span class="token punctuation">[</span>p_pref<span class="token punctuation">,</span> p_allocated_pso_normalized<span class="token punctuation">]</span><span class="token punctuation">;</span>
legend_items <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Preferred Rate'</span><span class="token punctuation">,</span> <span class="token string">'PSO Allocated Rate'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> analytical_available
    bar_data <span class="token operator">=</span> <span class="token punctuation">[</span>bar_data<span class="token punctuation">,</span> p_optimal_analytical<span class="token punctuation">]</span><span class="token punctuation">;</span>
    legend_items <span class="token operator">=</span> <span class="token punctuation">[</span>legend_items<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'Analytical Optimal'</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

b <span class="token operator">=</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span>N<span class="token punctuation">,</span> bar_data<span class="token punctuation">,</span> <span class="token string">'grouped'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">xlabel</span><span class="token punctuation">(</span><span class="token string">'Electric Vehicle (Agent)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">ylabel</span><span class="token punctuation">(</span><span class="token string">'Charging Rate (kW)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">title</span><span class="token punctuation">(</span><span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'Preferred vs. Allocated Charging Rates (PSO, Penalty Coeff: %g)'</span><span class="token punctuation">,</span> penalty_coefficient<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">xticks</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span>N<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">legend</span><span class="token punctuation">(</span>legend_items<span class="token punctuation">,</span> <span class="token string">'Location'</span><span class="token punctuation">,</span> <span class="token string">'northwest'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
grid on<span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span> <span class="token operator">&gt;</span> P_total
    annotation_text <span class="token operator">=</span> <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'Demand (%.1fkW) &gt; Supply (%.1fkW)\nRates adjusted by PSO.'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>
    annotation_color <span class="token operator">=</span> <span class="token string">'yellow'</span><span class="token punctuation">;</span>
<span class="token keyword">elseif</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span> <span class="token operator">&lt;</span> P_total
    annotation_text <span class="token operator">=</span> <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'Demand (%.1fkW) &lt; Supply (%.1fkW)\nRates adjusted by PSO.'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>
    annotation_color <span class="token operator">=</span> <span class="token string">'cyan'</span><span class="token punctuation">;</span>
<span class="token keyword">else</span>
    annotation_text <span class="token operator">=</span> <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'Demand (%.1fkW) == Supply (%.1fkW)'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>
    annotation_color <span class="token operator">=</span> <span class="token string">'green'</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
<span class="token function">annotation</span><span class="token punctuation">(</span><span class="token string">'textbox'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0.55</span><span class="token punctuation">,</span> <span class="token number">0.15</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'String'</span><span class="token punctuation">,</span> annotation_text<span class="token punctuation">,</span> <span class="token punctuation">...</span>
        <span class="token string">'FitBoxToText'</span><span class="token punctuation">,</span><span class="token string">'on'</span><span class="token punctuation">,</span> <span class="token string">'BackgroundColor'</span><span class="token punctuation">,</span> annotation_color<span class="token punctuation">,</span> <span class="token string">'FontSize'</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% --- Convergence Plot (if you want to see PSO progress, requires custom output function) ---</span>
<span class="token comment">% --- PSO---</span>
<span class="token comment">% To get iteration-wise best fitness for plotting convergence:</span>
<span class="token comment">% </span>
<span class="token comment">% 1. Define an output function:</span>
<span class="token comment">% 1. </span>
<span class="token comment">%    function [state,options,optchanged] = psoIterDisplay(options,state,flag)</span>
<span class="token comment">%        optchanged = false;</span>
<span class="token comment">%        if strcmp(flag,'iter')</span>
<span class="token comment">%            if ~isfield(state,'BestFitnessHistory')</span>
<span class="token comment">%                state.BestFitnessHistory = [];</span>
<span class="token comment">%            end</span>
<span class="token comment">%            state.BestFitnessHistory = [state.BestFitnessHistory, state.BestFitness];</span>
<span class="token comment">%        end</span>
<span class="token comment">%    end</span>
<span class="token comment">% 2. Add 'OutputFcn', @psoIterDisplay to optimoptions</span>
<span class="token comment">% 2. optimoptions'OutputFcn', @psoIterDisplay</span>
<span class="token comment">% 3. After running PSO:</span>
<span class="token comment">% 3. PSO</span>
<span class="token comment">%    figure;</span>
<span class="token comment">%    plot(output_pso.BestFitnessHistory); % Assuming BestFitnessHistory was populated (BestFitnessHistory)</span>
<span class="token comment">%    xlabel('Iteration'); ylabel('Best Objective Value (incl. penalty)');</span>
<span class="token comment">%    title('PSO Convergence'); grid on;</span>
<span class="token comment">% Note: The standard 'Display','iter' option gives some info, but for a plot,</span>
<span class="token comment">% a custom output function or capturing iteration data is needed.</span>
<span class="token comment">% The 'output_pso' struct doesn't store the full history by default.</span>
<span class="token comment">% Let's try to use a built-in plot function if available or make a simple one.</span>
<span class="token comment">% 'Display','iter'</span>
<span class="token comment">% </span>
<span class="token comment">% 'output_pso'</span>
<span class="token comment">% </span>
<span class="token keyword">if</span> <span class="token function">isfield</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> <span class="token string">'PlotFcn'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">~</span><span class="token function">isempty</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>PlotFcn<span class="token punctuation">)</span>
    <span class="token comment">% If a plot function was specified and ran, figures might already exist.</span>
    <span class="token comment">% For example, 'PlotFcns', @psoplotswarm shows particle movement.</span>
    <span class="token comment">% @psoplotbestf shows best fitness.</span>
    <span class="token comment">% </span>
    <span class="token comment">% 'PlotFcns', @psoplotswarm </span>
    <span class="token comment">% @psoplotbestf </span>
    <span class="token function">fprintf</span><span class="token punctuation">(</span>"If <span class="token string">'PlotFcns'</span> was used in options<span class="token punctuation">,</span> relevant plots might already be displayed<span class="token operator">.\</span>n"<span class="token punctuation">)</span>
<span class="token keyword">else</span>
    <span class="token comment">% If no PlotFcn was used, we can try to plot the objective value from fval_pso</span>
    <span class="token comment">% (which is only the final value). To get a convergence plot, you'd typically</span>
    <span class="token comment">% need to set options.PlotFcns = @psoplotbestf;</span>
    <span class="token comment">% PlotFcnfval_pso</span>
    <span class="token comment">% </span>
    <span class="token comment">% options.PlotFcns = @psoplotbestf; </span>
    <span class="token function">fprintf</span><span class="token punctuation">(</span>"To see PSO convergence plot<span class="token punctuation">,</span> set options<span class="token punctuation">.</span>PlotFcns <span class="token operator">=</span> <span class="token operator">@</span>psoplotbestf<span class="token punctuation">;</span><span class="token operator">\</span>n"<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">fprintf</span><span class="token punctuation">(</span>"Example<span class="token operator">:</span> options <span class="token operator">=</span> <span class="token function">optimoptions</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> <span class="token string">'PlotFcns'</span><span class="token punctuation">,</span> <span class="token operator">@</span>psoplotbestf<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">\</span>n"<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span></code></pre>
<p><strong>Explanation of PSO Implementation:</strong></p>
<ol>
<li><p><strong>Problem Formulation for PSO:</strong></p>
<ul>
<li> <code>sum(p_i) = P_total</code> </li>
<li>: <code>f(p) = sum_i (p_i - p_pref_i)^2 + penalty_coefficient * (sum_i p_i - P_total)^2</code></li>
<li><code>penalty_coefficient</code> PSO <code>sum(p_i)</code>  <code>P_total</code> </li>
<li> <code>p_i &gt;= 0</code>  <code>p_i &lt;= P_total</code> () <code>particleswarm</code>  <code>lb</code> ()  <code>ub</code> () </li>
</ul>
</li>
<li><p><strong><code>particleswarm</code> Function Call:</strong></p>
<ul>
<li><code>objectiveFunction</code>: () </li>
<li><code>nvars</code>:  (<code>N</code>EV)</li>
<li><code>lb</code>:  ()</li>
<li><code>ub</code>:  (: EV <code>P_total</code>)</li>
<li><code>options</code>: PSO:<ul>
<li><code>SwarmSize</code>: </li>
<li><code>MaxIterations</code>: </li>
<li><code>Display</code>: <code>'iter'</code> </li>
<li><code>ObjectiveLimit</code>, <code>FunctionTolerance</code>: </li>
<li><code>UseParallel</code>: Parallel Computing Toolbox </li>
<li> <code>'PlotFcns', @psoplotbestf</code> </li>
</ul>
</li>
</ul>
</li>
<li><p><strong>Post-Processing:</strong></p>
<ul>
<li><code>particleswarm</code>  <code>p_optimal_pso_raw</code> </li>
<li><strong>Constraint Check:</strong> <code>sum(p_optimal_pso_raw)</code> </li>
<li><strong>Normalization (Heuristic):</strong>  <code>P_total</code>  () : <code>p_allocated_pso_normalized = p_allocated_pso * (P_total / sum_p_pso)</code> ( <code>sum_p_pso</code>  <code>P_total</code> )<code>max(0, ...)</code> PSO<em></em></li>
</ul>
</li>
<li><p><strong>Comparison:</strong></p>
<ul>
<li> () </li>
</ul>
</li>
</ol>
<p><strong>Advantages of PSO for this type of problem:</strong></p>
<ul>
<li><strong>Derivative-Free:</strong>  ()</li>
<li><strong>Global Search:</strong> </li>
<li><strong>Ease of Handling Bounds:</strong> <code>lb</code>  <code>ub</code> </li>
</ul>
<p><strong>Disadvantages/Considerations:</strong></p>
<ul>
<li><strong>Equality Constraints:</strong> </li>
<li><strong>Computational Cost:</strong> PSO ( <code>fmincon</code> ) </li>
<li><strong>No Guarantee of Optimality:</strong> PSO ()</li>
<li><strong>Stochastic Nature:</strong> PSO</li>
</ul>
<p>PSO</p>
<h3 class="atx" id="-2"></h3>
<pre><code class="fenced-code-block language-matlab">Starting PSO<span class="token punctuation">...</span>
Optimization ended<span class="token operator">:</span> relative change in the objective value 
over the last OPTIONS<span class="token punctuation">.</span>MaxStallIterations iterations is less than OPTIONS<span class="token punctuation">.</span>FunctionTolerance<span class="token punctuation">.</span>
PSO Finished<span class="token punctuation">.</span>
PSO Exit Flag<span class="token operator">:</span> <span class="token number">1</span>
Optimization ended<span class="token operator">:</span> relative change in the objective value 
over the last OPTIONS<span class="token punctuation">.</span>MaxStallIterations iterations is less than OPTIONS<span class="token punctuation">.</span>FunctionTolerance<span class="token punctuation">.</span>
Objective <span class="token keyword">function</span> value at solution<span class="token operator">:</span> <span class="token number">3.6154e+01</span>
Constraint term value<span class="token operator">:</span> <span class="token number">1.0000e+03</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">49.9936</span> <span class="token operator">-</span> <span class="token number">50.0</span><span class="token punctuation">)</span><span class="token operator">^</span><span class="token number">2</span> <span class="token operator">=</span> <span class="token number">4.0709e-02</span>
Sum of allocated <span class="token function">rates</span> <span class="token punctuation">(</span>PSO raw<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token number">49.9936</span> <span class="token function">kW</span> <span class="token punctuation">(</span>Target<span class="token operator">:</span> <span class="token number">50.00</span> kW<span class="token punctuation">)</span>
Normalizing PSO solution to meet sum constraint exactly<span class="token punctuation">.</span>

<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span> PSO Final <span class="token function">Allocations</span> <span class="token punctuation">(</span>after potential normalization<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
EV # <span class="token operator">|</span> <span class="token function">Preferred</span> <span class="token punctuation">(</span>kW<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token function">Allocated</span> <span class="token punctuation">(</span>kW<span class="token punctuation">)</span>
   <span class="token number">1</span> <span class="token operator">|</span>           <span class="token number">6.34</span> <span class="token operator">|</span>           <span class="token number">5.87</span>
   <span class="token number">2</span> <span class="token operator">|</span>           <span class="token number">8.76</span> <span class="token operator">|</span>          <span class="token number">10.24</span>
   <span class="token number">3</span> <span class="token operator">|</span>           <span class="token number">3.00</span> <span class="token operator">|</span>           <span class="token number">4.60</span>
   <span class="token number">4</span> <span class="token operator">|</span>           <span class="token number">5.42</span> <span class="token operator">|</span>           <span class="token number">0.30</span>
   <span class="token number">5</span> <span class="token operator">|</span>           <span class="token number">4.17</span> <span class="token operator">|</span>           <span class="token number">2.35</span>
   <span class="token number">6</span> <span class="token operator">|</span>           <span class="token number">3.74</span> <span class="token operator">|</span>           <span class="token number">4.54</span>
   <span class="token number">7</span> <span class="token operator">|</span>           <span class="token number">4.49</span> <span class="token operator">|</span>           <span class="token number">4.28</span>
   <span class="token number">8</span> <span class="token operator">|</span>           <span class="token number">5.76</span> <span class="token operator">|</span>           <span class="token number">5.51</span>
   <span class="token number">9</span> <span class="token operator">|</span>           <span class="token number">6.17</span> <span class="token operator">|</span>           <span class="token number">5.30</span>
  <span class="token number">10</span> <span class="token operator">|</span>           <span class="token number">7.31</span> <span class="token operator">|</span>           <span class="token number">7.00</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
Sum of Preferred Rates<span class="token operator">:</span> <span class="token number">55.17</span> kW
Sum of Allocated <span class="token function">Rates</span> <span class="token punctuation">(</span>PSO normalized<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token number">50.00</span> <span class="token function">kW</span> <span class="token punctuation">(</span>Target<span class="token operator">:</span> <span class="token number">50.00</span> kW<span class="token punctuation">)</span>
Original objective <span class="token function">value</span> <span class="token punctuation">(</span>without penalty<span class="token punctuation">)</span> <span class="token keyword">for</span> PSO solution<span class="token operator">:</span> <span class="token number">36.1156</span>
Analytical optimal objective value<span class="token operator">:</span> <span class="token number">2.6732</span></code></pre>
<p><img alt="" src="pso.png"></p>
<hr>
<h2 class="atx" id="solve-with-ga">Solve with GA</h2>
<p>GAMATLAB  Global Optimization Toolbox  <code>ga</code>  <code>particleswarm</code> 
<strong>EV  GA </strong> </p>
<ul>
<li><p><strong></strong> <code>sum_i (p_i - p_pref_i)^2</code> </p>
</li>
<li><p><strong></strong> <code>0 &lt;= p_i &lt;= P_total</code></p>
</li>
</ul>
<p>  <code>ga</code> <code>sum_i p_i = P_total</code></p>
<p> <code>Aeq</code><code>beq</code> </p>
<p>PSO </p>
<pre><code class="fenced-code-block language-matlab"><span class="token comment">% GA EV </span>
<span class="token comment">%-----------------------------------------------------------------</span>
clear<span class="token punctuation">;</span> clc<span class="token punctuation">;</span> close all<span class="token punctuation">;</span>

<span class="token comment">% ---  ---</span>
N <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>                         <span class="token comment">% EV</span>
P_total <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>                   <span class="token comment">%  (kW)</span>
<span class="token comment">% p_pref </span>
<span class="token function">rng</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token comment">% </span>
p_pref <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">8</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">;</span>     <span class="token comment">%  (311 kW)</span>

<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">' (kW):\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">disp</span><span class="token punctuation">(</span>p_pref<span class="token operator">'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">': %.2f kW\n'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">': %.2f kW\n\n'</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% --- GA  ---</span>
nvars <span class="token operator">=</span> N<span class="token punctuation">;</span>                      <span class="token comment">%  EV </span>

<span class="token comment">% GA  'x' </span>
<span class="token comment">% p_pref </span>
objectiveFunction <span class="token operator">=</span> <span class="token operator">@</span><span class="token punctuation">(</span>p_row<span class="token punctuation">)</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">(</span>p_row<span class="token operator">'</span> <span class="token operator">-</span> p_pref<span class="token punctuation">)</span><span class="token operator">.^</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% </span>
lb <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> nvars<span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">%  (p_i &gt;= 0)GA </span>
<span class="token comment">%  (0 &lt;= p_i &lt;= P_total)</span>
ub <span class="token operator">=</span> P_total <span class="token operator">*</span> <span class="token function">ones</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> nvars<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">% GA </span>
<span class="token comment">% </span>
<span class="token comment">% ub = min(P_total, max(15, p_pref' * 1.5));</span>

<span class="token comment">% : sum(p_i) = P_total</span>
Aeq <span class="token operator">=</span> <span class="token function">ones</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> nvars<span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">% p1 + p2 +  + pN </span>
beq <span class="token operator">=</span> P_total<span class="token punctuation">;</span>                  <span class="token comment">%  P_total </span>

<span class="token comment">% </span>
A <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">% </span>
nonlcon <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">% </span>
IntCon <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">% --- GA  ---</span>
options <span class="token operator">=</span> <span class="token function">optimoptions</span><span class="token punctuation">(</span><span class="token string">'ga'</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>
    <span class="token string">'PopulationSize'</span><span class="token punctuation">,</span>      <span class="token function">max</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span>  <span class="token number">10</span><span class="token operator">*</span>nvars<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>  <span class="token comment">% </span>
    <span class="token string">'MaxGenerations'</span><span class="token punctuation">,</span>      <span class="token number">200</span> <span class="token operator">*</span> nvars<span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>      <span class="token comment">% </span>
    <span class="token string">'Display'</span><span class="token punctuation">,</span>             <span class="token string">'iter'</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>              <span class="token comment">% </span>
    <span class="token string">'PlotFcn'</span><span class="token punctuation">,</span>             <span class="token punctuation">{</span><span class="token operator">@</span>gaplotbestf<span class="token punctuation">,</span> <span class="token operator">@</span>gaplotstopping<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">...</span> <span class="token comment">% </span>
    <span class="token string">'FunctionTolerance'</span><span class="token punctuation">,</span>   <span class="token number">1e-7</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>                <span class="token comment">%   </span>
    <span class="token string">'ConstraintTolerance'</span><span class="token punctuation">,</span> <span class="token number">1e-7</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>                <span class="token comment">% </span>
    <span class="token string">'UseParallel'</span><span class="token punctuation">,</span>         false<span class="token punctuation">)</span><span class="token punctuation">;</span>                  <span class="token comment">%  true</span>

<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'GA ...\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">% --- GA  ---</span>
<span class="token punctuation">[</span>p_optimal_ga_row<span class="token punctuation">,</span> fval_ga<span class="token punctuation">,</span> exitflag_ga<span class="token punctuation">,</span> output_ga<span class="token punctuation">,</span> population_ga<span class="token punctuation">,</span> scores_ga<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">...</span>
    <span class="token function">ga</span><span class="token punctuation">(</span>objectiveFunction<span class="token punctuation">,</span> nvars<span class="token punctuation">,</span> A<span class="token punctuation">,</span> b<span class="token punctuation">,</span> Aeq<span class="token punctuation">,</span> beq<span class="token punctuation">,</span> lb<span class="token punctuation">,</span> ub<span class="token punctuation">,</span> nonlcon<span class="token punctuation">,</span> IntCon<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'GA \n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'GA Exit Flag: %d\n'</span><span class="token punctuation">,</span> exitflag_ga<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">disp</span><span class="token punctuation">(</span>output_ga<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">': %.4e\n'</span><span class="token punctuation">,</span> fval_ga<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% --- GA  ---</span>
<span class="token comment">% GA </span>
p_allocated_ga <span class="token operator">=</span> p_optimal_ga_row<span class="token operator">'</span><span class="token punctuation">;</span>

<span class="token comment">% </span>
sum_p_ga <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_allocated_ga<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'GA : %.4f kW (: %.2f kW)\n'</span><span class="token punctuation">,</span> sum_p_ga<span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">': %.4e\n'</span><span class="token punctuation">,</span> sum_p_ga <span class="token operator">-</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'\n--- GA  ---\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">disp</span><span class="token punctuation">(</span><span class="token string">'EV # |  (kW) |  (kW)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token number">i</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span>N
    <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'%4d | %10.2f | %10.2f\n'</span><span class="token punctuation">,</span> <span class="token number">i</span><span class="token punctuation">,</span> <span class="token function">p_pref</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">p_allocated_ga</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'--------------------------------------------------------------------\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">': %.2f kW\n'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'GA : %.2f kW (: %.2f kW)\n'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_allocated_ga<span class="token punctuation">)</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'GA  (): %.4f\n'</span><span class="token punctuation">,</span> fval_ga<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% --- ADMM/PSO ---</span>
<span class="token comment">% KKT : p_i_opt = max(0, p_pref_i - lambda_star/2)</span>
<span class="token comment">% sum(max(0, p_pref_i - lambda_star/2)) = P_total  lambda_star </span>
f_to_solve <span class="token operator">=</span> <span class="token operator">@</span><span class="token punctuation">(</span>lambda_s<span class="token punctuation">)</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> p_pref <span class="token operator">-</span> lambda_s<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> P_total<span class="token punctuation">;</span>
<span class="token keyword">try</span>
    lambda_star_optimal <span class="token operator">=</span> <span class="token function">fzero</span><span class="token punctuation">(</span>f_to_solve<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">% </span>
    <span class="token keyword">if</span> <span class="token function">isnan</span><span class="token punctuation">(</span>lambda_star_optimal<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">abs</span><span class="token punctuation">(</span><span class="token function">f_to_solve</span><span class="token punctuation">(</span>lambda_star_optimal<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">1e-3</span>
        lambda_star_optimal <span class="token operator">=</span> <span class="token function">fzero</span><span class="token punctuation">(</span>f_to_solve<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">% </span>
    <span class="token keyword">end</span>
    p_optimal_analytical <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> p_pref <span class="token operator">-</span> lambda_star_optimal<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    analytical_available <span class="token operator">=</span> true<span class="token punctuation">;</span>
    <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">': %.4f\n'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">(</span>p_optimal_analytical <span class="token operator">-</span> p_pref<span class="token punctuation">)</span><span class="token operator">.^</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">': %.4f\n'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_optimal_analytical<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">catch</span> ME
    <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">' lambda_star : %s\n'</span><span class="token punctuation">,</span> ME<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    p_optimal_analytical <span class="token operator">=</span> <span class="token function">nan</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    analytical_available <span class="token operator">=</span> false<span class="token punctuation">;</span>
<span class="token keyword">end</span>

<span class="token comment">% ---  ---</span>
figure<span class="token punctuation">;</span>  <span class="token comment">% </span>
bar_data <span class="token operator">=</span> <span class="token punctuation">[</span>p_pref<span class="token punctuation">,</span> p_allocated_ga<span class="token punctuation">]</span><span class="token punctuation">;</span>
legend_items <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'GA '</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> analytical_available <span class="token operator">&amp;&amp;</span> <span class="token operator">~</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token function">isnan</span><span class="token punctuation">(</span>p_optimal_analytical<span class="token punctuation">)</span><span class="token punctuation">)</span>
    bar_data <span class="token operator">=</span> <span class="token punctuation">[</span>bar_data<span class="token punctuation">,</span> p_optimal_analytical<span class="token punctuation">]</span><span class="token punctuation">;</span>
    legend_items <span class="token operator">=</span> <span class="token punctuation">[</span>legend_items<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">''</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

b <span class="token operator">=</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span>N<span class="token punctuation">,</span> bar_data<span class="token punctuation">,</span> <span class="token string">'grouped'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">xlabel</span><span class="token punctuation">(</span><span class="token string">'Electric Vehicle (Agent)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">ylabel</span><span class="token punctuation">(</span><span class="token string">'Charging Rate (kW)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">title</span><span class="token punctuation">(</span><span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">' vs. GA  (GA, N=%d)'</span><span class="token punctuation">,</span> N<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">xticks</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span>N<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">legend</span><span class="token punctuation">(</span>legend_items<span class="token punctuation">,</span> <span class="token string">'Location'</span><span class="token punctuation">,</span><span class="token string">'northwest'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
grid on<span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span> <span class="token operator">&gt;</span> P_total
    annotation_text <span class="token operator">=</span> <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">' (%.1fkW) &gt;  (%.1fkW)\nGA '</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>
    annotation_color <span class="token operator">=</span> <span class="token string">'yellow'</span><span class="token punctuation">;</span>
<span class="token keyword">elseif</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span> <span class="token operator">&lt;</span> P_total
    annotation_text <span class="token operator">=</span> <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">' (%.1fkW) &lt;  (%.1fkW)\nGA '</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>
    annotation_color <span class="token operator">=</span> <span class="token string">'cyan'</span><span class="token punctuation">;</span>
<span class="token keyword">else</span>
    annotation_text <span class="token operator">=</span> <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">' (%.1fkW) ==  (%.1fkW)'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>
    annotation_color <span class="token operator">=</span> <span class="token string">'green'</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
<span class="token function">annotation</span><span class="token punctuation">(</span><span class="token string">'textbox'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0.55</span><span class="token punctuation">,</span><span class="token number">0.15</span><span class="token punctuation">,</span><span class="token number">0.1</span><span class="token punctuation">,</span><span class="token number">0.1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'String'</span><span class="token punctuation">,</span> annotation_text<span class="token punctuation">,</span> <span class="token punctuation">...</span>
           <span class="token string">'FitBoxToText'</span><span class="token punctuation">,</span><span class="token string">'on'</span><span class="token punctuation">,</span> <span class="token string">'BackgroundColor'</span><span class="token punctuation">,</span>annotation_color<span class="token punctuation">,</span> <span class="token string">'FontSize'</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% GA  PlotFcn </span>
<span class="token function">disp</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 class="atx" id="-3"></h3>
<pre><code class="fenced-code-block language-matlab">ga stopped because it exceeded options<span class="token punctuation">.</span>MaxGenerations<span class="token punctuation">.</span>
GA Finished<span class="token punctuation">.</span>
GA Exit Flag<span class="token operator">:</span> <span class="token number">0</span>
ga stopped because it exceeded options<span class="token punctuation">.</span>MaxGenerations<span class="token punctuation">.</span>
Objective <span class="token keyword">function</span> value at solution<span class="token operator">:</span> <span class="token number">2.6765e+00</span>
Sum of allocated <span class="token function">rates</span> <span class="token punctuation">(</span>GA<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token number">50.0000</span> <span class="token function">kW</span> <span class="token punctuation">(</span>Target<span class="token operator">:</span> <span class="token number">50.00</span> kW<span class="token punctuation">)</span>
Deviation from sum constraint<span class="token operator">:</span> <span class="token number">6.3949e-14</span>

<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span> GA Final Allocations <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
EV # <span class="token operator">|</span> <span class="token function">Preferred</span> <span class="token punctuation">(</span>kW<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token function">Allocated</span> <span class="token punctuation">(</span>kW<span class="token punctuation">)</span>
   <span class="token number">1</span> <span class="token operator">|</span>           <span class="token number">6.34</span> <span class="token operator">|</span>           <span class="token number">5.81</span>
   <span class="token number">2</span> <span class="token operator">|</span>           <span class="token number">8.76</span> <span class="token operator">|</span>           <span class="token number">8.24</span>
   <span class="token number">3</span> <span class="token operator">|</span>           <span class="token number">3.00</span> <span class="token operator">|</span>           <span class="token number">2.48</span>
   <span class="token number">4</span> <span class="token operator">|</span>           <span class="token number">5.42</span> <span class="token operator">|</span>           <span class="token number">4.90</span>
   <span class="token number">5</span> <span class="token operator">|</span>           <span class="token number">4.17</span> <span class="token operator">|</span>           <span class="token number">3.65</span>
   <span class="token number">6</span> <span class="token operator">|</span>           <span class="token number">3.74</span> <span class="token operator">|</span>           <span class="token number">3.28</span>
   <span class="token number">7</span> <span class="token operator">|</span>           <span class="token number">4.49</span> <span class="token operator">|</span>           <span class="token number">3.97</span>
   <span class="token number">8</span> <span class="token operator">|</span>           <span class="token number">5.76</span> <span class="token operator">|</span>           <span class="token number">5.24</span>
   <span class="token number">9</span> <span class="token operator">|</span>           <span class="token number">6.17</span> <span class="token operator">|</span>           <span class="token number">5.65</span>
  <span class="token number">10</span> <span class="token operator">|</span>           <span class="token number">7.31</span> <span class="token operator">|</span>           <span class="token number">6.79</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
Sum of Preferred Rates<span class="token operator">:</span> <span class="token number">55.17</span> kW
Sum of Allocated <span class="token function">Rates</span> <span class="token punctuation">(</span>GA<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token number">50.00</span> <span class="token function">kW</span> <span class="token punctuation">(</span>Target<span class="token operator">:</span> <span class="token number">50.00</span> kW<span class="token punctuation">)</span>
Objective <span class="token function">value</span> <span class="token punctuation">(</span>sum of squared differences<span class="token punctuation">)</span> <span class="token keyword">for</span> GA solution<span class="token operator">:</span> <span class="token number">2.6765</span>
Analytical optimal objective value<span class="token operator">:</span> <span class="token number">2.6732</span>
Analytical sum<span class="token operator">:</span> <span class="token number">50.0000</span>
GA plots <span class="token keyword">for</span> best fitness and stopping criteria should have been displayed in separate figures<span class="token punctuation">.</span></code></pre>
<p><img alt="" src="ga_iter.png"></p>
<p><img alt="" src="ga.png"></p>
<hr>
<h2 class="atx" id="discussion">Discussion</h2>
<p>EVDGDADMMPSOGA4</p>
<h3 class="atx" id="1--distributed-gradient-descent---dgd">1.  (Distributed Gradient Descent - DGD)</h3>
<ul>
<li><strong></strong> DGDEV</li>
<li><strong></strong><ul>
<li></li>
<li></li>
</ul>
</li>
<li><strong></strong><ul>
<li> <code>p_i = p_pref_i + P_total/N - z_i</code> <code>z_i</code> <code>z_i</code>  <code>p_i &gt;= 0</code> <code>sum(p_i) = P_total</code> </li>
<li><code>max(0, ...)</code> </li>
</ul>
</li>
<li><strong></strong> <strong></strong></li>
</ul>
<hr>
<h3 class="atx" id="2--alternating-direction-method-of-multipliers---admm">2.  (Alternating Direction Method of Multipliers - ADMM)</h3>
<ul>
<li><strong></strong> ADMMEV <code>sum(p_i) = P_total</code> </li>
<li><strong></strong><ul>
<li><strong></strong></li>
<li>KKT</li>
<li></li>
</ul>
</li>
<li><strong></strong><ul>
<li><code>rho</code>, <code>beta</code>DGD</li>
<li>ADMMADMM</li>
</ul>
</li>
<li><strong></strong> <strong></strong>ADMM</li>
</ul>
<hr>
<h3 class="atx" id="3--particle-swarm-optimization---pso">3.  (Particle-Swarm Optimization - PSO)</h3>
<ul>
<li><strong></strong> PSO <code>sum(p_i) = P_total</code> <code>p_i &gt;= 0</code>, <code>p_i &lt;= ub_i</code></li>
<li><strong></strong><ul>
<li></li>
<li></li>
</ul>
</li>
<li><strong></strong><ul>
<li><strong></strong> <code>sum(p_i) = P_total</code> PSO</li>
<li>PSO</li>
<li>ADMMGA</li>
</ul>
</li>
<li><strong></strong> <strong></strong>PSO</li>
</ul>
<hr>
<h3 class="atx" id="4--genetic-algorithm---ga">4.  (Genetic Algorithm - GA)</h3>
<ul>
<li><strong></strong> GAMATLAB <code>ga</code> <code>Aeq*x = beq</code></li>
<li><strong></strong><ul>
<li><strong></strong> <code>sum(p_i) = P_total</code>  <code>ConstraintTolerance</code> </li>
<li></li>
<li></li>
</ul>
</li>
<li><strong></strong><ul>
<li>ADMM</li>
<li>GA</li>
<li></li>
</ul>
</li>
<li><strong></strong> <strong></strong>GA</li>
</ul>
<hr>
<h3 class="atx" id="-takeaway"> (Takeaway)</h3>
<ul>
<li><strong></strong><ul>
<li><strong></strong>ADMM</li>
<li><strong></strong><code>quadprog</code> **GA**PSO</li>
</ul>
</li>
<li>DGD</li>
<li>PSO</li>
<li>EVADMMGAADMM</li>
</ul>
<h2 class="atx" id="references">References</h2>
<ol start="2">
<li><p>D. P. Bertsekas, A. Nedi, and A. Ozdaglar, <em>Convex Analysis and Optimization</em>, Athena Scientific.</p>
</li>
<li><p><strong>Average Consensus Problem</strong> <em>Distributed Multi-Agent Optimization via Dual Decomposition</em> (Section 2.8) <a href="https://www.diva-portal.org/smash/get/diva2%3A453798/FULLTEXT01.pdf">Diva Portal</a> </p>
</li>
<li><p>A. Nedi and A. Ozdaglar, Distributed Subgradient Methods for MultiAgent Optimization, <em>IEEE Trans. Autom. Control</em>, 54(1): 4861, 2009 <a href="https://www.scirp.org/%28S%28czeh2tfqw2orz553k1w0r45%29%29/reference/referencespapers?referenceid=3220708">SCIRP</a> </p>
</li>
<li><p>A. Nedi and A. Ozdaglar, Distributed Subgradient Methods for Multi-Agent Optimization (), MIT <a href="https://web.mit.edu/Asuman/Desktop/asuman/www/documents/distributed-journal-final.pdf">Massachusetts Institute of Technology</a> </p>
</li>
<li><p>S. Boyd et al., Distributed Optimization and Statistical Learning via the Alternating Direction Method of Multipliers, <em>Foundations and Trends in Machine Learning</em>, 3(1): 1122, 2011 <a href="https://web.stanford.edu/~boyd/papers/pdf/admm_distr_stats.pdf">Stanford University</a> </p>
</li>
<li><p><strong>Consensus ALADIN</strong> , Xu Du et al., 2023 <a href="https://arxiv.org/pdf/2306.05662">arXiv</a> </p>
</li>
<li><p>G. Buzzard et al., Optimization-Free Reconstruction Using Consensus Equilibrium, SIIMS, 2019 <a href="https://engineering.purdue.edu/~bouman/Plug-and-Play/webdocs/SIIMS01.pdf">Purdue Engineering</a> </p>
</li>
<li><p> <a href="https://www.sciencedirect.com/science/article/abs/pii/S0893608023006925">ScienceDirect</a> </p>
</li>
<li><p> <a href="https://www.sciencedirect.com/science/article/abs/pii/S0306261921007923">ScienceDirect</a> </p>
</li>
<li><p><strong>Subgradient Method</strong> Wikipedia2024 <a href="https://en.wikipedia.org/wiki/Subgradient_method">en.wikipedia.org</a> </p>
</li>
</ol>
</article>
</body>
</html>