<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title></title>
  <style>
  @font-face {
  font-family: octicons-link;
  src: url(data:font/woff;charset=utf-8;base64,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) format('woff');
}

.markdown-body .octicon {
  display: inline-block;
  fill: currentColor;
  vertical-align: text-bottom;
}

.markdown-body .anchor {
  float: left;
  line-height: 1;
  margin-left: -20px;
  padding-right: 4px;
}

.markdown-body .anchor:focus {
  outline: none;
}

.markdown-body h1 .octicon-link,
.markdown-body h2 .octicon-link,
.markdown-body h3 .octicon-link,
.markdown-body h4 .octicon-link,
.markdown-body h5 .octicon-link,
.markdown-body h6 .octicon-link {
  color: #1b1f23;
  vertical-align: middle;
  visibility: hidden;
}

.markdown-body h1:hover .anchor,
.markdown-body h2:hover .anchor,
.markdown-body h3:hover .anchor,
.markdown-body h4:hover .anchor,
.markdown-body h5:hover .anchor,
.markdown-body h6:hover .anchor {
  text-decoration: none;
}

.markdown-body h1:hover .anchor .octicon-link,
.markdown-body h2:hover .anchor .octicon-link,
.markdown-body h3:hover .anchor .octicon-link,
.markdown-body h4:hover .anchor .octicon-link,
.markdown-body h5:hover .anchor .octicon-link,
.markdown-body h6:hover .anchor .octicon-link {
  visibility: visible;
}

.markdown-body {
  -ms-text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
  color: #24292e;
  line-height: 1.5;
  font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;
  font-size: 16px;
  line-height: 1.5;
  word-wrap: break-word;
}

.markdown-body .pl-c {
  color: #6a737d;
}

.markdown-body .pl-c1,
.markdown-body .pl-s .pl-v {
  color: #005cc5;
}

.markdown-body .pl-e,
.markdown-body .pl-en {
  color: #6f42c1;
}

.markdown-body .pl-s .pl-s1,
.markdown-body .pl-smi {
  color: #24292e;
}

.markdown-body .pl-ent {
  color: #22863a;
}

.markdown-body .pl-k {
  color: #d73a49;
}

.markdown-body .pl-pds,
.markdown-body .pl-s,
.markdown-body .pl-s .pl-pse .pl-s1,
.markdown-body .pl-sr,
.markdown-body .pl-sr .pl-cce,
.markdown-body .pl-sr .pl-sra,
.markdown-body .pl-sr .pl-sre {
  color: #032f62;
}

.markdown-body .pl-smw,
.markdown-body .pl-v {
  color: #e36209;
}

.markdown-body .pl-bu {
  color: #b31d28;
}

.markdown-body .pl-ii {
  background-color: #b31d28;
  color: #fafbfc;
}

.markdown-body .pl-c2 {
  background-color: #d73a49;
  color: #fafbfc;
}

.markdown-body .pl-c2:before {
  content: "^M";
}

.markdown-body .pl-sr .pl-cce {
  color: #22863a;
  font-weight: 700;
}

.markdown-body .pl-ml {
  color: #735c0f;
}

.markdown-body .pl-mh,
.markdown-body .pl-mh .pl-en,
.markdown-body .pl-ms {
  color: #005cc5;
  font-weight: 700;
}

.markdown-body .pl-mi {
  color: #24292e;
  font-style: italic;
}

.markdown-body .pl-mb {
  color: #24292e;
  font-weight: 700;
}

.markdown-body .pl-md {
  background-color: #ffeef0;
  color: #b31d28;
}

.markdown-body .pl-mi1 {
  background-color: #f0fff4;
  color: #22863a;
}

.markdown-body .pl-mc {
  background-color: #ffebda;
  color: #e36209;
}

.markdown-body .pl-mi2 {
  background-color: #005cc5;
  color: #f6f8fa;
}

.markdown-body .pl-mdr {
  color: #6f42c1;
  font-weight: 700;
}

.markdown-body .pl-ba {
  color: #586069;
}

.markdown-body .pl-sg {
  color: #959da5;
}

.markdown-body .pl-corl {
  color: #032f62;
  text-decoration: underline;
}

.markdown-body details {
  display: block;
}

.markdown-body summary {
  display: list-item;
}

.markdown-body a {
  background-color: transparent;
}

.markdown-body a:active,
.markdown-body a:hover {
  outline-width: 0;
}

.markdown-body strong {
  font-weight: inherit;
  font-weight: bolder;
}

.markdown-body h1 {
  font-size: 2em;
  margin: .67em 0;
}

.markdown-body img {
  border-style: none;
}

.markdown-body code,
.markdown-body kbd,
.markdown-body pre {
  font-family: monospace,monospace;
  font-size: 1em;
}

.markdown-body hr {
  box-sizing: content-box;
  height: 0;
  overflow: visible;
}

.markdown-body input {
  font: inherit;
  margin: 0;
}

.markdown-body input {
  overflow: visible;
}

.markdown-body [type=checkbox] {
  box-sizing: border-box;
  padding: 0;
}

.markdown-body * {
  box-sizing: border-box;
}

.markdown-body input {
  font-family: inherit;
  font-size: inherit;
  line-height: inherit;
}

.markdown-body a {
  color: #0366d6;
  text-decoration: none;
}

.markdown-body a:hover {
  text-decoration: underline;
}

.markdown-body strong {
  font-weight: 600;
}

.markdown-body hr {
  background: transparent;
  border: 0;
  border-bottom: 1px solid #dfe2e5;
  height: 0;
  margin: 15px 0;
  overflow: hidden;
}

.markdown-body hr:before {
  content: "";
  display: table;
}

.markdown-body hr:after {
  clear: both;
  content: "";
  display: table;
}

.markdown-body table {
  border-collapse: collapse;
  border-spacing: 0;
}

.markdown-body td,
.markdown-body th {
  padding: 0;
}

.markdown-body details summary {
  cursor: pointer;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  margin-bottom: 0;
  margin-top: 0;
}

.markdown-body h1 {
  font-size: 32px;
}

.markdown-body h1,
.markdown-body h2 {
  font-weight: 600;
}

.markdown-body h2 {
  font-size: 24px;
}

.markdown-body h3 {
  font-size: 20px;
}

.markdown-body h3,
.markdown-body h4 {
  font-weight: 600;
}

.markdown-body h4 {
  font-size: 16px;
}

.markdown-body h5 {
  font-size: 14px;
}

.markdown-body h5,
.markdown-body h6 {
  font-weight: 600;
}

.markdown-body h6 {
  font-size: 12px;
}

.markdown-body p {
  margin-bottom: 10px;
  margin-top: 0;
}

.markdown-body blockquote {
  margin: 0;
}

.markdown-body ol,
.markdown-body ul {
  margin-bottom: 0;
  margin-top: 0;
  padding-left: 0;
}

.markdown-body ol ol,
.markdown-body ul ol {
  list-style-type: lower-roman;
}

.markdown-body ol ol ol,
.markdown-body ol ul ol,
.markdown-body ul ol ol,
.markdown-body ul ul ol {
  list-style-type: lower-alpha;
}

.markdown-body dd {
  margin-left: 0;
}

.markdown-body code,
.markdown-body pre {
  font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;
  font-size: 12px;
}

.markdown-body pre {
  margin-bottom: 0;
  margin-top: 0;
}

.markdown-body input::-webkit-inner-spin-button,
.markdown-body input::-webkit-outer-spin-button {
  -webkit-appearance: none;
  appearance: none;
  margin: 0;
}

.markdown-body .border {
  border: 1px solid #e1e4e8!important;
}

.markdown-body .border-0 {
  border: 0!important;
}

.markdown-body .border-bottom {
  border-bottom: 1px solid #e1e4e8!important;
}

.markdown-body .rounded-1 {
  border-radius: 3px!important;
}

.markdown-body .bg-white {
  background-color: #fff!important;
}

.markdown-body .bg-gray-light {
  background-color: #fafbfc!important;
}

.markdown-body .text-gray-light {
  color: #6a737d!important;
}

.markdown-body .mb-0 {
  margin-bottom: 0!important;
}

.markdown-body .my-2 {
  margin-bottom: 8px!important;
  margin-top: 8px!important;
}

.markdown-body .pl-0 {
  padding-left: 0!important;
}

.markdown-body .py-0 {
  padding-bottom: 0!important;
  padding-top: 0!important;
}

.markdown-body .pl-1 {
  padding-left: 4px!important;
}

.markdown-body .pl-2 {
  padding-left: 8px!important;
}

.markdown-body .py-2 {
  padding-bottom: 8px!important;
  padding-top: 8px!important;
}

.markdown-body .pl-3,
.markdown-body .px-3 {
  padding-left: 16px!important;
}

.markdown-body .px-3 {
  padding-right: 16px!important;
}

.markdown-body .pl-4 {
  padding-left: 24px!important;
}

.markdown-body .pl-5 {
  padding-left: 32px!important;
}

.markdown-body .pl-6 {
  padding-left: 40px!important;
}

.markdown-body .f6 {
  font-size: 12px!important;
}

.markdown-body .lh-condensed {
  line-height: 1.25!important;
}

.markdown-body .text-bold {
  font-weight: 600!important;
}

.markdown-body:before {
  content: "";
  display: table;
}

.markdown-body:after {
  clear: both;
  content: "";
  display: table;
}

.markdown-body>:first-child {
  margin-top: 0!important;
}

.markdown-body>:last-child {
  margin-bottom: 0!important;
}

.markdown-body a:not([href]) {
  color: inherit;
  text-decoration: none;
}

.markdown-body blockquote,
.markdown-body dl,
.markdown-body ol,
.markdown-body p,
.markdown-body pre,
.markdown-body table,
.markdown-body ul {
  margin-bottom: 16px;
  margin-top: 0;
}

.markdown-body hr {
  background-color: #e1e4e8;
  border: 0;
  height: .25em;
  margin: 24px 0;
  padding: 0;
}

.markdown-body blockquote {
  border-left: .25em solid #dfe2e5;
  color: #6a737d;
  padding: 0 1em;
}

.markdown-body blockquote>:first-child {
  margin-top: 0;
}

.markdown-body blockquote>:last-child {
  margin-bottom: 0;
}

.markdown-body kbd {
  background-color: #fafbfc;
  border: 1px solid #c6cbd1;
  border-bottom-color: #959da5;
  border-radius: 3px;
  box-shadow: inset 0 -1px 0 #959da5;
  color: #444d56;
  display: inline-block;
  font-size: 11px;
  line-height: 10px;
  padding: 3px 5px;
  vertical-align: middle;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  font-weight: 600;
  line-height: 1.25;
  margin-bottom: 16px;
  margin-top: 24px;
}

.markdown-body h1 {
  font-size: 2em;
}

.markdown-body h1,
.markdown-body h2 {
  border-bottom: 1px solid #eaecef;
  padding-bottom: .3em;
}

.markdown-body h2 {
  font-size: 1.5em;
}

.markdown-body h3 {
  font-size: 1.25em;
}

.markdown-body h4 {
  font-size: 1em;
}

.markdown-body h5 {
  font-size: .875em;
}

.markdown-body h6 {
  color: #6a737d;
  font-size: .85em;
}

.markdown-body ol,
.markdown-body ul {
  padding-left: 2em;
}

.markdown-body ol ol,
.markdown-body ol ul,
.markdown-body ul ol,
.markdown-body ul ul {
  margin-bottom: 0;
  margin-top: 0;
}

.markdown-body li {
  word-wrap: break-all;
}

.markdown-body li>p {
  margin-top: 16px;
}

.markdown-body li+li {
  margin-top: .25em;
}

.markdown-body dl {
  padding: 0;
}

.markdown-body dl dt {
  font-size: 1em;
  font-style: italic;
  font-weight: 600;
  margin-top: 16px;
  padding: 0;
}

.markdown-body dl dd {
  margin-bottom: 16px;
  padding: 0 16px;
}

.markdown-body table {
  display: block;
  overflow: auto;
  width: 100%;
}

.markdown-body table th {
  font-weight: 600;
}

.markdown-body table td,
.markdown-body table th {
  border: 1px solid #dfe2e5;
  padding: 6px 13px;
}

.markdown-body table tr {
  background-color: #fff;
  border-top: 1px solid #c6cbd1;
}

.markdown-body table tr:nth-child(2n) {
  background-color: #f6f8fa;
}

.markdown-body img {
  background-color: #fff;
  box-sizing: content-box;
  max-width: 100%;
}

.markdown-body img[align=right] {
  padding-left: 20px;
}

.markdown-body img[align=left] {
  padding-right: 20px;
}

.markdown-body code {
  background-color: rgba(27,31,35,.05);
  border-radius: 3px;
  font-size: 85%;
  margin: 0;
  padding: .2em .4em;
}

.markdown-body pre {
  word-wrap: normal;
}

.markdown-body pre>code {
  background: transparent;
  border: 0;
  font-size: 100%;
  margin: 0;
  padding: 0;
  white-space: pre;
  word-break: normal;
}

.markdown-body .highlight {
  margin-bottom: 16px;
}

.markdown-body .highlight pre {
  margin-bottom: 0;
  word-break: normal;
}

.markdown-body .highlight pre,
.markdown-body pre {
  background-color: #f6f8fa;
  border-radius: 3px;
  font-size: 85%;
  line-height: 1.45;
  overflow: auto;
  padding: 16px;
}

.markdown-body pre code {
  background-color: transparent;
  border: 0;
  display: inline;
  line-height: inherit;
  margin: 0;
  max-width: auto;
  overflow: visible;
  padding: 0;
  word-wrap: normal;
}

.markdown-body .commit-tease-sha {
  color: #444d56;
  display: inline-block;
  font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;
  font-size: 90%;
}

.markdown-body .blob-wrapper {
  border-bottom-left-radius: 3px;
  border-bottom-right-radius: 3px;
  overflow-x: auto;
  overflow-y: hidden;
}

.markdown-body .blob-wrapper-embedded {
  max-height: 240px;
  overflow-y: auto;
}

.markdown-body .blob-num {
  -moz-user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  color: rgba(27,31,35,.3);
  cursor: pointer;
  font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;
  font-size: 12px;
  line-height: 20px;
  min-width: 50px;
  padding-left: 10px;
  padding-right: 10px;
  text-align: right;
  user-select: none;
  vertical-align: top;
  white-space: nowrap;
  width: 1%;
}

.markdown-body .blob-num:hover {
  color: rgba(27,31,35,.6);
}

.markdown-body .blob-num:before {
  content: attr(data-line-number);
}

.markdown-body .blob-code {
  line-height: 20px;
  padding-left: 10px;
  padding-right: 10px;
  position: relative;
  vertical-align: top;
}

.markdown-body .blob-code-inner {
  color: #24292e;
  font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;
  font-size: 12px;
  overflow: visible;
  white-space: pre;
  word-wrap: normal;
}

.markdown-body .pl-token.active,
.markdown-body .pl-token:hover {
  background: #ffea7f;
  cursor: pointer;
}

.markdown-body kbd {
  background-color: #fafbfc;
  border: 1px solid #d1d5da;
  border-bottom-color: #c6cbd1;
  border-radius: 3px;
  box-shadow: inset 0 -1px 0 #c6cbd1;
  color: #444d56;
  display: inline-block;
  font: 11px SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;
  line-height: 10px;
  padding: 3px 5px;
  vertical-align: middle;
}

.markdown-body :checked+.radio-label {
  border-color: #0366d6;
  position: relative;
  z-index: 1;
}

.markdown-body .tab-size[data-tab-size="1"] {
  -moz-tab-size: 1;
  tab-size: 1;
}

.markdown-body .tab-size[data-tab-size="2"] {
  -moz-tab-size: 2;
  tab-size: 2;
}

.markdown-body .tab-size[data-tab-size="3"] {
  -moz-tab-size: 3;
  tab-size: 3;
}

.markdown-body .tab-size[data-tab-size="4"] {
  -moz-tab-size: 4;
  tab-size: 4;
}

.markdown-body .tab-size[data-tab-size="5"] {
  -moz-tab-size: 5;
  tab-size: 5;
}

.markdown-body .tab-size[data-tab-size="6"] {
  -moz-tab-size: 6;
  tab-size: 6;
}

.markdown-body .tab-size[data-tab-size="7"] {
  -moz-tab-size: 7;
  tab-size: 7;
}

.markdown-body .tab-size[data-tab-size="8"] {
  -moz-tab-size: 8;
  tab-size: 8;
}

.markdown-body .tab-size[data-tab-size="9"] {
  -moz-tab-size: 9;
  tab-size: 9;
}

.markdown-body .tab-size[data-tab-size="10"] {
  -moz-tab-size: 10;
  tab-size: 10;
}

.markdown-body .tab-size[data-tab-size="11"] {
  -moz-tab-size: 11;
  tab-size: 11;
}

.markdown-body .tab-size[data-tab-size="12"] {
  -moz-tab-size: 12;
  tab-size: 12;
}

.markdown-body .task-list-item {
  list-style-type: none;
}

.markdown-body .task-list-item+.task-list-item {
  margin-top: 3px;
}

.markdown-body .task-list-item input {
  margin: 0 .2em .25em -1.6em;
  vertical-align: middle;
}

.markdown-body hr {
  border-bottom-color: #eee;
}

.markdown-body .pl-0 {
  padding-left: 0!important;
}

.markdown-body .pl-1 {
  padding-left: 4px!important;
}

.markdown-body .pl-2 {
  padding-left: 8px!important;
}

.markdown-body .pl-3 {
  padding-left: 16px!important;
}

.markdown-body .pl-4 {
  padding-left: 24px!important;
}

.markdown-body .pl-5 {
  padding-left: 32px!important;
}

.markdown-body .pl-6 {
  padding-left: 40px!important;
}

.markdown-body .pl-7 {
  padding-left: 48px!important;
}

.markdown-body .pl-8 {
  padding-left: 64px!important;
}

.markdown-body .pl-9 {
  padding-left: 80px!important;
}

.markdown-body .pl-10 {
  padding-left: 96px!important;
}

.markdown-body .pl-11 {
  padding-left: 112px!important;
}

.markdown-body .pl-12 {
  padding-left: 128px!important;
}

/*# sourceURL=webpack://./node_modules/github-markdown-css/github-markdown.css */
/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL25vZGVfbW9kdWxlcy9naXRodWItbWFya2Rvd24tY3NzL2dpdGh1Yi1tYXJrZG93bi5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSwwQkFBMEI7RUFDMUIsMkRBQXF0RTtBQUN2dEU7O0FBRUE7RUFDRSxxQkFBcUI7RUFDckIsa0JBQWtCO0VBQ2xCLDJCQUEyQjtBQUM3Qjs7QUFFQTtFQUNFLFdBQVc7RUFDWCxjQUFjO0VBQ2Qsa0JBQWtCO0VBQ2xCLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGFBQWE7QUFDZjs7QUFFQTs7Ozs7O0VBTUUsY0FBYztFQUNkLHNCQUFzQjtFQUN0QixrQkFBa0I7QUFDcEI7O0FBRUE7Ozs7OztFQU1FLHFCQUFxQjtBQUN2Qjs7QUFFQTs7Ozs7O0VBTUUsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsMEJBQTBCO0VBQzFCLDhCQUE4QjtFQUM5QixjQUFjO0VBQ2QsZ0JBQWdCO0VBQ2hCLGtJQUFrSTtFQUNsSSxlQUFlO0VBQ2YsZ0JBQWdCO0VBQ2hCLHFCQUFxQjtBQUN2Qjs7QUFFQTtFQUNFLGNBQWM7QUFDaEI7O0FBRUE7O0VBRUUsY0FBYztBQUNoQjs7QUFFQTs7RUFFRSxjQUFjO0FBQ2hCOztBQUVBOztFQUVFLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsY0FBYztBQUNoQjs7QUFFQTs7Ozs7OztFQU9FLGNBQWM7QUFDaEI7O0FBRUE7O0VBRUUsY0FBYztBQUNoQjs7QUFFQTtFQUNFLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSx5QkFBeUI7RUFDekIsY0FBYztBQUNoQjs7QUFFQTtFQUNFLHlCQUF5QjtFQUN6QixjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsYUFBYTtBQUNmOztBQUVBO0VBQ0UsY0FBYztFQUNkLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLGNBQWM7QUFDaEI7O0FBRUE7OztFQUdFLGNBQWM7RUFDZCxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFD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 */
  </style>
  <style>
  /**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
	color: black;
	background: none;
	text-shadow: 0 1px white;
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	font-size: 1em;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
	text-shadow: none;
	background: #b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
	text-shadow: none;
	background: #b3d4fc;
}

@media print {
	code[class*="language-"],
	pre[class*="language-"] {
		text-shadow: none;
	}
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #f5f2f0;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #999;
}

.token.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
	color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
	color: #9a6e3a;
	/* This background color was intended by the author of this theme. */
	background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
	color: #07a;
}

.token.function,
.token.class-name {
	color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
	color: #e90;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}

/*# sourceURL=webpack://./node_modules/prismjs/themes/prism.css */
/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL25vZGVfbW9kdWxlcy9wcmlzbWpzL3RoZW1lcy9wcmlzbS5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7RUFJRTs7QUFFRjs7Q0FFQyxZQUFZO0NBQ1osZ0JBQWdCO0NBQ2hCLHdCQUF3QjtDQUN4QixzRUFBc0U7Q0FDdEUsY0FBYztDQUNkLGdCQUFnQjtDQUNoQixnQkFBZ0I7Q0FDaEIsb0JBQW9CO0NBQ3BCLGtCQUFrQjtDQUNsQixpQkFBaUI7Q0FDakIsZ0JBQWdCOztDQUVoQixnQkFBZ0I7Q0FDaEIsY0FBYztDQUNkLFdBQVc7O0NBRVgscUJBQXFCO0NBQ3JCLGtCQUFrQjtDQUNsQixpQkFBaUI7Q0FDakIsYUFBYTtBQUNkOztBQUVBOztDQUVDLGlCQUFpQjtDQUNqQixtQkFBbUI7QUFDcEI7O0FBRUE7O0NBRUMsaUJBQWlCO0NBQ2pCLG1CQUFtQjtBQUNwQjs7QUFFQTtDQUNDOztFQUVDLGlCQUFpQjtDQUNsQjtBQUNEOztBQUVBLGdCQUFnQjtBQUNoQjtDQUNDLFlBQVk7Q0FDWixjQUFjO0NBQ2QsY0FBYztBQUNmOztBQUVBOztDQUVDLG1CQUFtQjtBQUNwQjs7QUFFQSxnQkFBZ0I7QUFDaEI7Q0FDQyxhQUFhO0NBQ2IsbUJBQW1CO0NBQ25CLG1CQUFtQjtBQUNwQjs7QUFFQTs7OztDQUlDLGdCQUFnQjtBQUNqQjs7QUFFQTtDQUNDLFdBQVc7QUFDWjs7QUFFQTtDQUNDLFdBQVc7QUFDWjs7QUFFQTs7Ozs7OztDQU9DLFdBQVc7QUFDWjs7QUFFQTs7Ozs7O0NBTUMsV0FBVztBQUNaOztBQUVBOzs7OztDQUtDLGNBQWM7Q0FDZCxvRUFBb0U7Q0FDcEUsaUNBQWlDO0FBQ2xDOztBQUVBOzs7Q0FHQyxXQUFXO0FBQ1o7O0FBRUE7O0NBRUMsY0FBYztBQUNmOztBQUVBOzs7Q0FHQyxXQUFXO0FBQ1o7O0FBRUE7O0NBRUMsaUJBQWlCO0FBQ2xCO0FBQ0E7Q0FDQyxrQkFBa0I7QUFDbkI7O0FBRUE7Q0FDQyxZQUFZO0FBQ2IiLCJzb3VyY2VSb290IjoiIn0= */
  </style>
  <style>
  /* stylelint-disable font-family-no-missing-generic-family-keyword */
@font-face {
  font-family: 'KaTeX_AMS';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_AMS-Regular.73ea273a.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_AMS-Regular.d562e886.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_AMS-Regular.853be924.ttf) format('truetype');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Caligraphic';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Caligraphic-Bold.a1abf90d.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Caligraphic-Bold.d757c535.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Caligraphic-Bold.7489a2fb.ttf) format('truetype');
  font-weight: bold;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Caligraphic';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Caligraphic-Regular.d6484fce.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Caligraphic-Regular.db074fa2.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Caligraphic-Regular.7e873d38.ttf) format('truetype');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Fraktur';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Fraktur-Bold.931d67ea.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Fraktur-Bold.354501ba.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Fraktur-Bold.4c761b37.ttf) format('truetype');
  font-weight: bold;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Fraktur';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Fraktur-Regular.172d3529.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Fraktur-Regular.6fdf0ac5.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Fraktur-Regular.ed305b54.ttf) format('truetype');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Main';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Main-Bold.39890742.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Main-Bold.0c3b8929.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Main-Bold.8169508b.ttf) format('truetype');
  font-weight: bold;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Main';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Main-BoldItalic.20f389c4.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Main-BoldItalic.428978dc.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Main-BoldItalic.828abcb2.ttf) format('truetype');
  font-weight: bold;
  font-style: italic;
}
@font-face {
  font-family: 'KaTeX_Main';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Main-Italic.fe2176f7.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Main-Italic.fd947498.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Main-Italic.fa675e5e.ttf) format('truetype');
  font-weight: normal;
  font-style: italic;
}
@font-face {
  font-family: 'KaTeX_Main';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Main-Regular.f650f111.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Main-Regular.4f35fbcc.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Main-Regular.9eba1d77.ttf) format('truetype');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Math';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Math-BoldItalic.dcbcbd93.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Math-BoldItalic.3f07ed67.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Math-BoldItalic.bf2d440b.ttf) format('truetype');
  font-weight: bold;
  font-style: italic;
}
@font-face {
  font-family: 'KaTeX_Math';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Math-Italic.6d3d25f4.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Math-Italic.96759856.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Math-Italic.8a5f9363.ttf) format('truetype');
  font-weight: normal;
  font-style: italic;
}
@font-face {
  font-family: 'KaTeX_SansSerif';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_SansSerif-Bold.95591a92.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_SansSerif-Bold.b9cd458a.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_SansSerif-Bold.5b49f499.ttf) format('truetype');
  font-weight: bold;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_SansSerif';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_SansSerif-Italic.7d393d38.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_SansSerif-Italic.8d593cfa.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_SansSerif-Italic.b257a18c.ttf) format('truetype');
  font-weight: normal;
  font-style: italic;
}
@font-face {
  font-family: 'KaTeX_SansSerif';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_SansSerif-Regular.cd5e231e.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_SansSerif-Regular.02271ec5.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_SansSerif-Regular.2f7bc363.ttf) format('truetype');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Script';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Script-Regular.c81d1b2a.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Script-Regular.073b3402.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Script-Regular.fc9ba524.ttf) format('truetype');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Size1';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Size1-Regular.6eec866c.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Size1-Regular.0108e89c.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Size1-Regular.6de7d4b5.ttf) format('truetype');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Size2';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Size2-Regular.2960900c.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Size2-Regular.3a99e70a.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Size2-Regular.57f5c183.ttf) format('truetype');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Size3';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Size3-Regular.e1951519.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Size3-Regular.7947224e.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Size3-Regular.8d6b6822.ttf) format('truetype');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Size4';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Size4-Regular.e418bf25.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Size4-Regular.aeffd802.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Size4-Regular.4ad7c7e8.ttf) format('truetype');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Typewriter';
  src: url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Typewriter-Regular.c295e7f7.woff2) format('woff2'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Typewriter-Regular.4c6b94fd.woff) format('woff'), url(file:///C:/Users/fnae/AppData/Local/Programs/MarkText/resources/app.asar/dist/electron/fonts/KaTeX_Typewriter-Regular.c5c02d76.ttf) format('truetype');
  font-weight: normal;
  font-style: normal;
}
.katex {
  font: normal 1.21em KaTeX_Main, Times New Roman, serif;
  line-height: 1.2;
  text-indent: 0;
  text-rendering: auto;
}
.katex * {
  -ms-high-contrast-adjust: none !important;
  border-color: currentColor;
}
.katex .katex-version::after {
  content: "0.15.2";
}
.katex .katex-mathml {
  /* Accessibility hack to only show to screen readers
         Found at: http://a11yproject.com/posts/how-to-hide-content/ */
  position: absolute;
  clip: rect(1px, 1px, 1px, 1px);
  padding: 0;
  border: 0;
  height: 1px;
  width: 1px;
  overflow: hidden;
}
.katex .katex-html {
  /* \newline is an empty block at top level, between .base elements */
}
.katex .katex-html > .newline {
  display: block;
}
.katex .base {
  position: relative;
  display: inline-block;
  white-space: nowrap;
  width: -webkit-min-content;
  width: -moz-min-content;
  width: min-content;
}
.katex .strut {
  display: inline-block;
}
.katex .textbf {
  font-weight: bold;
}
.katex .textit {
  font-style: italic;
}
.katex .textrm {
  font-family: KaTeX_Main;
}
.katex .textsf {
  font-family: KaTeX_SansSerif;
}
.katex .texttt {
  font-family: KaTeX_Typewriter;
}
.katex .mathnormal {
  font-family: KaTeX_Math;
  font-style: italic;
}
.katex .mathit {
  font-family: KaTeX_Main;
  font-style: italic;
}
.katex .mathrm {
  font-style: normal;
}
.katex .mathbf {
  font-family: KaTeX_Main;
  font-weight: bold;
}
.katex .boldsymbol {
  font-family: KaTeX_Math;
  font-weight: bold;
  font-style: italic;
}
.katex .amsrm {
  font-family: KaTeX_AMS;
}
.katex .mathbb,
.katex .textbb {
  font-family: KaTeX_AMS;
}
.katex .mathcal {
  font-family: KaTeX_Caligraphic;
}
.katex .mathfrak,
.katex .textfrak {
  font-family: KaTeX_Fraktur;
}
.katex .mathtt {
  font-family: KaTeX_Typewriter;
}
.katex .mathscr,
.katex .textscr {
  font-family: KaTeX_Script;
}
.katex .mathsf,
.katex .textsf {
  font-family: KaTeX_SansSerif;
}
.katex .mathboldsf,
.katex .textboldsf {
  font-family: KaTeX_SansSerif;
  font-weight: bold;
}
.katex .mathitsf,
.katex .textitsf {
  font-family: KaTeX_SansSerif;
  font-style: italic;
}
.katex .mainrm {
  font-family: KaTeX_Main;
  font-style: normal;
}
.katex .vlist-t {
  display: inline-table;
  table-layout: fixed;
  border-collapse: collapse;
}
.katex .vlist-r {
  display: table-row;
}
.katex .vlist {
  display: table-cell;
  vertical-align: bottom;
  position: relative;
}
.katex .vlist > span {
  display: block;
  height: 0;
  position: relative;
}
.katex .vlist > span > span {
  display: inline-block;
}
.katex .vlist > span > .pstrut {
  overflow: hidden;
  width: 0;
}
.katex .vlist-t2 {
  margin-right: -2px;
}
.katex .vlist-s {
  display: table-cell;
  vertical-align: bottom;
  font-size: 1px;
  width: 2px;
  min-width: 2px;
}
.katex .vbox {
  display: inline-flex;
  flex-direction: column;
  align-items: baseline;
}
.katex .hbox {
  display: inline-flex;
  flex-direction: row;
  width: 100%;
}
.katex .thinbox {
  display: inline-flex;
  flex-direction: row;
  width: 0;
  max-width: 0;
}
.katex .msupsub {
  text-align: left;
}
.katex .mfrac > span > span {
  text-align: center;
}
.katex .mfrac .frac-line {
  display: inline-block;
  width: 100%;
  border-bottom-style: solid;
}
.katex .mfrac .frac-line,
.katex .overline .overline-line,
.katex .underline .underline-line,
.katex .hline,
.katex .hdashline,
.katex .rule {
  min-height: 1px;
}
.katex .mspace {
  display: inline-block;
}
.katex .llap,
.katex .rlap,
.katex .clap {
  width: 0;
  position: relative;
}
.katex .llap > .inner,
.katex .rlap > .inner,
.katex .clap > .inner {
  position: absolute;
}
.katex .llap > .fix,
.katex .rlap > .fix,
.katex .clap > .fix {
  display: inline-block;
}
.katex .llap > .inner {
  right: 0;
}
.katex .rlap > .inner,
.katex .clap > .inner {
  left: 0;
}
.katex .clap > .inner > span {
  margin-left: -50%;
  margin-right: 50%;
}
.katex .rule {
  display: inline-block;
  border: solid 0;
  position: relative;
}
.katex .overline .overline-line,
.katex .underline .underline-line,
.katex .hline {
  display: inline-block;
  width: 100%;
  border-bottom-style: solid;
}
.katex .hdashline {
  display: inline-block;
  width: 100%;
  border-bottom-style: dashed;
}
.katex .sqrt > .root {
  /* These values are taken from the definition of `\r@@t`,
             `\mkern 5mu` and `\mkern -10mu`. */
  margin-left: 0.27777778em;
  margin-right: -0.55555556em;
}
.katex .sizing.reset-size1.size1,
.katex .fontsize-ensurer.reset-size1.size1 {
  font-size: 1em;
}
.katex .sizing.reset-size1.size2,
.katex .fontsize-ensurer.reset-size1.size2 {
  font-size: 1.2em;
}
.katex .sizing.reset-size1.size3,
.katex .fontsize-ensurer.reset-size1.size3 {
  font-size: 1.4em;
}
.katex .sizing.reset-size1.size4,
.katex .fontsize-ensurer.reset-size1.size4 {
  font-size: 1.6em;
}
.katex .sizing.reset-size1.size5,
.katex .fontsize-ensurer.reset-size1.size5 {
  font-size: 1.8em;
}
.katex .sizing.reset-size1.size6,
.katex .fontsize-ensurer.reset-size1.size6 {
  font-size: 2em;
}
.katex .sizing.reset-size1.size7,
.katex .fontsize-ensurer.reset-size1.size7 {
  font-size: 2.4em;
}
.katex .sizing.reset-size1.size8,
.katex .fontsize-ensurer.reset-size1.size8 {
  font-size: 2.88em;
}
.katex .sizing.reset-size1.size9,
.katex .fontsize-ensurer.reset-size1.size9 {
  font-size: 3.456em;
}
.katex .sizing.reset-size1.size10,
.katex .fontsize-ensurer.reset-size1.size10 {
  font-size: 4.148em;
}
.katex .sizing.reset-size1.size11,
.katex .fontsize-ensurer.reset-size1.size11 {
  font-size: 4.976em;
}
.katex .sizing.reset-size2.size1,
.katex .fontsize-ensurer.reset-size2.size1 {
  font-size: 0.83333333em;
}
.katex .sizing.reset-size2.size2,
.katex .fontsize-ensurer.reset-size2.size2 {
  font-size: 1em;
}
.katex .sizing.reset-size2.size3,
.katex .fontsize-ensurer.reset-size2.size3 {
  font-size: 1.16666667em;
}
.katex .sizing.reset-size2.size4,
.katex .fontsize-ensurer.reset-size2.size4 {
  font-size: 1.33333333em;
}
.katex .sizing.reset-size2.size5,
.katex .fontsize-ensurer.reset-size2.size5 {
  font-size: 1.5em;
}
.katex .sizing.reset-size2.size6,
.katex .fontsize-ensurer.reset-size2.size6 {
  font-size: 1.66666667em;
}
.katex .sizing.reset-size2.size7,
.katex .fontsize-ensurer.reset-size2.size7 {
  font-size: 2em;
}
.katex .sizing.reset-size2.size8,
.katex .fontsize-ensurer.reset-size2.size8 {
  font-size: 2.4em;
}
.katex .sizing.reset-size2.size9,
.katex .fontsize-ensurer.reset-size2.size9 {
  font-size: 2.88em;
}
.katex .sizing.reset-size2.size10,
.katex .fontsize-ensurer.reset-size2.size10 {
  font-size: 3.45666667em;
}
.katex .sizing.reset-size2.size11,
.katex .fontsize-ensurer.reset-size2.size11 {
  font-size: 4.14666667em;
}
.katex .sizing.reset-size3.size1,
.katex .fontsize-ensurer.reset-size3.size1 {
  font-size: 0.71428571em;
}
.katex .sizing.reset-size3.size2,
.katex .fontsize-ensurer.reset-size3.size2 {
  font-size: 0.85714286em;
}
.katex .sizing.reset-size3.size3,
.katex .fontsize-ensurer.reset-size3.size3 {
  font-size: 1em;
}
.katex .sizing.reset-size3.size4,
.katex .fontsize-ensurer.reset-size3.size4 {
  font-size: 1.14285714em;
}
.katex .sizing.reset-size3.size5,
.katex .fontsize-ensurer.reset-size3.size5 {
  font-size: 1.28571429em;
}
.katex .sizing.reset-size3.size6,
.katex .fontsize-ensurer.reset-size3.size6 {
  font-size: 1.42857143em;
}
.katex .sizing.reset-size3.size7,
.katex .fontsize-ensurer.reset-size3.size7 {
  font-size: 1.71428571em;
}
.katex .sizing.reset-size3.size8,
.katex .fontsize-ensurer.reset-size3.size8 {
  font-size: 2.05714286em;
}
.katex .sizing.reset-size3.size9,
.katex .fontsize-ensurer.reset-size3.size9 {
  font-size: 2.46857143em;
}
.katex .sizing.reset-size3.size10,
.katex .fontsize-ensurer.reset-size3.size10 {
  font-size: 2.96285714em;
}
.katex .sizing.reset-size3.size11,
.katex .fontsize-ensurer.reset-size3.size11 {
  font-size: 3.55428571em;
}
.katex .sizing.reset-size4.size1,
.katex .fontsize-ensurer.reset-size4.size1 {
  font-size: 0.625em;
}
.katex .sizing.reset-size4.size2,
.katex .fontsize-ensurer.reset-size4.size2 {
  font-size: 0.75em;
}
.katex .sizing.reset-size4.size3,
.katex .fontsize-ensurer.reset-size4.size3 {
  font-size: 0.875em;
}
.katex .sizing.reset-size4.size4,
.katex .fontsize-ensurer.reset-size4.size4 {
  font-size: 1em;
}
.katex .sizing.reset-size4.size5,
.katex .fontsize-ensurer.reset-size4.size5 {
  font-size: 1.125em;
}
.katex .sizing.reset-size4.size6,
.katex .fontsize-ensurer.reset-size4.size6 {
  font-size: 1.25em;
}
.katex .sizing.reset-size4.size7,
.katex .fontsize-ensurer.reset-size4.size7 {
  font-size: 1.5em;
}
.katex .sizing.reset-size4.size8,
.katex .fontsize-ensurer.reset-size4.size8 {
  font-size: 1.8em;
}
.katex .sizing.reset-size4.size9,
.katex .fontsize-ensurer.reset-size4.size9 {
  font-size: 2.16em;
}
.katex .sizing.reset-size4.size10,
.katex .fontsize-ensurer.reset-size4.size10 {
  font-size: 2.5925em;
}
.katex .sizing.reset-size4.size11,
.katex .fontsize-ensurer.reset-size4.size11 {
  font-size: 3.11em;
}
.katex .sizing.reset-size5.size1,
.katex .fontsize-ensurer.reset-size5.size1 {
  font-size: 0.55555556em;
}
.katex .sizing.reset-size5.size2,
.katex .fontsize-ensurer.reset-size5.size2 {
  font-size: 0.66666667em;
}
.katex .sizing.reset-size5.size3,
.katex .fontsize-ensurer.reset-size5.size3 {
  font-size: 0.77777778em;
}
.katex .sizing.reset-size5.size4,
.katex .fontsize-ensurer.reset-size5.size4 {
  font-size: 0.88888889em;
}
.katex .sizing.reset-size5.size5,
.katex .fontsize-ensurer.reset-size5.size5 {
  font-size: 1em;
}
.katex .sizing.reset-size5.size6,
.katex .fontsize-ensurer.reset-size5.size6 {
  font-size: 1.11111111em;
}
.katex .sizing.reset-size5.size7,
.katex .fontsize-ensurer.reset-size5.size7 {
  font-size: 1.33333333em;
}
.katex .sizing.reset-size5.size8,
.katex .fontsize-ensurer.reset-size5.size8 {
  font-size: 1.6em;
}
.katex .sizing.reset-size5.size9,
.katex .fontsize-ensurer.reset-size5.size9 {
  font-size: 1.92em;
}
.katex .sizing.reset-size5.size10,
.katex .fontsize-ensurer.reset-size5.size10 {
  font-size: 2.30444444em;
}
.katex .sizing.reset-size5.size11,
.katex .fontsize-ensurer.reset-size5.size11 {
  font-size: 2.76444444em;
}
.katex .sizing.reset-size6.size1,
.katex .fontsize-ensurer.reset-size6.size1 {
  font-size: 0.5em;
}
.katex .sizing.reset-size6.size2,
.katex .fontsize-ensurer.reset-size6.size2 {
  font-size: 0.6em;
}
.katex .sizing.reset-size6.size3,
.katex .fontsize-ensurer.reset-size6.size3 {
  font-size: 0.7em;
}
.katex .sizing.reset-size6.size4,
.katex .fontsize-ensurer.reset-size6.size4 {
  font-size: 0.8em;
}
.katex .sizing.reset-size6.size5,
.katex .fontsize-ensurer.reset-size6.size5 {
  font-size: 0.9em;
}
.katex .sizing.reset-size6.size6,
.katex .fontsize-ensurer.reset-size6.size6 {
  font-size: 1em;
}
.katex .sizing.reset-size6.size7,
.katex .fontsize-ensurer.reset-size6.size7 {
  font-size: 1.2em;
}
.katex .sizing.reset-size6.size8,
.katex .fontsize-ensurer.reset-size6.size8 {
  font-size: 1.44em;
}
.katex .sizing.reset-size6.size9,
.katex .fontsize-ensurer.reset-size6.size9 {
  font-size: 1.728em;
}
.katex .sizing.reset-size6.size10,
.katex .fontsize-ensurer.reset-size6.size10 {
  font-size: 2.074em;
}
.katex .sizing.reset-size6.size11,
.katex .fontsize-ensurer.reset-size6.size11 {
  font-size: 2.488em;
}
.katex .sizing.reset-size7.size1,
.katex .fontsize-ensurer.reset-size7.size1 {
  font-size: 0.41666667em;
}
.katex .sizing.reset-size7.size2,
.katex .fontsize-ensurer.reset-size7.size2 {
  font-size: 0.5em;
}
.katex .sizing.reset-size7.size3,
.katex .fontsize-ensurer.reset-size7.size3 {
  font-size: 0.58333333em;
}
.katex .sizing.reset-size7.size4,
.katex .fontsize-ensurer.reset-size7.size4 {
  font-size: 0.66666667em;
}
.katex .sizing.reset-size7.size5,
.katex .fontsize-ensurer.reset-size7.size5 {
  font-size: 0.75em;
}
.katex .sizing.reset-size7.size6,
.katex .fontsize-ensurer.reset-size7.size6 {
  font-size: 0.83333333em;
}
.katex .sizing.reset-size7.size7,
.katex .fontsize-ensurer.reset-size7.size7 {
  font-size: 1em;
}
.katex .sizing.reset-size7.size8,
.katex .fontsize-ensurer.reset-size7.size8 {
  font-size: 1.2em;
}
.katex .sizing.reset-size7.size9,
.katex .fontsize-ensurer.reset-size7.size9 {
  font-size: 1.44em;
}
.katex .sizing.reset-size7.size10,
.katex .fontsize-ensurer.reset-size7.size10 {
  font-size: 1.72833333em;
}
.katex .sizing.reset-size7.size11,
.katex .fontsize-ensurer.reset-size7.size11 {
  font-size: 2.07333333em;
}
.katex .sizing.reset-size8.size1,
.katex .fontsize-ensurer.reset-size8.size1 {
  font-size: 0.34722222em;
}
.katex .sizing.reset-size8.size2,
.katex .fontsize-ensurer.reset-size8.size2 {
  font-size: 0.41666667em;
}
.katex .sizing.reset-size8.size3,
.katex .fontsize-ensurer.reset-size8.size3 {
  font-size: 0.48611111em;
}
.katex .sizing.reset-size8.size4,
.katex .fontsize-ensurer.reset-size8.size4 {
  font-size: 0.55555556em;
}
.katex .sizing.reset-size8.size5,
.katex .fontsize-ensurer.reset-size8.size5 {
  font-size: 0.625em;
}
.katex .sizing.reset-size8.size6,
.katex .fontsize-ensurer.reset-size8.size6 {
  font-size: 0.69444444em;
}
.katex .sizing.reset-size8.size7,
.katex .fontsize-ensurer.reset-size8.size7 {
  font-size: 0.83333333em;
}
.katex .sizing.reset-size8.size8,
.katex .fontsize-ensurer.reset-size8.size8 {
  font-size: 1em;
}
.katex .sizing.reset-size8.size9,
.katex .fontsize-ensurer.reset-size8.size9 {
  font-size: 1.2em;
}
.katex .sizing.reset-size8.size10,
.katex .fontsize-ensurer.reset-size8.size10 {
  font-size: 1.44027778em;
}
.katex .sizing.reset-size8.size11,
.katex .fontsize-ensurer.reset-size8.size11 {
  font-size: 1.72777778em;
}
.katex .sizing.reset-size9.size1,
.katex .fontsize-ensurer.reset-size9.size1 {
  font-size: 0.28935185em;
}
.katex .sizing.reset-size9.size2,
.katex .fontsize-ensurer.reset-size9.size2 {
  font-size: 0.34722222em;
}
.katex .sizing.reset-size9.size3,
.katex .fontsize-ensurer.reset-size9.size3 {
  font-size: 0.40509259em;
}
.katex .sizing.reset-size9.size4,
.katex .fontsize-ensurer.reset-size9.size4 {
  font-size: 0.46296296em;
}
.katex .sizing.reset-size9.size5,
.katex .fontsize-ensurer.reset-size9.size5 {
  font-size: 0.52083333em;
}
.katex .sizing.reset-size9.size6,
.katex .fontsize-ensurer.reset-size9.size6 {
  font-size: 0.5787037em;
}
.katex .sizing.reset-size9.size7,
.katex .fontsize-ensurer.reset-size9.size7 {
  font-size: 0.69444444em;
}
.katex .sizing.reset-size9.size8,
.katex .fontsize-ensurer.reset-size9.size8 {
  font-size: 0.83333333em;
}
.katex .sizing.reset-size9.size9,
.katex .fontsize-ensurer.reset-size9.size9 {
  font-size: 1em;
}
.katex .sizing.reset-size9.size10,
.katex .fontsize-ensurer.reset-size9.size10 {
  font-size: 1.20023148em;
}
.katex .sizing.reset-size9.size11,
.katex .fontsize-ensurer.reset-size9.size11 {
  font-size: 1.43981481em;
}
.katex .sizing.reset-size10.size1,
.katex .fontsize-ensurer.reset-size10.size1 {
  font-size: 0.24108004em;
}
.katex .sizing.reset-size10.size2,
.katex .fontsize-ensurer.reset-size10.size2 {
  font-size: 0.28929605em;
}
.katex .sizing.reset-size10.size3,
.katex .fontsize-ensurer.reset-size10.size3 {
  font-size: 0.33751205em;
}
.katex .sizing.reset-size10.size4,
.katex .fontsize-ensurer.reset-size10.size4 {
  font-size: 0.38572806em;
}
.katex .sizing.reset-size10.size5,
.katex .fontsize-ensurer.reset-size10.size5 {
  font-size: 0.43394407em;
}
.katex .sizing.reset-size10.size6,
.katex .fontsize-ensurer.reset-size10.size6 {
  font-size: 0.48216008em;
}
.katex .sizing.reset-size10.size7,
.katex .fontsize-ensurer.reset-size10.size7 {
  font-size: 0.57859209em;
}
.katex .sizing.reset-size10.size8,
.katex .fontsize-ensurer.reset-size10.size8 {
  font-size: 0.69431051em;
}
.katex .sizing.reset-size10.size9,
.katex .fontsize-ensurer.reset-size10.size9 {
  font-size: 0.83317261em;
}
.katex .sizing.reset-size10.size10,
.katex .fontsize-ensurer.reset-size10.size10 {
  font-size: 1em;
}
.katex .sizing.reset-size10.size11,
.katex .fontsize-ensurer.reset-size10.size11 {
  font-size: 1.19961427em;
}
.katex .sizing.reset-size11.size1,
.katex .fontsize-ensurer.reset-size11.size1 {
  font-size: 0.20096463em;
}
.katex .sizing.reset-size11.size2,
.katex .fontsize-ensurer.reset-size11.size2 {
  font-size: 0.24115756em;
}
.katex .sizing.reset-size11.size3,
.katex .fontsize-ensurer.reset-size11.size3 {
  font-size: 0.28135048em;
}
.katex .sizing.reset-size11.size4,
.katex .fontsize-ensurer.reset-size11.size4 {
  font-size: 0.32154341em;
}
.katex .sizing.reset-size11.size5,
.katex .fontsize-ensurer.reset-size11.size5 {
  font-size: 0.36173633em;
}
.katex .sizing.reset-size11.size6,
.katex .fontsize-ensurer.reset-size11.size6 {
  font-size: 0.40192926em;
}
.katex .sizing.reset-size11.size7,
.katex .fontsize-ensurer.reset-size11.size7 {
  font-size: 0.48231511em;
}
.katex .sizing.reset-size11.size8,
.katex .fontsize-ensurer.reset-size11.size8 {
  font-size: 0.57877814em;
}
.katex .sizing.reset-size11.size9,
.katex .fontsize-ensurer.reset-size11.size9 {
  font-size: 0.69453376em;
}
.katex .sizing.reset-size11.size10,
.katex .fontsize-ensurer.reset-size11.size10 {
  font-size: 0.83360129em;
}
.katex .sizing.reset-size11.size11,
.katex .fontsize-ensurer.reset-size11.size11 {
  font-size: 1em;
}
.katex .delimsizing.size1 {
  font-family: KaTeX_Size1;
}
.katex .delimsizing.size2 {
  font-family: KaTeX_Size2;
}
.katex .delimsizing.size3 {
  font-family: KaTeX_Size3;
}
.katex .delimsizing.size4 {
  font-family: KaTeX_Size4;
}
.katex .delimsizing.mult .delim-size1 > span {
  font-family: KaTeX_Size1;
}
.katex .delimsizing.mult .delim-size4 > span {
  font-family: KaTeX_Size4;
}
.katex .nulldelimiter {
  display: inline-block;
  width: 0.12em;
}
.katex .delimcenter {
  position: relative;
}
.katex .op-symbol {
  position: relative;
}
.katex .op-symbol.small-op {
  font-family: KaTeX_Size1;
}
.katex .op-symbol.large-op {
  font-family: KaTeX_Size2;
}
.katex .op-limits > .vlist-t {
  text-align: center;
}
.katex .accent > .vlist-t {
  text-align: center;
}
.katex .accent .accent-body {
  position: relative;
}
.katex .accent .accent-body:not(.accent-full) {
  width: 0;
}
.katex .overlay {
  display: block;
}
.katex .mtable .vertical-separator {
  display: inline-block;
  min-width: 1px;
}
.katex .mtable .arraycolsep {
  display: inline-block;
}
.katex .mtable .col-align-c > .vlist-t {
  text-align: center;
}
.katex .mtable .col-align-l > .vlist-t {
  text-align: left;
}
.katex .mtable .col-align-r > .vlist-t {
  text-align: right;
}
.katex .svg-align {
  text-align: left;
}
.katex svg {
  display: block;
  position: absolute;
  width: 100%;
  height: inherit;
  fill: currentColor;
  stroke: currentColor;
  fill-rule: nonzero;
  fill-opacity: 1;
  stroke-width: 1;
  stroke-linecap: butt;
  stroke-linejoin: miter;
  stroke-miterlimit: 4;
  stroke-dasharray: none;
  stroke-dashoffset: 0;
  stroke-opacity: 1;
}
.katex svg path {
  stroke: none;
}
.katex img {
  border-style: none;
  min-width: 0;
  min-height: 0;
  max-width: none;
  max-height: none;
}
.katex .stretchy {
  width: 100%;
  display: block;
  position: relative;
  overflow: hidden;
}
.katex .stretchy::before,
.katex .stretchy::after {
  content: "";
}
.katex .hide-tail {
  width: 100%;
  position: relative;
  overflow: hidden;
}
.katex .halfarrow-left {
  position: absolute;
  left: 0;
  width: 50.2%;
  overflow: hidden;
}
.katex .halfarrow-right {
  position: absolute;
  right: 0;
  width: 50.2%;
  overflow: hidden;
}
.katex .brace-left {
  position: absolute;
  left: 0;
  width: 25.1%;
  overflow: hidden;
}
.katex .brace-center {
  position: absolute;
  left: 25%;
  width: 50%;
  overflow: hidden;
}
.katex .brace-right {
  position: absolute;
  right: 0;
  width: 25.1%;
  overflow: hidden;
}
.katex .x-arrow-pad {
  padding: 0 0.5em;
}
.katex .cd-arrow-pad {
  padding: 0 0.55556em 0 0.27778em;
}
.katex .x-arrow,
.katex .mover,
.katex .munder {
  text-align: center;
}
.katex .boxpad {
  padding: 0 0.3em;
}
.katex .fbox,
.katex .fcolorbox {
  box-sizing: border-box;
  border: 0.04em solid;
}
.katex .cancel-pad {
  padding: 0 0.2em;
}
.katex .cancel-lap {
  margin-left: -0.2em;
  margin-right: -0.2em;
}
.katex .sout {
  border-bottom-style: solid;
  border-bottom-width: 0.08em;
}
.katex .angl {
  box-sizing: border-box;
  border-top: 0.049em solid;
  border-right: 0.049em solid;
  margin-right: 0.03889em;
}
.katex .anglpad {
  padding: 0 0.03889em;
}
.katex .eqn-num::before {
  counter-increment: katexEqnNo;
  content: "(" counter(katexEqnNo) ")";
}
.katex .mml-eqn-num::before {
  counter-increment: mmlEqnNo;
  content: "(" counter(mmlEqnNo) ")";
}
.katex .mtr-glue {
  width: 50%;
}
.katex .cd-vert-arrow {
  display: inline-block;
  position: relative;
}
.katex .cd-label-left {
  display: inline-block;
  position: absolute;
  right: calc(50% + 0.3em);
  text-align: left;
}
.katex .cd-label-right {
  display: inline-block;
  position: absolute;
  left: calc(50% + 0.3em);
  text-align: right;
}
.katex-display {
  display: block;
  margin: 1em 0;
  text-align: center;
}
.katex-display > .katex {
  display: block;
  text-align: center;
  white-space: nowrap;
}
.katex-display > .katex > .katex-html {
  display: block;
  position: relative;
}
.katex-display > .katex > .katex-html > .tag {
  position: absolute;
  right: 0;
}
.katex-display.leqno > .katex > .katex-html > .tag {
  left: 0;
  right: auto;
}
.katex-display.fleqn > .katex {
  text-align: left;
  padding-left: 2em;
}
body {
  counter-reset: katexEqnNo mmlEqnNo;
}


/*# sourceURL=webpack://./node_modules/katex/dist/katex.css */
/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL25vZGVfbW9kdWxlcy9rYXRleC9kaXN0L2thdGV4LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvRUFBb0U7QUFDcEU7RUFDRSx3QkFBd0I7RUFDeEIsZ0xBQThKO0VBQzlKLG1CQUFtQjtFQUNuQixrQkFBa0I7QUFDcEI7QUFDQTtFQUNFLGdDQUFnQztFQUNoQyxnTEFBNks7RUFDN0ssaUJBQWlCO0VBQ2pCLGtCQUFrQjtBQUNwQjtBQUNBO0VBQ0UsZ0NBQWdDO0VBQ2hDLGdMQUFzTDtFQUN0TCxtQkFBbUI7RUFDbkIsa0JBQWtCO0FBQ3BCO0FBQ0E7RUFDRSw0QkFBNEI7RUFDNUIsa0xBQWlLO0VBQ2pLLGlCQUFpQjtFQUNqQixrQkFBa0I7QUFDcEI7QUFDQTtFQUNFLDRCQUE0QjtFQUM1QixtTEFBMEs7RUFDMUssbUJBQW1CO0VBQ25CLGtCQUFrQjtBQUNwQjtBQUNBO0VBQ0UseUJBQXlCO0VBQ3pCLG1MQUF3SjtFQUN4SixpQkFBaUI7RUFDakIsa0JBQWtCO0FBQ3BCO0FBQ0E7RUFDRSx5QkFBeUI7RUFDekIsbUxBQTBLO0VBQzFLLGlCQUFpQjtFQUNqQixrQkFBa0I7QUFDcEI7QUFDQTtFQUNFLHlCQUF5QjtFQUN6QixtTEFBOEo7RUFDOUosbUJBQW1CO0VBQ25CLGtCQUFrQjtBQUNwQjtBQUNBO0VBQ0UseUJBQXlCO0VBQ3pCLG1MQUFpSztFQUNqSyxtQkFBbUI7RUFDbkIsa0JBQWtCO0FBQ3BCO0FBQ0E7RUFDRSx5QkFBeUI7RUFDekIsbUxBQTBLO0VBQzFLLGlCQUFpQjtFQUNqQixrQkFBa0I7QUFDcEI7QUFDQTtFQUNFLHlCQUF5QjtFQUN6QixtTEFBOEo7RUFDOUosbUJBQW1CO0VBQ25CLGtCQUFrQjtBQUNwQjtBQUNBO0VBQ0UsOEJBQThCO0VBQzlCLG1MQUF1SztFQUN2SyxpQkFBaUI7RUFDakIsa0JBQWtCO0FBQ3BCO0FBQ0E7RUFDRSw4QkFBOEI7RUFDOUIsbUxBQTZLO0VBQzdLLG1CQUFtQjtFQUNu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 */
  </style>
  <style>
    .markdown-body {
      font-family: -apple-system,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;
      box-sizing: border-box;
      min-width: 200px;
      max-width: 980px;
      margin: 0 auto;
      padding: 45px;
    }

    @media not print {
      .markdown-body {
        padding: 45px;
      }

      @media (max-width: 767px) {
        .markdown-body {
          padding: 15px;
        }
      }
    }

    .hf-container {
      color: #24292e;
      line-height: 1.3;
    }

    .markdown-body .highlight pre,
    .markdown-body pre {
      white-space: pre-wrap;
    }
    .markdown-body table {
      display: table;
    }
    .markdown-body img[data-align="center"] {
      display: block;
      margin: 0 auto;
    }
    .markdown-body img[data-align="right"] {
      display: block;
      margin: 0 0 0 auto;
    }
    .markdown-body li.task-list-item {
      list-style-type: none;
    }
    .markdown-body li > [type=checkbox] {
      margin: 0 0 0 -1.3em;
    }
    .markdown-body input[type="checkbox"] ~ p {
      margin-top: 0;
      display: inline-block;
    }
    .markdown-body ol ol,
    .markdown-body ul ol {
      list-style-type: decimal;
    }
    .markdown-body ol ol ol,
    .markdown-body ol ul ol,
    .markdown-body ul ol ol,
    .markdown-body ul ul ol {
      list-style-type: decimal;
    }
  </style>
  <style>.markdown-body a.footnote-ref {
  text-decoration: none;
}

.footnotes {
  font-size: .85em;
  opacity: .8;
}

.footnotes li[role="doc-endnote"] {
  position: relative;
}

.footnotes .footnote-back {
  position: absolute;
  font-family: initial;
  top: .2em;
  right: 1em;
  text-decoration: none;
}

.inline-math.invalid,
.multiple-math.invalid {
  color: rgb(255, 105, 105);
}

.toc-container {
  width: 100%;
}

.toc-container .toc-title {
  font-weight: 700;
  font-size: 1.2em;
  margin-bottom: 0;
}

.toc-container li,
.toc-container ul,
.toc-container ul li {
  list-style: none !important;
}

.toc-container > ul {
  padding-left: 0;
}

.toc-container ul li span {
  display : flex;
}

.toc-container ul li span a {
  color: inherit;
  text-decoration: none;
}
.toc-container ul li span a:hover {
  color: inherit;
  text-decoration: none;
}

.toc-container ul li span span.dots {
  flex: 1;
  height: 0.65em;
  margin: 0 10px;
  border-bottom: 2px dotted black;
}

/*# sourceURL=webpack://./src/muya/lib/assets/styles/exportStyle.css */
/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9tdXlhL2xpYi9hc3NldHMvc3R5bGVzL2V4cG9ydFN0eWxlLmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLHFCQUFxQjtBQUN2Qjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsb0JBQW9CO0VBQ3BCLFNBQVM7RUFDVCxVQUFVO0VBQ1YscUJBQXFCO0FBQ3ZCOztBQUVBOztFQUVFLHlCQUF5QjtBQUMzQjs7QUFFQTtFQUNFLFdBQVc7QUFDYjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixnQkFBZ0I7RUFDaEIsZ0JBQWdCO0FBQ2xCOztBQUVBOzs7RUFHRSwyQkFBMkI7QUFDN0I7O0FBRUE7RUFDRSxlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsY0FBYztBQUNoQjs7QUFFQTtFQUNFLGNBQWM7RUFDZCxxQkFBcUI7QUFDdkI7QUFDQTtFQUNFLGNBQWM7RUFDZCxxQkFBcUI7QUFDdkI7O0FBRUE7RUFDRSxPQUFPO0VBQ1AsY0FBYztFQUNkLGNBQWM7RUFDZCwrQkFBK0I7QUFDakMiLCJzb3VyY2VSb290IjoiIn0= */</style>
  <style>.markdown-body{}pre.front-matter{display:none!important;}</style>
</head>
<body>
  <article class="markdown-body"><h1 class="atx" id="distributed-optimization-overview-and-matlab-examples">Distributed Optimization: Overview and MATLAB examples</h1>
<h2 class="atx" id="contents">Contents</h2>
<ol>
<li><p><a href="#overview">Overview</a></p>
</li>
<li><p><a href="#simple-example-of-multi-agent-optimization">Simple Example of Multi-Agent Optimization</a></p>
</li>
<li><p><a href="#real-world-application-distributed-resource-allocation-for-electric-vehicle-ev-charging">Real-world Application: Distributed Resource Allocation for Electric Vehicle (EV) Charging</a></p>
<p> 3.1. <a href="#solve-with-dgd">Solve with <strong>Distributed Gradient Descent (DGD)</strong></a></p>
<p> 3.2. <a href="#solve-with-admm">Solve with <strong>Alternating Direction Method of Multipliers (ADMM)</strong></a></p>
<p> 3.3. <a href="#solve-with-pso">Solve with <strong>Particle-Swarm Optimization (PSO)</strong></a></p>
<p> 3.4. <a href="#solve-with-ga">Solve with <strong>Genetic Algorithm (GA)</strong></a></p>
</li>
<li><p><a href="#discussion">Discussion</a></p>
</li>
<li><p><a href="#references">References</a></p>
</li>
</ol>
<h2 class="atx" id="overview">Overview</h2>
<h3 class="atx" id="general-concept">General Concept</h3>
<pre><code class="fenced-code-block language-sql"><span class="token number">1.</span> <span class="token keyword">Global</span> Optimization Problem
   F<span class="token punctuation">(</span>x₁<span class="token punctuation">,</span> x₂<span class="token punctuation">,</span> …<span class="token punctuation">,</span> x_N<span class="token punctuation">)</span>
   └─► N個のエージェントを協調させることによりFの最小化<span class="token operator">/</span>最大化を目指す

<span class="token number">2.</span> Multi<span class="token operator">-</span>Agent System
   ├─ Agent <span class="token number">1</span>
   ├─ Agent <span class="token number">2</span>
   ├─ …
   └─ Agent N

<span class="token number">3.</span> Agent <span class="token number">1</span> Workflow <span class="token punctuation">(</span>代表例<span class="token punctuation">)</span>
   ├─ <span class="token punctuation">[</span><span class="token keyword">Local</span> <span class="token keyword">Data</span><span class="token operator">/</span>Knowledge<span class="token punctuation">]</span> <span class="token punctuation">(</span>ローカルデータ<span class="token operator">/</span>知識<span class="token punctuation">)</span>
   │     • 例: p_pref₁<span class="token punctuation">,</span> ローカル制約
   ├─ <span class="token punctuation">[</span><span class="token keyword">Local</span> Objective<span class="token operator">/</span>Cost<span class="token punctuation">]</span> <span class="token punctuation">(</span>ローカル目的<span class="token operator">/</span>コスト<span class="token punctuation">)</span>
   │     • 例: <span class="token punctuation">(</span>p₁ – p_pref₁<span class="token punctuation">)</span>² または F のローカル部分
   ├─ <span class="token punctuation">[</span><span class="token keyword">Local</span> Computation <span class="token keyword">Engine</span><span class="token punctuation">]</span> <span class="token punctuation">(</span>ローカル計算エンジン<span class="token punctuation">)</span>
   │     • 入力: x₁<span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">,</span> ローカル目的
   │     └─► Method Choice: <span class="token punctuation">(</span>手法の選択<span class="token punctuation">)</span>
   │          a<span class="token punctuation">)</span> Gradient<span class="token operator">-</span>Based <span class="token punctuation">(</span>勾配ベース<span class="token punctuation">)</span>
   │             <span class="token number">1.</span> ∇f₁<span class="token punctuation">(</span>x₁<span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span> を計算
   │             <span class="token number">2.</span> ∇f₁ とメッセージを使用して更新
   │          b<span class="token punctuation">)</span> Gradient<span class="token operator">-</span>Free <span class="token punctuation">(</span>勾配フリー<span class="token punctuation">)</span>
   │             <span class="token number">1.</span> f₁<span class="token punctuation">(</span>x₁<span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span> を評価
   │             <span class="token number">2.</span> ヒューリスティック更新 <span class="token operator">+</span> メッセージ
   ├─ <span class="token punctuation">[</span><span class="token keyword">Prepare</span> <span class="token operator">&amp;</span> Send Message<span class="token punctuation">]</span> <span class="token punctuation">(</span>メッセージの準備と送信<span class="token punctuation">)</span>
   │     • データは手法に依存 <span class="token punctuation">(</span>状態、勾配、入札など<span class="token punctuation">)</span>
   ├─ <span class="token punctuation">[</span>Communication Network<span class="token punctuation">]</span> <span class="token punctuation">(</span>通信ネットワーク<span class="token punctuation">)</span>
   │     • トポロジー: リング <span class="token operator">/</span> スター <span class="token operator">/</span> メッシュ <span class="token operator">/</span> 完全グラフ
   │     • 隣接エージェント間でメッセージを運ぶ
   ├─ <span class="token punctuation">[</span>Receive Messages<span class="token punctuation">]</span> <span class="token punctuation">(</span>メッセージの受信<span class="token punctuation">)</span>
   │     • 隣接エージェントから
   ├─ <span class="token punctuation">[</span><span class="token keyword">Update</span> State<span class="token punctuation">]</span> <span class="token punctuation">(</span>状態の更新<span class="token punctuation">)</span>
   │     • 新しい推定値 x₁<span class="token punctuation">(</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
   └─ <span class="token punctuation">[</span><span class="token keyword">Iterate</span> k→k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">(</span>反復 k→k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token number">4.</span> Agent <span class="token number">2</span> Workflow
   <span class="token punctuation">(</span>Agent <span class="token number">1</span> と同じステップ、自身のデータ<span class="token operator">/</span>目的を使用<span class="token punctuation">)</span>

<span class="token number">5.</span> …

<span class="token number">6.</span> Agent N Workflow
   <span class="token punctuation">(</span>同じパターン<span class="token punctuation">)</span>

<span class="token number">7.</span> What’s Exchanged <span class="token keyword">on</span> the Network <span class="token punctuation">(</span>ネットワーク上で交換されるもの<span class="token punctuation">)</span>
   – <span class="token keyword">Current</span> states<span class="token operator">/</span>estimates x_j<span class="token punctuation">(</span>k<span class="token punctuation">)</span> <span class="token punctuation">(</span>現在の状態<span class="token operator">/</span>推定値 x_j<span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span>
   – <span class="token keyword">Local</span> gradients ∇f_j <span class="token punctuation">(</span>ローカル勾配 ∇f_j<span class="token punctuation">)</span>
   – Dual variables <span class="token operator">/</span> prices λ_j <span class="token punctuation">(</span>双対変数 <span class="token operator">/</span> 価格 λ_j<span class="token punctuation">)</span>
   – Proposed actions <span class="token operator">or</span> bids <span class="token punctuation">(</span>提案されたアクションまたは入札<span class="token punctuation">)</span>
   – Best<span class="token operator">-</span>known solutions <span class="token punctuation">(</span><span class="token keyword">for</span> meta<span class="token operator">-</span>heuristics<span class="token punctuation">)</span> <span class="token punctuation">(</span>既知の最良解 <span class="token punctuation">(</span>メタヒューリスティクス用<span class="token punctuation">)</span><span class="token punctuation">)</span>
   – Aggregated <span class="token keyword">values</span> <span class="token punctuation">(</span>sums<span class="token punctuation">,</span> averages<span class="token punctuation">)</span> <span class="token punctuation">(</span>集計値 <span class="token punctuation">(</span>合計、平均<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
<p><strong>図とマルチエージェント最適化プロセスの説明:</strong></p>
<ol>
<li><p><strong>Global Optimization Problem (F(x_1, ..., x_N)):</strong></p>
<ul>
<li>これは、エージェントのシステム全体が達成しようとする包括的な目標です。</li>
<li>多くの場合、すべてのエージェントの変数/アクションの関数です (例: 総コストの最小化、<code>sum f_i(x_i)</code>、またはコンセンサス <code>x_1 = x_2 = ... = x_N</code> の達成)。</li>
<li>エージェントの最適なアクションが他のエージェントのアクションや共有制約に依存する場合があるため、解決にはしばしば調整が必要です。</li>
</ul>
</li>
<li><p><strong>Multi-Agent System:</strong></p>
<ul>
<li>複数の自律的な <code>Agent</code> (Agent 1, Agent 2, ..., Agent N) で構成されます。</li>
<li>各エージェント <code>i</code> は、独自の決定変数 <code>x_i</code> を持ちます。</li>
</ul>
</li>
<li><p><strong>Individual Agent (e.g., Agent 1):</strong></p>
<ul>
<li><strong>Local Data/Knowledge (ローカルデータ/知識):</strong> 各エージェントはプライベートな情報を持っています (例: 優先充電レート <code>p_pref_i</code>、ローカルセンサーの読み取り値、ローカル制約)。</li>
<li><strong>Local Objective/Cost (ローカル目的/コスト):</strong> ローカルデータとグローバルな目的に基づいて、各エージェントはしばしば最適化するためのローカル目的関数 <code>f_i(x_i)</code> を持つか、グローバルな目的に一部貢献します。時には、ローカル目的には、結合や合意を強制するために隣人の状態に関連する項も含まれます。</li>
<li><strong>Agent State/Estimate (x_i(k)) (エージェントの状態/推定値):</strong> 各反復 <code>k</code> で、エージェントは決定変数の現在の値またはグローバルな量の推定値を維持します。</li>
<li><strong>Local Computation Engine (ローカル計算エンジン):</strong> これはエージェントの意思決定の中核です。<ul>
<li>現在の状態 <code>x_i(k)</code>、ローカル目的 <code>f_i</code>、ローカルデータ、および他のエージェントから受信したメッセージを入力として受け取ります。</li>
<li>次に、<code>Local Method</code> (ローカル手法) を適用して、次のアクションを計算するか、状態を更新します。</li>
</ul>
</li>
<li><strong>Local Method (ローカル手法):</strong><ul>
<li><strong>Gradient-Based (勾配ベース):</strong><ul>
<li>ローカル目的 <code>f_i</code> が微分可能な場合、エージェントはローカル勾配 <code>∇f_i(x_i(k))</code> を計算できます。</li>
<li>更新ルールは通常、この負の勾配に沿ったステップ (最小化の場合) と隣人からの情報 (例: DGDにおける隣人の状態の加重平均、またはADMMにおける双対変数に基づく更新) を組み合わせます。</li>
<li>例: 分散勾配降下法 (DGD)、ADMMサブプロブレム、双対分解法。</li>
</ul>
</li>
<li><strong>Gradient-Free (勾配フリー):</strong><ul>
<li>勾配が利用できない、計算コストが高すぎる、または問題が微分不可能またはブラックボックスである場合に使用されます。</li>
<li>エージェントは、現在の状態 (または提案された状態) でローカル目的 <code>f_i(x_i(k))</code> を評価します。</li>
<li>更新ルールは、特定のアルゴリズムから導出されたヒューリスティックな原則に従います (例: PSO粒子は、自身のパーソナルベストと近傍/グローバルベストに基づいて速度と位置を更新します。GA個体は選択、交叉、突然変異を受けます)。</li>
<li>例: 粒子群最適化 (PSO)、遺伝的アルゴリズム (GA)、アリコロニー最適化 (ACO)、シミュレーテッドアニーリング (分散設定に適合させた場合)。</li>
</ul>
</li>
</ul>
</li>
<li><strong>Prepare/Send Message (メッセージの準備と送信):</strong> ローカル計算の後、エージェントは隣人に送信するための関連情報を含むメッセージを準備します。</li>
<li><strong>Receive Messages (メッセージの受信):</strong> 次の計算サイクルの前に、エージェントは隣人からメッセージを受信します。</li>
<li><strong>New State/Estimate (x_i(k+1)) (新しい状態/推定値):</strong> ローカル計算と受信したメッセージに基づいて、エージェントは状態を更新します。</li>
<li><strong>Iterate (k -&gt; k+1) (反復):</strong> 設定された反復回数または収束基準が満たされるまで、プロセスが繰り返されます。1回の反復で受信されたメッセージは、通常、<em>次</em>の反復の計算に使用されます。</li>
</ul>
</li>
<li><p><strong>Communication Network (通信ネットワーク):</strong></p>
<ul>
<li>どのエージェントが互いにメッセージを交換できるかを定義します。</li>
<li><strong>Topology (トポロジー):</strong> 完全グラフ (全対全)、リング、スター、メッシュ、またはその他のグラフ構造にすることができます。トポロジーは、収束速度と堅牢性に大きな影響を与えます。</li>
<li>通信は通常、不完全であると想定されます (より高度なモデルでは、遅延、ノイズ、リンク障害)。ここでは簡単のため、信頼性の高い隣人間通信を想定しています。</li>
</ul>
</li>
<li><p><strong>Information Exchanged (What is Communicated) (交換される情報):</strong></p>
<ul>
<li>メッセージの内容は、特定の分散アルゴリズムに大きく依存します。<ul>
<li><strong>Current states/estimates (x_j(k)) (現在の状態/推定値):</strong> コンセンサスアルゴリズムで一般的です (DGDのように、エージェントが隣人の状態を平均化する場合など)。</li>
<li><strong>Local gradients (∇f_j) (ローカル勾配):</strong> 一部のアルゴリズムでは勾配情報を交換する場合があります。</li>
<li><strong>Dual variables / Prices (λ_j) (双対変数 / 価格):</strong> ADMMおよび双対分解法の中核であり、共有制約に違反することの「価格」を表します。</li>
<li><strong>Proposed actions / Bids (提案されたアクション / 入札):</strong> 市場ベースのメカニズムや一部のゲーム理論的アプローチで使用されます。</li>
<li><strong>Best-known solutions (既知の最良解):</strong> 一部の分散メタヒューリスティクスで使用されます (例: PSOの粒子が自身のパーソナルベスト位置を共有したり、近傍のベストに関する情報を受信したりする)。</li>
<li><strong>Aggregated values (集計値):</strong> エージェントは、特定のローカル値の合計や平均を協調して計算する場合があります (例: ADMM EV充電の例における <code>sum(p_i)</code> はコンセンサスを介して推定されました)。</li>
</ul>
</li>
</ul>
</li>
</ol>
<p><strong>Overall Flow (全体的な流れ):</strong></p>
<p>システムは通常、反復的なラウンドで動作します。</p>
<ol>
<li><strong>Initialization (初期化):</strong> エージェントは初期状態 <code>x_i(0)</code> から開始します。</li>
<li><strong>Iteration <code>k</code> (反復 <code>k</code>):</strong>
a.  <strong>Local Computation (ローカル計算):</strong> 各エージェント <code>i</code> は、現在の状態 <code>x_i(k)</code> および前のラウンド (または反復 <code>k-1</code> から) で受信したメッセージを使用して、選択した手法 (勾配ベースまたは勾配フリー) に従ってローカル計算を実行します。
b.  <strong>State Update (状態更新):</strong> エージェントは状態を <code>x_i(k+1)</code> に更新します。
c.  <strong>Communication (通信):</strong> 各エージェント <code>i</code> は、メッセージ (<code>x_i(k+1)</code> の一部またはその他の派生情報を含む) を通信ネットワークを介して隣人に送信します。</li>
<li><strong>Repeat (繰り返し):</strong> <code>k</code> をインクリメントし、収束または最大反復回数に達するまでステップ2aに進みます。</li>
</ol>
<p>目標は、エージェントの状態 <code>x_i</code> が集合的にグローバルな最適化問題 <code>F</code> の解 (または良好な近似解) に収束することです。</p>
<h3 class="atx" id="foundations-of-distributed-optimization">Foundations of Distributed Optimization</h3>
<ul>
<li><p><strong>Consensus‐based Gradient Methods</strong> </p>
<ul>
<li><p><strong>Distributed Gradient Descent (DGD)</strong> およびその高速化版（例：EXTRA, DIGing, NIDS）は、ローカルな勾配ステップとコンセンサス（平均化）を組み合わせることで、ネットワーク上の（強）凸問題を解きます。</p>
</li>
<li><p><strong>Gradient Tracking</strong> メソッドは、各エージェントでグローバルな勾配推定値を追跡し、より速い収束と時変グラフに対するロバスト性をもたらします。</p>
</li>
</ul>
</li>
<li><p><strong>Operator Splitting &amp; ADMM</strong> </p>
<ul>
<li><p><strong>Decentralized ADMM</strong> は、交互方向乗数法 (Alternating Direction Method of Multipliers) をピアツーピア方式で適用し、グローバルな目的関数をローカルなサブ問題とコンセンサス制約に分割します。</p>
</li>
<li><p>最近のバリアントは、メッセージングのオーバーヘッドを削減するために、<strong>非同期 (asynchronous)</strong> 、<strong>イベントトリガー型 (event‐triggered)</strong> 、または <strong>通信圧縮型 (communication‐compressed)</strong> の更新に焦点を当てています。</p>
</li>
</ul>
</li>
<li><p><strong>Primal–Dual &amp; Second-Order Methods</strong> </p>
<ul>
<li><p><strong>Primal–Dual Algorithms</strong> （例：Chambolle–Pock スタイル）はネットワークに適応されており、鞍点問題に対する高速な収束率を提供します。</p>
</li>
<li><p><strong>Distributed Newton / Quasi-Newton</strong> メソッドは、局所的に曲率情報を近似することで、悪条件の問題に対する収束を高速化し、多くの場合、追加の計算と引き換えに通信ラウンド数を削減します。</p>
</li>
</ul>
</li>
</ul>
<hr>
<h3 class="atx" id="swarm-intelligence-meta-heuristics">Swarm Intelligence Meta-heuristics</h3>
<ul>
<li><p><strong>Particle Swarm Optimization (PSO) and Variants</strong> </p>
<ul>
<li><p><strong>Quantum-behaved PSO (QPSO)</strong> 、<strong>Bare-Bones PSO</strong> 、および <strong>Fully Informed PSO</strong> は、探索と活用のトレードオフを改善します。</p>
</li>
<li><p><strong>Multi‐swarms</strong> は、大規模な探索を相互作用するサブスウォームに分解し、各サブスウォームが問題の一部を最適化したり、異なる領域を探索したりします。</p>
</li>
</ul>
</li>
<li><p><strong>Ant Colony Optimization (ACO)</strong> </p>
<ul>
<li><p><strong>Max–Min ACO</strong> は、早期収束を避けるためにフェロモンに明示的な境界を設定します。</p>
</li>
<li><p><strong>Hybrid ACO-PSO</strong> や <strong>ACO-GA</strong> は、相補的なメカニズム（交叉/突然変異または速度更新）を利用して局所最適解から脱出します。</p>
</li>
</ul>
</li>
<li><p><strong>Other Bio-inspired Techniques</strong> </p>
<ul>
<li><strong>Artificial Bee Colony (ABC)</strong> 、<strong>Bacterial Foraging Optimization (BFO)</strong> 、および <strong>Firefly Algorithm</strong> は、動的なパラメータ適応、並列集団、およびレヴィフライトステップによって調整され、高次元で多峰性の目的関数に対するパフォーマンスを向上させます。</li>
</ul>
</li>
</ul>
<hr>
<h3 class="atx" id="swarm--multi-agent-control">Swarm / Multi-Agent Control</h3>
<ul>
<li><p><strong>Consensus &amp; Formation Control</strong> </p>
<ul>
<li><p><strong>Leaderless Consensus</strong> プロトコルは、ローカルな隣接エージェントとの通信のみにもかかわらず、すべてのエージェントが状態（例：フォーメーションの重心、ランデブーポイント）について合意することを保証します。</p>
</li>
<li><p><strong>Leader–Follower</strong> アーキテクチャは、全体的な動きを操縦する情報を持つ「リーダー」エージェントのサブセットと、形状を維持するためにコンセンサスを実行するフォロワーを組み合わせます。</p>
</li>
</ul>
</li>
<li><p><strong>Distributed Model Predictive Control (DMPC)</strong> </p>
<ul>
<li>エージェントは、ADMM や双対分解を介して結合制約（例：衝突回避、リソース共有）を持つローカルな MPC 問題を解き、限られた通信で集中型に近いパフォーマンスを達成します。</li>
</ul>
</li>
<li><p><strong>Event-Triggered &amp; Self-Triggered Control</strong> </p>
<ul>
<li>ネットワーク負荷を軽減するために、エージェントは特定状態またはエラーベースの閾値を超えた場合にのみ情報を交換し、大幅に少ないメッセージで安定性とパフォーマンスを保証します。</li>
</ul>
</li>
<li><p><strong>Learning-Enhanced Control</strong> </p>
<ul>
<li><strong>Graph Neural Networks (GNNs)</strong> および <strong>Multi-Agent Reinforcement Learning (MARL)</strong> は、データから直接制御ポリシーを調整することを学習し、非線形ダイナミクスや部分的観測可能性に対応します。</li>
</ul>
</li>
</ul>
<hr>
<h3 class="atx" id="key-trends-andamp-open-challenges">Key Trends &amp; Open Challenges</h3>
<ul>
<li><p><strong>Communication Efficiency</strong> : 帯域幅を削減するための圧縮メッセージ、量子化更新、および散発的/イベントトリガー型スキーム。</p>
</li>
<li><p><strong>Robustness &amp; Privacy</strong> : リンク障害、敵対的エージェントを許容し、差分プライバシーを保証するアルゴリズム。</p>
</li>
<li><p><strong>Scalability</strong> : 階層的スウォーム、部分空間分解、または平均場近似を介した数千のエージェントの処理。</p>
</li>
<li><p><strong>Nonconvex &amp; Time-Varying Objectives</strong> : 非凸ランドスケープ（ロボティクスや深層学習で一般的）および動的に変化するネットワークトポロジーにおける収束の保証。</p>
</li>
<li><p><strong>Bridging Meta-heuristics &amp; Convex Methods</strong> : より良いグローバル探索のために、高速なコンセンサスベースの凸ソルバーをグローバルなメタヒューリスティックの外側ループ内に埋め込むハイブリッドフレームワーク。</p>
</li>
</ul>
<hr>
<h3 class="atx" id="in-summary">In Summary</h3>
<p>マルチエージェントおよびスウォームコンテキストにおける最先端の分散最適化は、（証明可能な保証を持つ）<strong>厳密な凸/ADMMスタイルアルゴリズム</strong>と、（困難で非凸なランドスケープのための）<strong>生物に着想を得たメタヒューリスティクス</strong>を相乗させ、現代のスウォーム制御は<strong>学習駆動型</strong>、<strong>通信疎</strong>、かつ<strong>ロバスト</strong>な協調法則を推進しています。この融合により、大規模なロボットチーム、センサーネットワーク、および分散機械学習システムが、現実的なネットワークおよびエージェントの制約下で効率的に動作することが可能になります。</p>
<h2 class="atx" id="simple-example-of-multi-agent-optimization">Simple Example of Multi-Agent Optimization</h2>
<p>以下は、分散最適化における古典的な<strong>平均合意 (average consensus)</strong> のトイプロブレムを示すプロトタイプの MATLAB スクリプトです。エージェントは、接続された通信グラフ上で<strong>ローカル勾配ステップ</strong>と<strong>コンセンサス平均化</strong>を交互に行うことにより、二次コスト</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:1em;vertical-align:-0.25em;" class="strut"></span><span style="margin-right:0.10764em;" class="mord mathnormal">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span style="margin-right:0.2778em;" class="mspace"></span><span style="margin-right:0.2778em;" class="mspace"></span><span class="mrel">=</span><span style="margin-right:0.2778em;" class="mspace"></span><span style="margin-right:0.2778em;" class="mspace"></span></span><span class="base"><span style="height:3.106em;vertical-align:-1.2777em;" class="strut"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:1.8283em;" class="vlist"><span style="top:-1.8723em;margin-left:0em;"><span style="height:3.05em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span style="height:3.05em;" class="pstrut"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span style="height:3.05em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span style="margin-right:0.10903em;" class="mord mathnormal mtight">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span style="height:1.2777em;" class="vlist"><span></span></span></span></span></span><span style="margin-right:0.1667em;" class="mspace"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:0.8451em;" class="vlist"><span style="top:-2.655em;"><span style="height:3em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span style="height:3em;" class="pstrut"></span><span style="border-bottom-width:0.04em;" class="frac-line"></span></span><span style="top:-3.394em;"><span style="height:3em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span style="height:0.345em;" class="vlist"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen"><span class="delimsizing size1">(</span></span><span class="mord mathnormal">x</span><span style="margin-right:0.2222em;" class="mspace"></span><span class="mbin">−</span><span style="margin-right:0.2222em;" class="mspace"></span></span><span class="base"><span style="height:1.404em;vertical-align:-0.35em;" class="strut"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:0.3117em;" class="vlist"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span style="height:0.15em;" class="vlist"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose"><span class="delimsizing size1">)</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span style="height:1.054em;" class="vlist"><span style="top:-3.3029em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span><p>を協調して最小化します。</p>
<hr>
<h3 class="atx" id="problem-formulation">Problem Formulation</h3>
<p>分散最適化における標準的なトイプロブレムの1つは、<strong>平均合意 (average consensus)</strong> 問題です。この問題では、<span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:0.6833em;" class="strut"></span><span style="margin-right:0.10903em;" class="mord mathnormal">N</span></span></span></span> 個のエージェントが、ローカル通信のみを使用して初期値の平均について合意することを目指します <a href="https://www.diva-portal.org/smash/get/diva2%3A453798/FULLTEXT01.pdf">Diva Portal</a>。あるいは、これは二次コスト</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:1em;vertical-align:-0.25em;" class="strut"></span><span style="margin-right:0.10764em;" class="mord mathnormal">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span style="margin-right:0.2778em;" class="mspace"></span><span style="margin-right:0.2778em;" class="mspace"></span><span class="mrel">=</span><span style="margin-right:0.2778em;" class="mspace"></span><span style="margin-right:0.2778em;" class="mspace"></span></span><span class="base"><span style="height:3.106em;vertical-align:-1.2777em;" class="strut"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:1.8283em;" class="vlist"><span style="top:-1.8723em;margin-left:0em;"><span style="height:3.05em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span style="height:3.05em;" class="pstrut"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span style="height:3.05em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span style="margin-right:0.10903em;" class="mord mathnormal mtight">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span style="height:1.2777em;" class="vlist"><span></span></span></span></span></span><span style="margin-right:0.1667em;" class="mspace"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:1.3214em;" class="vlist"><span style="top:-2.314em;"><span style="height:3em;" class="pstrut"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span style="height:3em;" class="pstrut"></span><span style="border-bottom-width:0.04em;" class="frac-line"></span></span><span style="top:-3.677em;"><span style="height:3em;" class="pstrut"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span style="height:0.686em;" class="vlist"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span style="margin-right:0.1667em;" class="mspace"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span style="margin-right:0.2222em;" class="mspace"></span><span class="mbin">−</span><span style="margin-right:0.2222em;" class="mspace"></span></span><span class="base"><span style="height:1.1141em;vertical-align:-0.25em;" class="strut"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:0.3117em;" class="vlist"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span style="height:0.15em;" class="vlist"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span style="height:0.8641em;" class="vlist"><span style="top:-3.113em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mpunct">,</span></span></span></span></span><p>を最小化すると見なすこともでき、その唯一の最小化子は <span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:1em;vertical-align:-0.25em;" class="strut"></span><span class="mopen">{</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:0.3117em;" class="vlist"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span style="height:0.15em;" class="vlist"><span></span></span></span></span></span></span><span class="mclose">}</span></span></span></span> の平均です <a href="https://www.researchgate.net/publication/224371202_Distributed_Subgradient_Methods_for_Multi-Agent_Optimization">ResearchGate</a>。
分散（劣）勾配法は、勾配ステップとローカル平均化を組み合わせ、<strong>分散勾配降下法 (Distributed Gradient Descent - DGD)</strong> の反復式</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:1.3217em;vertical-align:-0.2769em;" class="strut"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:1.0448em;" class="vlist"><span style="top:-2.4231em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span style="margin-right:0.03148em;" class="mord mathnormal mtight">k</span><span class="mbin mtight">+</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span style="height:0.2769em;" class="vlist"><span></span></span></span></span></span></span><span style="margin-right:0.2778em;" class="mspace"></span><span style="margin-right:0.2778em;" class="mspace"></span><span class="mrel">=</span><span style="margin-right:0.2778em;" class="mspace"></span><span style="margin-right:0.2778em;" class="mspace"></span></span><span class="base"><span style="height:3.2421em;vertical-align:-1.4138em;" class="strut"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:1.8283em;" class="vlist"><span style="top:-1.8723em;margin-left:0em;"><span style="height:3.05em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span style="margin-right:0.05724em;" class="mord mathnormal mtight">j</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span style="height:3.05em;" class="pstrut"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span style="height:3.05em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span style="margin-right:0.10903em;" class="mord mathnormal mtight">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span style="height:1.4138em;" class="vlist"><span></span></span></span></span></span><span style="margin-right:0.1667em;" class="mspace"></span><span class="mord"><span style="margin-right:0.13889em;" class="mord mathnormal">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:0.3117em;" class="vlist"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span style="margin-right:0.05724em;" class="mord mathnormal mtight">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span style="height:0.2861em;" class="vlist"><span></span></span></span></span></span></span><span style="margin-right:0.1667em;" class="mspace"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:1.0448em;" class="vlist"><span style="top:-2.4231em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span style="margin-right:0.05724em;" class="mord mathnormal mtight">j</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span style="margin-right:0.03148em;" class="mord mathnormal mtight">k</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span style="height:0.413em;" class="vlist"><span></span></span></span></span></span></span><span style="margin-right:0.2778em;" class="mspace"></span><span style="margin-right:0.2222em;" class="mspace"></span><span class="mbin">−</span><span style="margin-right:0.2778em;" class="mspace"></span><span style="margin-right:0.2222em;" class="mspace"></span></span><span class="base"><span style="height:1.3948em;vertical-align:-0.35em;" class="strut"></span><span style="margin-right:0.0037em;" class="mord mathnormal">α</span><span style="margin-right:0.2778em;" class="mspace"></span><span class="mopen"><span class="delimsizing size1">(</span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:1.0448em;" class="vlist"><span style="top:-2.4231em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span style="margin-right:0.03148em;" class="mord mathnormal mtight">k</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span style="height:0.2769em;" class="vlist"><span></span></span></span></span></span></span><span style="margin-right:0.2222em;" class="mspace"></span><span class="mbin">−</span><span style="margin-right:0.2222em;" class="mspace"></span></span><span class="base"><span style="height:1.2em;vertical-align:-0.35em;" class="strut"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:0.3117em;" class="vlist"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span style="height:0.15em;" class="vlist"><span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing size1">)</span></span><span class="mpunct">,</span></span></span></span></span><p>を導きます。ここで、<span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:0.6833em;" class="strut"></span><span style="margin-right:0.13889em;" class="mord mathnormal">W</span></span></span></span> はコンセンサス重み行列であり、<span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:0.5782em;vertical-align:-0.0391em;" class="strut"></span><span style="margin-right:0.0037em;" class="mord mathnormal">α</span><span style="margin-right:0.2778em;" class="mspace"></span><span class="mrel">&gt;</span><span style="margin-right:0.2778em;" class="mspace"></span></span><span class="base"><span style="height:0.6444em;" class="strut"></span><span class="mord">0</span></span></span></span> はステップサイズです <a href="https://www.scirp.org/%28S%28czeh2tfqw2orz553k1w0r45%29%29/reference/referencespapers?referenceid=3220708">SCIRP</a>。減少するステップサイズまたは小さな定数ステップサイズの下での収束はよく理解されています <a href="https://web.mit.edu/Asuman/Desktop/asuman/www/documents/distributed-journal-final.pdf">Massachusetts Institute of Technology</a>。
勾配スキームを超えて、<strong>Consensus ADMM</strong> は、拡張ラグランジアンを介してローカル最小化とコンセンサス制約を分離することにより、このような問題に対する演算子分割アプローチを提供します <a href="https://web.stanford.edu/~boyd/papers/pdf/admm_distr_stats.pdf">Stanford University</a>。<strong>Consensus ALADIN</strong> のような高度なフレームワークは、二次情報を使用して非凸および多層設定にこれらのアイデアを拡張します <a href="https://arxiv.org/pdf/2306.05662">arXiv</a>。他のバリアントには、トイ逆問題における<strong>Consensus Equilibrium</strong> メソッド <a href="https://engineering.purdue.edu/~bouman/Plug-and-Play/webdocs/SIIMS01.pdf">Purdue Engineering</a>、通信を削減するための<strong>イベントトリガー型 (event‐triggered)</strong> 更新 <a href="https://www.sciencedirect.com/science/article/abs/pii/S0893608023006925">ScienceDirect</a>、スマートグリッドにおける多目的最適化のための<strong>多層コンセンサス (multi‐layer consensus)</strong> <a href="https://www.sciencedirect.com/science/article/abs/pii/S0306261921007923">ScienceDirect</a> などがあります。</p>
<hr>
<h3 class="atx" id="matlab-prototype-script">MATLAB Prototype Script</h3>
<pre><code class="fenced-code-block language-matlab"><span class="token comment">% Distributed Average Consensus via DGD</span>
<span class="token comment">%-------------------------------------------------------</span>
<span class="token comment">% Number of agents</span>
<span class="token comment">% エージェント数</span>
N <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>

<span class="token comment">% Local data: each agent i holds value a(i)</span>
<span class="token comment">% ローカルデータ: 各エージェントiは値a(i)を保持</span>
a <span class="token operator">=</span> <span class="token function">randn</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">5</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span>    <span class="token comment">% e.g. randomly around 10 (例: 10周辺のランダムな値)</span>

<span class="token comment">% Communication graph: here, a ring or complete graph</span>
<span class="token comment">% For simplicity, use complete graph weights (equal averaging)</span>
<span class="token comment">% 通信グラフ: ここではリンググラフまたは完全グラフ</span>
<span class="token comment">% 簡単のため、完全グラフの重み（等しい平均化）を使用</span>
W <span class="token operator">=</span> <span class="token function">ones</span><span class="token punctuation">(</span>N<span class="token punctuation">)</span> <span class="token operator">/</span> N<span class="token punctuation">;</span>

<span class="token comment">% Stepsize (small constant for stability)</span>
<span class="token comment">% ステップサイズ（安定性のための小さな定数）</span>
alpha <span class="token operator">=</span> <span class="token number">0.1</span><span class="token punctuation">;</span>

<span class="token comment">% Initialization: each agent starts from zero</span>
<span class="token comment">% 初期化: 各エージェントはゼロから開始</span>
x <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% Number of iterations</span>
<span class="token comment">% 反復回数</span>
T <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>

<span class="token comment">% Store history for plotting</span>
<span class="token comment">% プロット用の履歴を保存</span>
Xhist <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span> T<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">Xhist</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>

<span class="token keyword">for</span> k <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">:</span>T
    <span class="token comment">% Local consensus + gradient step</span>
    <span class="token comment">% ローカルコンセンサス + 勾配ステップ</span>
    x <span class="token operator">=</span> W <span class="token operator">*</span> x <span class="token operator">-</span> alpha <span class="token operator">*</span> <span class="token punctuation">(</span>x <span class="token operator">-</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">% Save</span>
    <span class="token comment">% 保存</span>
    <span class="token function">Xhist</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>
<span class="token keyword">end</span>

<span class="token comment">% True consensus value</span>
<span class="token comment">% 真の合意値</span>
x_star <span class="token operator">=</span> <span class="token function">mean</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% Plot convergence of each agent</span>
<span class="token comment">% 各エージェントの収束をプロット</span>
figure<span class="token punctuation">;</span>
<span class="token function">plot</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">:</span>T<span class="token punctuation">,</span> Xhist<span class="token operator">'</span><span class="token punctuation">,</span> <span class="token string">'LineWidth'</span><span class="token punctuation">,</span> <span class="token number">1.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
hold on<span class="token punctuation">;</span>
<span class="token function">yline</span><span class="token punctuation">(</span>x_star<span class="token punctuation">,</span> <span class="token string">'k--'</span><span class="token punctuation">,</span> <span class="token string">'LineWidth'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">xlabel</span><span class="token punctuation">(</span><span class="token string">'Iteration k'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">ylabel</span><span class="token punctuation">(</span><span class="token string">'x_i^{(k)}'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">title</span><span class="token punctuation">(</span><span class="token string">'Distributed Gradient Descent: Average Consensus'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
legendStrings <span class="token operator">=</span> <span class="token function">arrayfun</span><span class="token punctuation">(</span><span class="token operator">@</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span> <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'Agent %d'</span><span class="token punctuation">,</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">:</span>N<span class="token punctuation">,</span> <span class="token string">'UniformOutput'</span><span class="token punctuation">,</span> false<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">legend</span><span class="token punctuation">(</span><span class="token punctuation">[</span>legendStrings<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'Optimal Mean'</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'Location'</span><span class="token punctuation">,</span><span class="token string">'best'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
grid on<span class="token punctuation">;</span></code></pre>
<hr>
<h3 class="atx" id="how-it-works">How It Works</h3>
<ol start="2">
<li><strong>Initialization</strong> </li>
</ol>
<p>各エージェント <span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:0.6595em;" class="strut"></span><span class="mord mathnormal">i</span></span></span></span> は、自身の推定値 <span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:1.3217em;vertical-align:-0.2769em;" class="strut"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:1.0448em;" class="vlist"><span style="top:-2.4231em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">0</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span style="height:0.2769em;" class="vlist"><span></span></span></span></span></span></span><span style="margin-right:0.2778em;" class="mspace"></span><span class="mrel">=</span><span style="margin-right:0.2778em;" class="mspace"></span></span><span class="base"><span style="height:0.6444em;" class="strut"></span><span class="mord">0</span></span></span></span> を初期化し、自身のプライベートデータ <span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:0.5806em;vertical-align:-0.15em;" class="strut"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:0.3117em;" class="vlist"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span style="height:0.15em;" class="vlist"><span></span></span></span></span></span></span></span></span></span> のみを知っています。</p>
<ol start="4">
<li><strong>Consensus Step</strong> </li>
</ol>
<p>各反復において、エージェントは行列 <span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:0.6833em;" class="strut"></span><span style="margin-right:0.13889em;" class="mord mathnormal">W</span></span></span></span> を介して自身の状態を隣人の状態の加重平均で置き換えます。<strong>完全グラフ (complete graph)</strong> では、<span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:0.9694em;vertical-align:-0.2861em;" class="strut"></span><span class="mord"><span style="margin-right:0.13889em;" class="mord mathnormal">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:0.3117em;" class="vlist"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span style="margin-right:0.05724em;" class="mord mathnormal mtight">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span style="height:0.2861em;" class="vlist"><span></span></span></span></span></span></span><span style="margin-right:0.2778em;" class="mspace"></span><span class="mrel">=</span><span style="margin-right:0.2778em;" class="mspace"></span></span><span class="base"><span style="height:1em;vertical-align:-0.25em;" class="strut"></span><span class="mord">1/</span><span style="margin-right:0.10903em;" class="mord mathnormal">N</span></span></span></span> です。</p>
<ol start="6">
<li><strong>Local Gradient Step</strong> </li>
</ol>
<p>各エージェントは、自身の最小化子 <span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:0.5806em;vertical-align:-0.15em;" class="strut"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:0.3117em;" class="vlist"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span style="height:0.15em;" class="vlist"><span></span></span></span></span></span></span></span></span></span> に向かって <span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:1em;vertical-align:-0.25em;" class="strut"></span><span class="mord">−</span><span style="margin-right:0.0037em;" class="mord mathnormal">α</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:0.3117em;" class="vlist"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span style="height:0.15em;" class="vlist"><span></span></span></span></span></span></span><span style="margin-right:0.2222em;" class="mspace"></span><span class="mbin">−</span><span style="margin-right:0.2222em;" class="mspace"></span></span><span class="base"><span style="height:1em;vertical-align:-0.25em;" class="strut"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:0.3117em;" class="vlist"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span style="height:0.15em;" class="vlist"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> だけ調整します。</p>
<ol start="8">
<li><strong>Convergence</strong> </li>
</ol>
<p><span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:0.4306em;" class="strut"></span><span style="margin-right:0.0037em;" class="mord mathnormal">α</span></span></span></span> と <span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:0.6833em;" class="strut"></span><span style="margin-right:0.13889em;" class="mord mathnormal">W</span></span></span></span> の接続性に関する緩やかな条件下で、すべての <span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:1.3217em;vertical-align:-0.2769em;" class="strut"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:1.0448em;" class="vlist"><span style="top:-2.4231em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span style="margin-right:0.03148em;" class="mord mathnormal mtight">k</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span style="height:0.2769em;" class="vlist"><span></span></span></span></span></span></span></span></span></span> はグローバルな最小化子</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"></span><span aria-hidden="true" class="katex-html"><span class="base"><span style="height:0.6306em;" class="strut"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span style="height:0.6306em;" class="vlist"><span style="top:-3em;"><span style="height:3em;" class="pstrut"></span><span class="mord"><span class="mord mathnormal">a</span></span></span><span style="top:-3.5506em;"><span style="height:3em;" class="pstrut"></span><span style="border-bottom-width:0.04em;" class="overline-line"></span></span></span></span></span></span><span style="margin-right:0.2778em;" class="mspace"></span><span class="mrel">=</span><span style="margin-right:0.2778em;" class="mspace"></span></span><span class="base"><span style="height:2.3277em;vertical-align:-1.2777em;" class="strut"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:0.8451em;" class="vlist"><span style="top:-2.655em;"><span style="height:3em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span style="margin-right:0.10903em;" class="mord mathnormal mtight">N</span></span></span></span><span style="top:-3.23em;"><span style="height:3em;" class="pstrut"></span><span style="border-bottom-width:0.04em;" class="frac-line"></span></span><span style="top:-3.394em;"><span style="height:3em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span style="height:0.345em;" class="vlist"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span style="margin-right:0.1667em;" class="mspace"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:1.05em;" class="vlist"><span style="top:-1.8723em;margin-left:0em;"><span style="height:3.05em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.05em;"><span style="height:3.05em;" class="pstrut"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span style="height:1.2777em;" class="vlist"><span></span></span></span></span></span><span style="margin-right:0.1667em;" class="mspace"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span style="height:0.3117em;" class="vlist"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span style="height:2.7em;" class="pstrut"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span style="height:0.15em;" class="vlist"><span></span></span></span></span></span></span></span></span></span></span><p>に収束します。</p>
<hr>
<h2 class="atx" id="real-world-application-distributed-resource-allocation-for-electric-vehicle-ev-charging">Real-world Application: Distributed Resource Allocation for Electric Vehicle (EV) Charging</h2>
<p><strong>Scenario:</strong>
<code>N</code> 台の電気自動車 (EV) の集合が、総電力容量 <code>P_total</code> の充電ステーションから充電したいとします。各EV <code>i</code> は、優先充電レート <code>p_pref_i</code> を持っています（例：バッテリーサイズ、現在の充電状態、希望充電時間に基づく）。しかし、優先レートの合計が <code>P_total</code> を超える可能性があります。</p>
<p><strong>Optimization Goal:</strong>
各EVに対して実際の充電レート <code>p_i</code> を見つけたいとします。その際、以下の条件を満たすようにします。</p>
<ol>
<li>使用される総電力が <code>P_total</code> を超えないこと: <code>sum(p_i) = P_total</code>。(利用可能な全電力を使用することを目指します)。</li>
<li>配分が「公平」であること。これを達成する一般的な方法は、総電力制約の下で、優先レートからの二乗差の合計を最小化することです。
Minimize <code>sum_i (p_i - p_pref_i)^2</code>
Subject to <code>sum_i p_i = P_total</code></li>
</ol>
<p><strong>Distributed Solution Approach:</strong>
この制約付き最適化問題の解析解は次のとおりです。
<code>p_i_optimal = p_pref_i + (P_total - sum(p_pref_j)) / N</code></p>
<p>項 <code>(P_total - sum(p_pref_j)) / N</code> に注目してください。これは <code>P_total/N - mean(p_pref_j)</code> と書き換えることができます。
したがって、<code>p_i_optimal = p_pref_i + P_total/N - mean(p_pref)</code> となります。</p>
<p>これを分散的に実装するには：</p>
<ol>
<li>各EVは自身の <code>p_pref_i</code> とグローバルな値 <code>P_total</code> および <code>N</code> を知っています。</li>
<li>EVは協調して <code>mean(p_pref)</code> を計算する必要があります。これはまさに分散平均合意 (DGDを使用) アルゴリズムが行うことです！</li>
<li>各EV <code>i</code> が <code>mean(p_pref)</code> の良い推定値（その推定値を <code>z_i</code> としましょう）を得たら、最適な電力配分を計算できます: <code>p_i = p_pref_i + P_total/N - z_i</code>。</li>
</ol>
<pre><code class="fenced-code-block language-matlab">Preferred charging <span class="token function">rates</span> <span class="token punctuation">(</span>kW<span class="token punctuation">)</span><span class="token operator">:</span>
    <span class="token number">6.3362</span>    <span class="token number">8.7626</span>    <span class="token number">3.0009</span>    <span class="token number">5.4187</span>    <span class="token number">4.1740</span>    <span class="token number">3.7387</span>    <span class="token number">4.4901</span>    <span class="token number">5.7645</span>    <span class="token number">6.1741</span>    <span class="token number">7.3105</span>

Sum of preferred rates<span class="token operator">:</span> <span class="token number">55.17</span> kW
Total available power<span class="token operator">:</span> <span class="token number">50.00</span> kW</code></pre>
<h3 class="atx" id="solve-with-dgd">Solve with DGD</h3>
<p>単純な DGD コードを適応させて、エージェントが <code>mean(p_pref)</code> に収束するようにします。</p>
<pre><code class="fenced-code-block language-matlab"><span class="token comment">% Distributed Resource Allocation for EV Charging via DGD</span>
<span class="token comment">%-----------------------------------------------------------------</span>

<span class="token comment">% Number of EVs (agents)</span>
<span class="token comment">% EVの数（エージェント）</span>
N <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>

<span class="token comment">% Total Power Capacity of the charging station (e.g., kW)</span>
<span class="token comment">% 充電ステーションの総電力容量（例：kW）</span>
P_total <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span> 

<span class="token comment">% Local data: Each EV i has a preferred charging rate p_pref(i)</span>
<span class="token comment">% Let's say preferred rates are between 3 kW and 11 kW (typical Level 2 charging)</span>
<span class="token comment">% ローカルデータ：各EV i は優先充電レート p_pref(i) を持つ</span>
<span class="token comment">% 優先レートは3kWから11kWの間と仮定（一般的なレベル2充電）</span>
p_pref <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">8</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">% Randomly between 3 and 11 kW (3から11kWの間でランダム)</span>

<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Preferred charging rates (kW):\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">disp</span><span class="token punctuation">(</span>p_pref<span class="token operator">'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Sum of preferred rates: %.2f kW\n'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Total available power: %.2f kW\n\n'</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% Communication graph: Ring topology for a slightly more realistic scenario</span>
<span class="token comment">% than complete graph, but still simple.</span>
<span class="token comment">% For a ring, each agent communicates with two neighbors.</span>
<span class="token comment">% 通信グラフ：完全グラフよりも少し現実的なシナリオのためのリングトポロジー、ただし単純。</span>
<span class="token comment">% リングの場合、各エージェントは2つの隣接エージェントと通信する。</span>
W <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span>N<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token number">i</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">:</span>N
    <span class="token function">W</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">,</span><span class="token number">i</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">% Weight for self (自身への重み)</span>
    <span class="token function">W</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">,</span> <span class="token function">mod</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> N<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">% Weight for previous neighbor (with wrap-around) (前の隣人への重み（ラップアラウンドあり）)</span>
    <span class="token function">W</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">,</span> <span class="token function">mod</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">,</span> N<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">;</span>     <span class="token comment">% Weight for next neighbor (with wrap-around) (次の隣人への重み（ラップアラウンドあり）)</span>
<span class="token keyword">end</span>
<span class="token comment">% A simple check for doubly stochastic (not strictly required for DGD convergence to mean</span>
<span class="token comment">% for this specific formulation, but good practice for consensus)</span>
<span class="token comment">% For DGD to average a_i, W must be doubly stochastic.</span>
<span class="token comment">% The DGD update x = Wx - alpha*(x-a) can be x_new(i) = x_old(i) + sum_j W(i,j)*(x_old(j)-x_old(i)) - alpha*(x_old(i)-a(i))</span>
<span class="token comment">% Or, as used: x_i^{k+1} = sum_j W_ij x_j^k - alpha * (x_i^k - a_i)</span>
<span class="token comment">% If W is column stochastic (sum(W(:,j))=1), Wx averages. If W is row stochastic (sum(W(i,:))=1), Wx convex combs.</span>
<span class="token comment">% For this problem, we need W to be such that W^k converges to (1/N)*ones(N,N) for consensus.</span>
<span class="token comment">% Let's use a common Metropolis-Hastings rule for W if graph is not complete.</span>
<span class="token comment">% Or, for simplicity and to keep it close to original, use complete graph avg.</span>
<span class="token comment">% 二重確率性の簡単なチェック（この特定の定式化ではDGDが平均に収束するために厳密には要求されないが、コンセンサスのためには良い習慣）</span>
<span class="token comment">% DGDがa_iを平均化するためには、Wは二重確率でなければならない。</span>
<span class="token comment">% DGD更新 x = Wx - alpha*(x-a) は x_new(i) = x_old(i) + sum_j W(i,j)*(x_old(j)-x_old(i)) - alpha*(x_old(i)-a(i)) と書ける。</span>
<span class="token comment">% または、使用されているように: x_i^{k+1} = sum_j W_ij x_j^k - alpha * (x_i^k - a_i)</span>
<span class="token comment">% Wが列確率的（sum(W(:,j))=1）なら、Wxは平均化する。Wが行確率的（sum(W(i,:))=1）なら、Wxは凸結合する。</span>
<span class="token comment">% この問題では、コンセンサスのためにW^kが(1/N)*ones(N,N)に収束するようなWが必要。</span>
<span class="token comment">% グラフが完全でない場合は、一般的なMetropolis-HastingsルールをWに使用する。</span>
<span class="token comment">% あるいは、簡単のため、またオリジナルに近づけるため、完全グラフの平均を使用する。</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Using simplified complete graph weights for W (equal averaging).\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
W <span class="token operator">=</span> <span class="token function">ones</span><span class="token punctuation">(</span>N<span class="token punctuation">)</span> <span class="token operator">/</span> N<span class="token punctuation">;</span> 

<span class="token comment">% Stepsize for DGD (small constant for stability)</span>
<span class="token comment">% DGDのステップサイズ（安定性のための小さな定数）</span>
alpha <span class="token operator">=</span> <span class="token number">0.2</span><span class="token punctuation">;</span> 

<span class="token comment">% Initialization: Each agent's estimate of mean(p_pref) starts from zero</span>
<span class="token comment">% (or could start from its own p_pref_i)</span>
<span class="token comment">% 初期化：各エージェントのmean(p_pref)の推定値はゼロから始まる</span>
<span class="token comment">% （または自身のp_pref_iから始めることもできる）</span>
z <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">% z_i will be agent i's estimate of mean(p_pref) (z_iはエージェントiのmean(p_pref)の推定値)</span>

<span class="token comment">% Number of iterations for consensus</span>
<span class="token comment">% コンセンサスのための反復回数</span>
T <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>

<span class="token comment">% Store history for plotting convergence of z</span>
<span class="token comment">% zの収束をプロットするための履歴を保存</span>
Zhist <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span> T<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">Zhist</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> z<span class="token punctuation">;</span>

<span class="token comment">% --- DGD for estimating mean(p_pref) ---</span>
<span class="token comment">% --- mean(p_pref)を推定するためのDGD ---</span>
<span class="token keyword">for</span> k <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">:</span>T
    <span class="token comment">% Each agent updates its estimate z_i based on neighbors' estimates</span>
    <span class="token comment">% and its own preferred rate p_pref_i.</span>
    <span class="token comment">% The DGD update: z_new = W * z_old - alpha * (z_old - p_pref)</span>
    <span class="token comment">% Here, 'a' from the original example is 'p_pref'.</span>
    <span class="token comment">% 'x' from the original example is 'z'.</span>
    <span class="token comment">% 各エージェントは、隣人の推定値と自身の優先レートp_pref_iに基づいて推定値z_iを更新する。</span>
    <span class="token comment">% DGD更新式：z_new = W * z_old - alpha * (z_old - p_pref)</span>
    <span class="token comment">% ここで、元の例の'a'は'p_pref'。</span>
    <span class="token comment">% 元の例の'x'は'z'。</span>
    z <span class="token operator">=</span> W <span class="token operator">*</span> z <span class="token operator">-</span> alpha <span class="token operator">*</span> <span class="token punctuation">(</span>z <span class="token operator">-</span> p_pref<span class="token punctuation">)</span><span class="token punctuation">;</span> 

    <span class="token function">Zhist</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> z<span class="token punctuation">;</span>
<span class="token keyword">end</span>

<span class="token comment">% True mean of preferred rates</span>
<span class="token comment">% 優先レートの真の平均</span>
mean_p_pref_true <span class="token operator">=</span> <span class="token function">mean</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% Plot convergence of z_i to mean(p_pref)</span>
<span class="token comment">% z_iのmean(p_pref)への収束をプロット</span>
figure<span class="token punctuation">;</span>
<span class="token function">plot</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">:</span>T<span class="token punctuation">,</span> Zhist<span class="token operator">'</span><span class="token punctuation">,</span> <span class="token string">'LineWidth'</span><span class="token punctuation">,</span> <span class="token number">1.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
hold on<span class="token punctuation">;</span>
<span class="token function">yline</span><span class="token punctuation">(</span>mean_p_pref_true<span class="token punctuation">,</span> <span class="token string">'k--'</span><span class="token punctuation">,</span> <span class="token string">'LineWidth'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">xlabel</span><span class="token punctuation">(</span><span class="token string">'Iteration k'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">ylabel</span><span class="token punctuation">(</span><span class="token string">'z_i^{(k)} (Estimate of mean p_{pref})'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">title</span><span class="token punctuation">(</span><span class="token string">'DGD: Estimating Average Preferred Charging Rate'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
legendStrings <span class="token operator">=</span> <span class="token function">arrayfun</span><span class="token punctuation">(</span><span class="token operator">@</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span> <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'EV %d'</span><span class="token punctuation">,</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">:</span>N<span class="token punctuation">,</span> <span class="token string">'UniformOutput'</span><span class="token punctuation">,</span> false<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">legend</span><span class="token punctuation">(</span><span class="token punctuation">[</span>legendStrings<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'True Mean p_{pref}'</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'Location'</span><span class="token punctuation">,</span><span class="token string">'best'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
grid on<span class="token punctuation">;</span>

<span class="token comment">% --- Calculate final allocated power ---</span>
<span class="token comment">% --- 最終的な割り当て電力を計算 ---</span>
<span class="token comment">% Each EV uses its final estimate of mean(p_pref) (which is z(:,T+1))</span>
<span class="token comment">% If consensus is perfect, all z_i(T+1) are close to mean_p_pref_true.</span>
<span class="token comment">% 各EVはmean(p_pref)の最終推定値（z(:,T+1)）を使用する。</span>
<span class="token comment">% コンセンサスが完璧であれば、すべてのz_i(T+1)はmean_p_pref_trueに近い。</span>
estimated_mean_p_pref <span class="token operator">=</span> <span class="token function">Zhist</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span> T<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">% Each EV has its own estimate (各EVは自身の推定値を持つ)</span>

<span class="token comment">% Optimal allocation formula: p_i = p_pref_i + P_total/N - estimated_mean_p_pref_i</span>
<span class="token comment">% 最適配分式：p_i = p_pref_i + P_total/N - estimated_mean_p_pref_i</span>
p_allocated <span class="token operator">=</span> p_pref <span class="token operator">+</span> <span class="token punctuation">(</span>P_total<span class="token operator">/</span>N<span class="token punctuation">)</span> <span class="token operator">-</span> estimated_mean_p_pref<span class="token punctuation">;</span>

<span class="token comment">% Ensure non-negativity (cannot draw negative power in this simple model)</span>
<span class="token comment">% and also that no EV exceeds a maximum possible rate (e.g., its p_pref_i or a physical limit like 11kW)</span>
<span class="token comment">% For simplicity, we'll just do non-negativity.</span>
<span class="token comment">% More advanced: if an EV hits 0, its demand is removed and power redistributed among others.</span>
<span class="token comment">% 非負性を保証（この単純なモデルでは負の電力を引くことはできない）</span>
<span class="token comment">% また、どのEVも最大可能レート（例：自身のp_pref_iや11kWのような物理的制限）を超えないようにする。</span>
<span class="token comment">% 簡単のため、非負性のみを考慮する。</span>
<span class="token comment">% より高度な場合：EVが0になった場合、その需要は削除され、電力は他のEV間で再配分される。</span>
p_allocated <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> p_allocated<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% Due to max(0,.) constraint, sum(p_allocated) might not be P_total.</span>
<span class="token comment">% A simple proportional rescaling if total allocated power is not P_total.</span>
<span class="token comment">% This is a heuristic step after the distributed calculation.</span>
<span class="token comment">% A fully distributed scheme for exact sum constraint with bounds is more complex (e.g., using ADMM).</span>
<span class="token comment">% max(0,.)制約のため、sum(p_allocated)がP_totalにならない場合がある。</span>
<span class="token comment">% 割り当てられた総電力がP_totalでない場合、単純な比例再スケーリングを行う。</span>
<span class="token comment">% これは分散計算後のヒューリスティックなステップ。</span>
<span class="token comment">% 境界付きの正確な合計制約のための完全分散スキームはより複雑（例：ADMMを使用）。</span>
current_sum_p_allocated <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_allocated<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> current_sum_p_allocated <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token function">abs</span><span class="token punctuation">(</span>current_sum_p_allocated <span class="token operator">-</span> P_total<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">1e-3</span> <span class="token comment">% Add tolerance (許容誤差を追加)</span>
    <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Sum of p_allocated before scaling: %.2f kW. Rescaling to match P_total = %.2f kW.\n'</span><span class="token punctuation">,</span> current_sum_p_allocated<span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>
    p_allocated <span class="token operator">=</span> p_allocated <span class="token operator">*</span> <span class="token punctuation">(</span>P_total <span class="token operator">/</span> current_sum_p_allocated<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">% Re-check for max(0,...) or other individual constraints if scaling pushed values out of bounds.</span>
    <span class="token comment">% For this example, we'll assume this simple scaling is sufficient.</span>
    <span class="token comment">% スケーリングによって値が境界外に出た場合は、max(0,...)や他の個別制約を再確認する。</span>
    <span class="token comment">% この例では、この単純なスケーリングで十分であると仮定する。</span>
    p_allocated <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> p_allocated<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">% Ensure non-negativity again after scaling (スケーリング後に再度非負性を保証)</span>
    <span class="token comment">% If scaling makes sum too low because some hit zero, another pass might be needed.</span>
    <span class="token comment">% For simplicity, we stop here.</span>
    <span class="token comment">% スケーリングによって一部がゼロになり合計が低くなりすぎる場合は、別のパスが必要になる場合がある。</span>
    <span class="token comment">% 簡単のため、ここでは停止する。</span>
<span class="token keyword">else</span>
    <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Sum of p_allocated after max(0,.): %.2f kW. Close enough to P_total = %.2f kW.\n'</span><span class="token punctuation">,</span> current_sum_p_allocated<span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>


<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'\n--- Final Allocations ---\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">disp</span><span class="token punctuation">(</span><span class="token string">'EV # | Preferred (kW) | Allocated (kW) | Estimate of Mean Pref (kW)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token number">i</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span>N
    <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'%4d | %14.2f | %14.2f | %20.2f\n'</span><span class="token punctuation">,</span> <span class="token number">i</span><span class="token punctuation">,</span> <span class="token function">p_pref</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">p_allocated</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">estimated_mean_p_pref</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'--------------------------------------------------------------------\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Sum of Preferred Rates: %.2f kW\n'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Sum of Allocated Rates: %.2f kW (Target: %.2f kW)\n'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_allocated<span class="token punctuation">)</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% Analytical optimal solution (assuming perfect knowledge, no non-negativity initially)</span>
<span class="token comment">% 解析的な最適解（完全な知識を仮定し、最初は非負性を考慮しない）</span>
p_optimal_analytical_no_bounds <span class="token operator">=</span> p_pref <span class="token operator">+</span> <span class="token punctuation">(</span>P_total <span class="token operator">-</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> N<span class="token punctuation">;</span>
<span class="token comment">% This analytical solution doesn't enforce p_i &gt;= 0.</span>
<span class="token comment">% True constrained optimum is harder to write in one line if bounds are active.</span>
<span class="token comment">% この解析解はp_i &gt;= 0を強制しない。</span>
<span class="token comment">% 境界がアクティブな場合、真の制約付き最適解を一行で書くのは難しい。</span>

<span class="token comment">% Plot results</span>
<span class="token comment">% 結果をプロット</span>
figure<span class="token punctuation">;</span>
bar_data <span class="token operator">=</span> <span class="token punctuation">[</span>p_pref<span class="token punctuation">,</span> p_allocated<span class="token punctuation">,</span> p_optimal_analytical_no_bounds<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">% Cap negative analytical results at 0 for fairer comparison in plot</span>
<span class="token comment">% プロットでの公平な比較のため、負の解析結果を0でキャップする</span>
<span class="token function">bar_data</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token function">bar_data</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

b <span class="token operator">=</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span>N<span class="token punctuation">,</span> bar_data<span class="token punctuation">,</span> <span class="token string">'grouped'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">xlabel</span><span class="token punctuation">(</span><span class="token string">'Electric Vehicle (Agent)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">ylabel</span><span class="token punctuation">(</span><span class="token string">'Charging Rate (kW)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">title</span><span class="token punctuation">(</span><span class="token string">'Preferred vs. Allocated Charging Rates'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">xticks</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span>N<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">legend</span><span class="token punctuation">(</span><span class="token string">'Preferred Rate'</span><span class="token punctuation">,</span> <span class="token string">'DGD Allocated Rate'</span><span class="token punctuation">,</span> <span class="token string">'Analytical Optimal (w/o bounds, then &gt;=0)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
grid on<span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span> <span class="token operator">&gt;</span> P_total
    <span class="token function">annotation</span><span class="token punctuation">(</span><span class="token string">'textbox'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0.6</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'String'</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>
        <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'Demand (%.1fkW) &gt; Supply (%.1fkW)\nRates were scaled down.'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>
        <span class="token string">'FitBoxToText'</span><span class="token punctuation">,</span><span class="token string">'on'</span><span class="token punctuation">,</span> <span class="token string">'BackgroundColor'</span><span class="token punctuation">,</span> <span class="token string">'yellow'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">elseif</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span> <span class="token operator">&lt;</span> P_total
    <span class="token function">annotation</span><span class="token punctuation">(</span><span class="token string">'textbox'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0.6</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'String'</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>
        <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'Demand (%.1fkW) &lt; Supply (%.1fkW)\nRates were scaled up.'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>
        <span class="token string">'FitBoxToText'</span><span class="token punctuation">,</span><span class="token string">'on'</span><span class="token punctuation">,</span> <span class="token string">'BackgroundColor'</span><span class="token punctuation">,</span> <span class="token string">'cyan'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">else</span>
    <span class="token function">annotation</span><span class="token punctuation">(</span><span class="token string">'textbox'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0.6</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'String'</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>
        <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'Demand (%.1fkW) == Supply (%.1fkW)'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>
        <span class="token string">'FitBoxToText'</span><span class="token punctuation">,</span><span class="token string">'on'</span><span class="token punctuation">,</span> <span class="token string">'BackgroundColor'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span></code></pre>
<p><strong>Explanation of Changes:</strong></p>
<ol>
<li><strong>Problem Context:</strong> 抽象的な値 <code>a(i)</code> から <code>p_pref(i)</code> (EVの優先充電レート) に切り替えました。<code>P_total</code> (総電力容量) を導入しました。</li>
<li><strong>Optimization Goal:</strong> エージェント (EV) は集合的に、<code>sum p_i = P_total</code> の制約下で <code>sum (p_i - p_pref_i)^2</code> を最小化する配分 <code>p_i</code> を達成しようとします。</li>
<li><strong>Distributed Computation:</strong><ul>
<li>中核となるDGDアルゴリズムは、分散的に <code>mean(p_pref)</code> を計算するために使用されます。各エージェント <code>i</code> は推定値 <code>z_i</code> を維持し、これは <code>mean(p_pref)</code> に収束します。</li>
<li>DGDの更新 <code>z = W * z - alpha * (z - p_pref)</code> は、元の <code>x = W * x - alpha * (x - a)</code> と類似しています。</li>
</ul>
</li>
<li><strong>Final Allocation:</strong> 各エージェント (<code>z_i</code> として) によって <code>mean(p_pref)</code> が推定されると、リソースの自身のシェアを計算します: <code>p_i = p_pref_i + P_total/N - z_i</code>。</li>
<li><strong>Constraints Handling (Simplified):</strong><ul>
<li><code>p_i &gt;= 0</code>: 非負の充電レートを保証するために <code>max(0, ...)</code> を追加しました。</li>
<li><code>sum(p_i) = P_total</code>: <code>max(0,...)</code> の後の合計が <code>P_total</code> と一致しない場合に、単純な比例再スケーリングヒューリスティックを追加しました。これを境界を尊重しながら正確に処理する完全分散メソッドはより複雑です (例: ADMM (Alternating Direction Method of Multipliers) やより洗練された双対分解法) が、この例は中核的なアイデアを示しています。</li>
</ul>
</li>
<li><strong>Communication Graph <code>W</code>:</strong> 当初はリングを提案しましたが、簡単さと元の例の精神 (ここで <code>W=ones(N)/N</code> は完全グラフまたはよく調整されたコンセンサスプロトコルを意味します) との一貫性のために、<code>W = ones(N)/N</code> に戻しました。リングや他の疎なトポロジーは収束を遅くし、<code>W</code> は正しい平均への収束を保証するために慎重に選択する必要があるでしょう (例: Metropolis-Hastings重み)。</li>
<li><strong>Plotting:</strong><ul>
<li>個々の推定値 <code>z_i</code> の真の <code>mean(p_pref)</code> への収束を示します。</li>
<li>優先レート、DGDで割り当てられたレート、および解析的な (理想的だが、最初は非負性の境界を考慮しない) 解を比較する棒グラフを示します。</li>
</ul>
</li>
</ol>
<p>この例は、基本的な分散合意アルゴリズム (DGD) が、より複雑で現実的なマルチエージェント最適化問題を解決するための構成要素となり得ることを示しています。「最適化」とは公正な配分を見つけることであり、DGDは必要なグローバルな情報 (<code>mean(p_pref)</code>) を分散型で得るのに役立ちます。</p>
<h3 class="atx" id="結果">結果</h3>
<pre><code class="fenced-code-block language-matlab">Using simplified complete graph weights <span class="token keyword">for</span> <span class="token function">W</span> <span class="token punctuation">(</span>equal averaging<span class="token punctuation">)</span><span class="token punctuation">.</span>
Sum of p_allocated after <span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token number">50.00</span> kW<span class="token punctuation">.</span> Close enough to P_total <span class="token operator">=</span> <span class="token number">50.00</span> kW<span class="token punctuation">.</span>

Final Allocations <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
EV # <span class="token operator">|</span> <span class="token function">Preferred</span> <span class="token punctuation">(</span>kW<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token function">Allocated</span> <span class="token punctuation">(</span>kW<span class="token punctuation">)</span> <span class="token operator">|</span> Estimate of Mean <span class="token function">Pref</span> <span class="token punctuation">(</span>kW<span class="token punctuation">)</span>
   <span class="token number">1</span> <span class="token operator">|</span>           <span class="token number">6.34</span> <span class="token operator">|</span>           <span class="token number">5.68</span> <span class="token operator">|</span>                 <span class="token number">5.65</span>
   <span class="token number">2</span> <span class="token operator">|</span>           <span class="token number">8.76</span> <span class="token operator">|</span>           <span class="token number">7.70</span> <span class="token operator">|</span>                 <span class="token number">6.06</span>
   <span class="token number">3</span> <span class="token operator">|</span>           <span class="token number">3.00</span> <span class="token operator">|</span>           <span class="token number">2.90</span> <span class="token operator">|</span>                 <span class="token number">5.10</span>
   <span class="token number">4</span> <span class="token operator">|</span>           <span class="token number">5.42</span> <span class="token operator">|</span>           <span class="token number">4.92</span> <span class="token operator">|</span>                 <span class="token number">5.50</span>
   <span class="token number">5</span> <span class="token operator">|</span>           <span class="token number">4.17</span> <span class="token operator">|</span>           <span class="token number">3.88</span> <span class="token operator">|</span>                 <span class="token number">5.29</span>
   <span class="token number">6</span> <span class="token operator">|</span>           <span class="token number">3.74</span> <span class="token operator">|</span>           <span class="token number">3.52</span> <span class="token operator">|</span>                 <span class="token number">5.22</span>
   <span class="token number">7</span> <span class="token operator">|</span>           <span class="token number">4.49</span> <span class="token operator">|</span>           <span class="token number">4.14</span> <span class="token operator">|</span>                 <span class="token number">5.35</span>
   <span class="token number">8</span> <span class="token operator">|</span>           <span class="token number">5.76</span> <span class="token operator">|</span>           <span class="token number">5.21</span> <span class="token operator">|</span>                 <span class="token number">5.56</span>
   <span class="token number">9</span> <span class="token operator">|</span>           <span class="token number">6.17</span> <span class="token operator">|</span>           <span class="token number">5.55</span> <span class="token operator">|</span>                 <span class="token number">5.63</span>
  <span class="token number">10</span> <span class="token operator">|</span>           <span class="token number">7.31</span> <span class="token operator">|</span>           <span class="token number">6.49</span> <span class="token operator">|</span>                 <span class="token number">5.82</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
Sum of Preferred Rates<span class="token operator">:</span> <span class="token number">55.17</span> kW
Sum of Allocated Rates<span class="token operator">:</span> <span class="token number">50.00</span> <span class="token function">kW</span> <span class="token punctuation">(</span>Target<span class="token operator">:</span> <span class="token number">50.00</span> kW<span class="token punctuation">)</span></code></pre>
<p><img alt="" src="dgd_iter.png"></p>
<p><img alt="" src="dgd.png"></p>
<hr>
<p>次に、EV充電の例を拡張して、より洗練された分散最適化手法を導入します。</p>
<h2 class="atx" id="alternating-direction-method-of-multipliers-admm">Alternating Direction Method of Multipliers (ADMM)</h2>
<p>ADMMは、コンセンサス要件や共有制約によって結合された、より小さなサブ問題に分解できる問題に適しています。特に制約付き問題に対しては、単純な双対勾配法よりも優れた収束特性を示すことがよくあります。</p>
<p><strong>Problem Recap:</strong>
Minimize <code>sum_i (p_i - p_pref_i)^2</code>
Subject to:</p>
<ol>
<li><code>sum_i p_i = P_total</code> (total power constraint)</li>
<li><code>p_i &gt;= 0</code> (non-negative power allocation)</li>
</ol>
<p><strong>ADMM Approach for this Problem (Distributed Price Coordination):</strong></p>
<p>リソース割り当て問題に対して一般的なADMM定式化を使用します。各エージェント <code>i</code> (EV) は、自身の選好と「価格」シグナルに基づいてローカルな問題を解きます。その後、エージェントは協調してこの価格を更新し、グローバルな電力制約を満たします。</p>
<ol>
<li><p><strong>Local Variables:</strong></p>
<ul>
<li><code>p_i</code>: エージェント <code>i</code> の割り当て電力。</li>
<li><code>lambda_i</code>: エージェント <code>i</code> のラグランジュ乗数（シャドープライス）の推定値で、<code>sum p_i = P_total</code> 制約に関連します。理想的には、すべての <code>lambda_i</code> が同じ最適値 <code>lambda_star</code> に収束するべきです。</li>
</ul>
</li>
<li><p><strong>ADMM Iterations:</strong>
アルゴリズムはこれらのステップを反復します。</p>
<ul>
<li><p><strong>Step 1: Primal Update (Local Power Allocation <code>p_i</code>)</strong>
各エージェント <code>i</code> は、自身の選好 <code>p_pref_i</code> と現在の価格推定値 <code>lambda_i^k</code> を考慮して、ローカルな最適化問題を解きます。また、安定性のために、またADMMらしくするために近接項 <code>(beta/2)*(p_i - p_i^k)^2</code> を追加します（より単純な形式も存在します）。<code>beta=0</code> の場合、これは双対上昇法に近くなります。
<code>p_i^{k+1} = argmin_{p_val &gt;= 0} { (p_val - p_pref_i)^2 + lambda_i^k * p_val + (beta/2)*(p_val - p_i^k)^2 }</code>
この二次問題の解（導関数をゼロに設定し、非負性を適用することにより）は次のとおりです。
<code>p_i^{k+1} = max(0, (2*p_pref_i - lambda_i^k + beta*p_i^k) / (2 + beta))</code></p>
</li>
<li><p><strong>Step 2: Dual Variable Update (Local Price Update <code>lambda_i</code>)</strong>
このステップには2つのサブステップが含まれます。
a.  <strong>Estimating Constraint Violation:</strong> 各エージェントは、現在の総電力消費量 <code>sum_j p_j^{k+1}</code> の推定値を必要とし、それが <code>P_total</code> と一致するかどうかを確認します。この合計は、コンセンサスアルゴリズム（以前使用したDGDのようなものですが、今度は <code>p_j^{k+1}</code> を合計するため）を使用して分散的に計算されます。
b.  <strong>Updating <code>lambda_i</code>:</strong> 各エージェントは、古い <code>lambda_i^k</code> とグローバルな制約違反の推定値に基づいて <code>lambda_i</code> を更新します。一般的な更新は次のとおりです。</p>
<pre><code class="indented-code-block">`lambda_i^{local_update, k+1} = lambda_i^k + rho * ( (sum_j p_j^{k+1})_i^{estimate} - P_total )`
ここで、`rho` はペナルティパラメータ（ADMMのステップサイズ）であり、`(sum_j p_j^{k+1})_i^{estimate}` はコンセンサスサブステップから得られたエージェント `i` の合計の推定値です。</code></pre>
</li>
<li><p><strong>Step 3: Dual Variable Consensus (Price Agreement <code>lambda_i</code>)</strong>
各 <code>lambda_i</code> は理想的には共通の <code>lambda_star</code> に収束するべきなので、エージェントは <code>lambda_i^{local_update, k+1}</code> の値に対してコンセンサスプロトコルを実行します。
<code>lambda_i^{k+1} = Average_Consensus(lambda^{local_update, k+1})</code>
(つまり、<code>lambda_j^{local_update,k+1}</code> に対してDGDを数回反復実行します)。</p>
</li>
</ul>
</li>
</ol>
<p>この構造は、外側のADMMループと情報集約のための内側のコンセンサスループを含みます。</p>
<pre><code class="fenced-code-block language-matlab"><span class="token comment">% Distributed Resource Allocation for EV Charging via ADMM</span>
<span class="token comment">%-----------------------------------------------------------------</span>
clear<span class="token punctuation">;</span> clc<span class="token punctuation">;</span> close all<span class="token punctuation">;</span>

<span class="token comment">% --- Problem Setup ---</span>
<span class="token comment">% --- 問題設定 ---</span>
N <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>                         <span class="token comment">% Number of EVs (agents) (EVの数（エージェント）)</span>
P_total <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>                   <span class="token comment">% Total Power Capacity (kW) (総電力容量 (kW))</span>
p_pref <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">8</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">;</span>     <span class="token comment">% Preferred rates (3 to 11 kW) (優先レート (3から11kW))</span>

<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Preferred charging rates (kW):\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">disp</span><span class="token punctuation">(</span>p_pref<span class="token operator">'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Sum of preferred rates: %.2f kW\n'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Total available power: %.2f kW\n\n'</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% --- Communication Graph (Complete Graph for Simplicity) ---</span>
<span class="token comment">% --- 通信グラフ（簡単のため完全グラフ）---</span>
<span class="token comment">% W_consensus is for averaging/summing steps within ADMM</span>
<span class="token comment">% W_consensus はADMM内の平均化/合計ステップ用</span>
W_consensus <span class="token operator">=</span> <span class="token function">ones</span><span class="token punctuation">(</span>N<span class="token punctuation">)</span> <span class="token operator">/</span> N<span class="token punctuation">;</span> 
<span class="token comment">% For DGD-style consensus on lambda, a doubly stochastic matrix is good.</span>
<span class="token comment">% For simple averaging over a complete graph, 1/N works for each element.</span>
<span class="token comment">% If graph is not complete, Metropolis-Hastings or similar needed.</span>
<span class="token comment">% ラムダに関するDGDスタイルのコンセンサスには、二重確率行列が良い。</span>
<span class="token comment">% 完全グラフ上の単純な平均化の場合、各要素に1/Nが機能する。</span>
<span class="token comment">% グラフが完全でない場合、Metropolis-Hastingsなどが必要。</span>

<span class="token comment">% --- ADMM Parameters ---</span>
<span class="token comment">% --- ADMMパラメータ ---</span>
T_admm <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>                   <span class="token comment">% Number of ADMM iterations (outer loop) (ADMM反復回数（外側ループ）)</span>
rho <span class="token operator">=</span> <span class="token number">0.1</span><span class="token punctuation">;</span>                      <span class="token comment">% ADMM penalty parameter / dual step size (ADMMペナルティパラメータ/双対ステップサイズ)</span>
beta <span class="token operator">=</span> <span class="token number">0.05</span><span class="token punctuation">;</span>                    <span class="token comment">% Proximal term coefficient for p_i update (0 for simpler update) (p_i更新のための近接項係数（0でより単純な更新）)</span>

<span class="token comment">% --- Consensus Parameters (Inner Loops) ---</span>
<span class="token comment">% --- コンセンサスパラメータ（内側ループ）---</span>
T_consensus <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>               <span class="token comment">% Iterations for inner consensus (sum_p and lambda) (内部コンセンサス（sum_pとラムダ）の反復回数)</span>
alpha_consensus <span class="token operator">=</span> <span class="token number">0.3</span><span class="token punctuation">;</span>          <span class="token comment">% Stepsize for DGD within consensus routines (コンセンサスルーチン内のDGDのステップサイズ)</span>

<span class="token comment">% --- Initialization ---</span>
<span class="token comment">% --- 初期化 ---</span>
p <span class="token operator">=</span> p_pref<span class="token punctuation">;</span>                     <span class="token comment">% Initial power allocations (can be p_pref, 0, or P_total/N) (初期電力割り当て（p_pref、0、またはP_total/Nにすることができる）)</span>
<span class="token comment">% p = ones(N,1) * P_total/N;</span>
lambda <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">% Initial dual variables (price estimates) (初期双対変数（価格推定値）)</span>

<span class="token comment">% --- Store History ---</span>
<span class="token comment">% --- 履歴の保存 ---</span>
Phist_admm <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span> T_admm<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Lambdahist_admm <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span> T_admm<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Sum_p_hist_admm <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> T_admm<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">Phist_admm</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> p<span class="token punctuation">;</span>
<span class="token function">Lambdahist_admm</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> lambda<span class="token punctuation">;</span>
<span class="token function">Sum_p_hist_admm</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Starting ADMM...\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">% --- ADMM Algorithm ---</span>
<span class="token comment">% --- ADMMアルゴリズム ---</span>
<span class="token keyword">for</span> k <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">:</span>T_admm
    <span class="token comment">% --- Step 1: Primal Update (Local p_i solve) ---</span>
    <span class="token comment">% --- ステップ1：プライマル更新（ローカルp_i解決）---</span>
    <span class="token comment">% p_i^{k+1} = max(0, (2*p_pref_i - lambda_i^k + beta*p_i^k) / (2 + beta))</span>
    p_prev_iter <span class="token operator">=</span> p<span class="token punctuation">;</span> <span class="token comment">% Store p_i^k for the proximal term (近接項のためにp_i^kを保存)</span>
    <span class="token keyword">for</span> <span class="token number">i</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">:</span>N
        numerator <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token function">p_pref</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">lambda</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span> <span class="token operator">+</span> beta <span class="token operator">*</span> <span class="token function">p_prev_iter</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        denominator <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">+</span> beta<span class="token punctuation">;</span>
        <span class="token function">p</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> numerator <span class="token operator">/</span> denominator<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>

    <span class="token comment">% --- Step 2a: Distributed Summation of p_i^{k+1} ---</span>
    <span class="token comment">% --- ステップ2a：p_i^{k+1}の分散合計 ---</span>
    <span class="token comment">% Each agent needs an estimate of sum(p). We use DGD to average p_i, then multiply by N.</span>
    <span class="token comment">% Or, DGD to directly sum (more complex DGD variant). Simpler: average then scale.</span>
    <span class="token comment">% 各エージェントはsum(p)の推定値を必要とする。DGDを使用してp_iを平均化し、その後Nを掛ける。</span>
    <span class="token comment">% または、DGDで直接合計する（より複雑なDGDバリアント）。より単純：平均化してからスケーリング。</span>

    current_p_for_avg <span class="token operator">=</span> p<span class="token punctuation">;</span> <span class="token comment">% Values to be averaged (平均化される値)</span>
    avg_p_estimates <span class="token operator">=</span> current_p_for_avg<span class="token punctuation">;</span> <span class="token comment">% Initial estimate is local value (初期推定値はローカル値)</span>

    <span class="token comment">% Store history of sum_p estimation for this ADMM iteration (optional, for debug)</span>
    <span class="token comment">% このADMM反復のsum_p推定の履歴を保存（オプション、デバッグ用）</span>
    <span class="token comment">% AvgPHistInner = zeros(N, T_consensus+1); AvgPHistInner(:,1) = avg_p_estimates;</span>

    <span class="token keyword">for</span> iter_c <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">:</span>T_consensus
        <span class="token comment">% DGD for averaging: x_new = W_consensus * x_old - alpha_c * (x_old - values_to_average)</span>
        <span class="token comment">% Here, we want x_old to converge to mean(values_to_average).</span>
        <span class="token comment">% The standard DGD "x = Wx - alpha*(x-a)" makes x converge to mean(a).</span>
        <span class="token comment">% So 'x' is avg_p_estimates, 'a' is current_p_for_avg</span>
        <span class="token comment">% Using a simpler consensus averaging: new_estimates = W_consensus * old_estimates</span>
        <span class="token comment">% This simple form requires W_consensus to be doubly stochastic and primitive.</span>
        <span class="token comment">% For complete graph W_consensus = ones(N)/N, this works.</span>
        <span class="token comment">% 平均化のためのDGD：x_new = W_consensus * x_old - alpha_c * (x_old - values_to_average)</span>
        <span class="token comment">% ここでは、x_oldがmean(values_to_average)に収束することを望む。</span>
        <span class="token comment">% 標準的なDGD "x = Wx - alpha*(x-a)" はxをmean(a)に収束させる。</span>
        <span class="token comment">% したがって、'x'はavg_p_estimates、'a'はcurrent_p_for_avg</span>
        <span class="token comment">% より単純なコンセンサス平均化を使用：new_estimates = W_consensus * old_estimates</span>
        <span class="token comment">% この単純な形式は、W_consensusが二重確率かつ原始的であることを要求する。</span>
        <span class="token comment">% 完全グラフW_consensus = ones(N)/Nの場合、これは機能する。</span>
        avg_p_estimates <span class="token operator">=</span> W_consensus <span class="token operator">*</span> avg_p_estimates<span class="token punctuation">;</span> <span class="token comment">% Iterative averaging (反復平均化)</span>
        <span class="token comment">% AvgPHistInner(:, iter_c+1) = avg_p_estimates;</span>
    <span class="token keyword">end</span>
    <span class="token comment">% After T_consensus iterations, avg_p_estimates(i) is agent i's estimate of mean(p)</span>
    <span class="token comment">% So, agent i's estimate of sum(p) is N * avg_p_estimates(i)</span>
    <span class="token comment">% T_consensus回の反復後、avg_p_estimates(i)はエージェントiのmean(p)の推定値</span>
    <span class="token comment">% したがって、エージェントiのsum(p)の推定値は N * avg_p_estimates(i)</span>
    estimated_sum_p_all_agents <span class="token operator">=</span> N <span class="token operator">*</span> avg_p_estimates<span class="token punctuation">;</span> <span class="token comment">% Vector of N estimates, ideally all similar (N個の推定値のベクトル、理想的にはすべて類似)</span>

    <span class="token comment">% For the lambda update, each agent uses its own estimate of the sum.</span>
    <span class="token comment">% Or, we could pick one (e.g., agent 1's estimate) if we assume good consensus.</span>
    <span class="token comment">% Let's use each agent's individual estimate for local lambda update.</span>
    <span class="token comment">% ラムダ更新のために、各エージェントは合計の自身の推定値を使用する。</span>
    <span class="token comment">% または、良好なコンセンサスを仮定すれば、1つを選ぶこともできる（例：エージェント1の推定値）。</span>
    <span class="token comment">% ローカルラムダ更新のために、各エージェントの個々の推定値を使用しよう。</span>

    <span class="token comment">% --- Step 2b: Dual Variable Pre-Update (Local lambda_i update) ---</span>
    <span class="token comment">% --- ステップ2b：双対変数の事前更新（ローカルlambda_i更新）---</span>
    lambda_local_update <span class="token operator">=</span> lambda <span class="token operator">+</span> rho <span class="token operator">*</span> <span class="token punctuation">(</span>estimated_sum_p_all_agents <span class="token operator">-</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">% --- Step 3: Consensus on Dual Variables (lambda_i) ---</span>
    <span class="token comment">% --- ステップ3：双対変数（lambda_i）に関するコンセンサス ---</span>
    <span class="token comment">% Agents run consensus on their lambda_local_update values.</span>
    <span class="token comment">% エージェントはlambda_local_update値に対してコンセンサスを実行する。</span>
    lambda_for_consensus <span class="token operator">=</span> lambda_local_update<span class="token punctuation">;</span>
    current_lambda_estimates <span class="token operator">=</span> lambda_for_consensus<span class="token punctuation">;</span> 

    <span class="token comment">% Store history of lambda estimation (optional)</span>
    <span class="token comment">% ラムダ推定の履歴を保存（オプション）</span>
    <span class="token comment">% LambdaHistInner = zeros(N, T_consensus+1); LambdaHistInner(:,1) = current_lambda_estimates;</span>

    <span class="token keyword">for</span> iter_c <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">:</span>T_consensus
        <span class="token comment">% Similar consensus averaging for lambda</span>
        <span class="token comment">% ラムダのための同様のコンセンサス平均化</span>
        current_lambda_estimates <span class="token operator">=</span> W_consensus <span class="token operator">*</span> current_lambda_estimates<span class="token punctuation">;</span>
        <span class="token comment">% LambdaHistInner(:, iter_c+1) = current_lambda_estimates;</span>
    <span class="token keyword">end</span>
    lambda <span class="token operator">=</span> current_lambda_estimates<span class="token punctuation">;</span> <span class="token comment">% All lambda(i) should be close after consensus (コンセンサス後、すべてのlambda(i)は近いはず)</span>

    <span class="token comment">% --- Store history for ADMM iteration k ---</span>
    <span class="token comment">% --- ADMM反復kの履歴を保存 ---</span>
    <span class="token function">Phist_admm</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> p<span class="token punctuation">;</span>
    <span class="token function">Lambdahist_admm</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> lambda<span class="token punctuation">;</span> <span class="token comment">% Store the consensus-agreed lambda (コンセンサス合意されたラムダを保存)</span>
    <span class="token function">Sum_p_hist_admm</span><span class="token punctuation">(</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">% True sum for plotting global constraint satisfaction (グローバル制約満足度プロット用の真の合計)</span>

    <span class="token keyword">if</span> <span class="token function">mod</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> T_admm<span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span>
        <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'ADMM Iter %d/%d: Sum P = %.2f (Target P_total = %.1f), Avg Lambda = %.2f\n'</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>
                k<span class="token punctuation">,</span> T_admm<span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">,</span> P_total<span class="token punctuation">,</span> <span class="token function">mean</span><span class="token punctuation">(</span>lambda<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'ADMM Finished.\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% --- Results ---</span>
<span class="token comment">% --- 結果 ---</span>
p_allocated_admm <span class="token operator">=</span> <span class="token function">Phist_admm</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span> T_admm<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'\n--- ADMM Final Allocations ---\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">disp</span><span class="token punctuation">(</span><span class="token string">'EV # | Preferred (kW) | Allocated (kW) | Final Lambda_i'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token number">i</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span>N
    <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'%4d | %14.2f | %14.2f | %14.4f\n'</span><span class="token punctuation">,</span> <span class="token number">i</span><span class="token punctuation">,</span> <span class="token function">p_pref</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">p_allocated_admm</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">lambda</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'--------------------------------------------------------------------\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Sum of Preferred Rates: %.2f kW\n'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Sum of Allocated Rates (ADMM): %.2f kW (Target: %.2f kW)\n'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_allocated_admm<span class="token punctuation">)</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Final Lambda values std dev: %.4e (should be small if consensus worked)\n'</span><span class="token punctuation">,</span> <span class="token function">std</span><span class="token punctuation">(</span>lambda<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">% --- Analytical Optimal Solution (for comparison) ---</span>
<span class="token comment">% --- 解析的な最適解（比較用）---</span>
<span class="token comment">% Solved via KKT conditions:</span>
<span class="token comment">% KKT条件を介して解決：</span>
<span class="token comment">% L = sum_i (p_i - p_pref_i)^2 - nu (sum_i p_i - P_total) - sum_i mu_i p_i</span>
<span class="token comment">% dL/dp_i = 2(p_i - p_pref_i) - nu - mu_i = 0</span>
<span class="token comment">% If p_i &gt; 0, then mu_i = 0 =&gt; p_i = p_pref_i + nu/2</span>
<span class="token comment">% If p_i = 0, then mu_i &gt;= 0 =&gt; 2(-p_pref_i) - nu - mu_i = 0 =&gt; nu &lt;= -2*p_pref_i</span>
<span class="token comment">% The single 'nu' here corresponds to '-lambda_star' from our ADMM.</span>
<span class="token comment">% So, p_i_opt = p_pref_i - lambda_star/2</span>
<span class="token comment">% We need to find lambda_star such that sum(max(0, p_pref_i - lambda_star/2)) = P_total</span>
<span class="token comment">% This can be found by a 1D root search for lambda_star.</span>
<span class="token comment">% ここでの単一の'nu'は、ADMMの'-lambda_star'に対応する。</span>
<span class="token comment">% したがって、p_i_opt = p_pref_i - lambda_star/2</span>
<span class="token comment">% sum(max(0, p_pref_i - lambda_star/2)) = P_total となるようなlambda_starを見つける必要がある。</span>
<span class="token comment">% これはlambda_starの1次元根探索で見つけることができる。</span>
f_to_solve <span class="token operator">=</span> <span class="token operator">@</span><span class="token punctuation">(</span>l_star<span class="token punctuation">)</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> p_pref <span class="token operator">-</span> l_star<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> P_total<span class="token punctuation">;</span>
<span class="token comment">% Sensible search range for lambda_star:</span>
<span class="token comment">% If all p_pref are high, lambda_star will be positive (to reduce allocations)</span>
<span class="token comment">% If all p_pref are low, lambda_star will be negative (to increase allocations)</span>
<span class="token comment">% lambda_starの適切な探索範囲：</span>
<span class="token comment">% すべてのp_prefが高い場合、lambda_starは正になる（割り当てを減らすため）</span>
<span class="token comment">% すべてのp_prefが低い場合、lambda_starは負になる（割り当てを増やすため）</span>
min_l <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token function">min</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">max</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span> <span class="token operator">-</span> P_total<span class="token operator">/</span>N<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">% Heuristic lower bound (ヒューリスティックな下限)</span>
max_l <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token function">max</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">min</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span> <span class="token operator">+</span> P_total<span class="token operator">/</span>N<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">% Heuristic upper bound (ヒューリスティックな上限)</span>
<span class="token keyword">try</span>
    lambda_star_optimal <span class="token operator">=</span> <span class="token function">fzero</span><span class="token punctuation">(</span>f_to_solve<span class="token punctuation">,</span> <span class="token function">mean</span><span class="token punctuation">(</span>lambda<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">% Start search near ADMM's result (ADMMの結果の近くで探索を開始)</span>
<span class="token keyword">catch</span>
    <span class="token keyword">try</span> 
        lambda_star_optimal <span class="token operator">=</span> <span class="token function">fzero</span><span class="token punctuation">(</span>f_to_solve<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">% Try starting at 0 (0から開始してみる)</span>
    <span class="token keyword">catch</span>
        <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'fzero failed to find analytical lambda_star. Plotting without it.\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        lambda_star_optimal <span class="token operator">=</span> <span class="token keyword">NaN</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>
p_optimal_analytical <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> p_pref <span class="token operator">-</span> lambda_star_optimal<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">% --- Plotting ---</span>
<span class="token comment">% --- プロット ---</span>
<span class="token comment">% 1. Convergence of allocations p_i</span>
<span class="token comment">% 1. 割り当てp_iの収束</span>
figure<span class="token punctuation">;</span>
<span class="token function">plot</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">:</span>T_admm<span class="token punctuation">,</span> Phist_admm<span class="token operator">'</span><span class="token punctuation">,</span> <span class="token string">'LineWidth'</span><span class="token punctuation">,</span> <span class="token number">1.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">xlabel</span><span class="token punctuation">(</span><span class="token string">'ADMM Iteration k'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">ylabel</span><span class="token punctuation">(</span><span class="token string">'Allocated Power p_i^{(k)} (kW)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">title</span><span class="token punctuation">(</span><span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'ADMM: EV Power Allocations (N=%d, rho=%.2f, beta=%.2f)'</span><span class="token punctuation">,</span> N<span class="token punctuation">,</span> rho<span class="token punctuation">,</span> beta<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
legendStrings_p <span class="token operator">=</span> <span class="token function">arrayfun</span><span class="token punctuation">(</span><span class="token operator">@</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span> <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'EV %d'</span><span class="token punctuation">,</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">:</span>N<span class="token punctuation">,</span> <span class="token string">'UniformOutput'</span><span class="token punctuation">,</span> false<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">legend</span><span class="token punctuation">(</span>legendStrings_p<span class="token punctuation">,</span><span class="token string">'Location'</span><span class="token punctuation">,</span><span class="token string">'best'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
grid on<span class="token punctuation">;</span>

<span class="token comment">% 2. Convergence of dual variables lambda_i</span>
<span class="token comment">% 2. 双対変数lambda_iの収束</span>
figure<span class="token punctuation">;</span>
<span class="token function">plot</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">:</span>T_admm<span class="token punctuation">,</span> Lambdahist_admm<span class="token operator">'</span><span class="token punctuation">,</span> <span class="token string">'LineWidth'</span><span class="token punctuation">,</span> <span class="token number">1.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
hold on<span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token operator">~</span><span class="token function">isnan</span><span class="token punctuation">(</span>lambda_star_optimal<span class="token punctuation">)</span>
    <span class="token function">yline</span><span class="token punctuation">(</span>lambda_star_optimal<span class="token punctuation">,</span> <span class="token string">'k--'</span><span class="token punctuation">,</span> <span class="token string">'LineWidth'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'Label'</span><span class="token punctuation">,</span> <span class="token string">'Optimal \lambda* (analytical)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
<span class="token function">xlabel</span><span class="token punctuation">(</span><span class="token string">'ADMM Iteration k'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">ylabel</span><span class="token punctuation">(</span><span class="token string">'Dual Variable \lambda_i^{(k)}'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">title</span><span class="token punctuation">(</span><span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'ADMM: Convergence of Dual Variables (Price Estimates)'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
legendStrings_l <span class="token operator">=</span> <span class="token function">arrayfun</span><span class="token punctuation">(</span><span class="token operator">@</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span> <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'\\lambda_%d'</span><span class="token punctuation">,</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">:</span>N<span class="token punctuation">,</span> <span class="token string">'UniformOutput'</span><span class="token punctuation">,</span> false<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token operator">~</span><span class="token function">isnan</span><span class="token punctuation">(</span>lambda_star_optimal<span class="token punctuation">)</span>
    <span class="token function">legend</span><span class="token punctuation">(</span><span class="token punctuation">[</span>legendStrings_l<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'Optimal \lambda*'</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'Location'</span><span class="token punctuation">,</span><span class="token string">'best'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">else</span>
    <span class="token function">legend</span><span class="token punctuation">(</span>legendStrings_l<span class="token punctuation">,</span><span class="token string">'Location'</span><span class="token punctuation">,</span><span class="token string">'best'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
grid on<span class="token punctuation">;</span>

<span class="token comment">% 3. Convergence of Sum p_i to P_total</span>
<span class="token comment">% 3. Sum p_i の P_total への収束</span>
figure<span class="token punctuation">;</span>
<span class="token function">plot</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">:</span>T_admm<span class="token punctuation">,</span> Sum_p_hist_admm<span class="token punctuation">,</span> <span class="token string">'b-'</span><span class="token punctuation">,</span> <span class="token string">'LineWidth'</span><span class="token punctuation">,</span> <span class="token number">1.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
hold on<span class="token punctuation">;</span>
<span class="token function">yline</span><span class="token punctuation">(</span>P_total<span class="token punctuation">,</span> <span class="token string">'r--'</span><span class="token punctuation">,</span> <span class="token string">'LineWidth'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">xlabel</span><span class="token punctuation">(</span><span class="token string">'ADMM Iteration k'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">ylabel</span><span class="token punctuation">(</span><span class="token string">'Total Allocated Power \Sigma p_i^{(k)} (kW)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">title</span><span class="token punctuation">(</span><span class="token string">'ADMM: Convergence of Total Power to P_{total}'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">legend</span><span class="token punctuation">(</span><span class="token string">'Sum p_i^{(k)}'</span><span class="token punctuation">,</span> <span class="token string">'P_{total}'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
grid on<span class="token punctuation">;</span> <span class="token function">ylim</span><span class="token punctuation">(</span><span class="token punctuation">[</span>P_total<span class="token operator">*</span><span class="token number">0.8</span><span class="token punctuation">,</span> P_total<span class="token operator">*</span><span class="token number">1.2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">% Adjust ylim if needed (必要に応じてylimを調整)</span>

<span class="token comment">% 4. Final Bar Chart Comparison</span>
<span class="token comment">% 4. 最終的な棒グラフ比較</span>
figure<span class="token punctuation">;</span>
bar_data <span class="token operator">=</span> <span class="token punctuation">[</span>p_pref<span class="token punctuation">,</span> p_allocated_admm<span class="token punctuation">]</span><span class="token punctuation">;</span>
legend_items <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Preferred Rate'</span><span class="token punctuation">,</span> <span class="token string">'ADMM Allocated Rate'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token operator">~</span><span class="token function">isnan</span><span class="token punctuation">(</span>lambda_star_optimal<span class="token punctuation">)</span>
    bar_data <span class="token operator">=</span> <span class="token punctuation">[</span>bar_data<span class="token punctuation">,</span> p_optimal_analytical<span class="token punctuation">]</span><span class="token punctuation">;</span>
    legend_items <span class="token operator">=</span> <span class="token punctuation">[</span>legend_items<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'Analytical Optimal'</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

b <span class="token operator">=</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span>N<span class="token punctuation">,</span> bar_data<span class="token punctuation">,</span> <span class="token string">'grouped'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">xlabel</span><span class="token punctuation">(</span><span class="token string">'Electric Vehicle (Agent)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">ylabel</span><span class="token punctuation">(</span><span class="token string">'Charging Rate (kW)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">title</span><span class="token punctuation">(</span><span class="token string">'Preferred vs. Allocated Charging Rates (ADMM)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">xticks</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span>N<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">legend</span><span class="token punctuation">(</span>legend_items<span class="token punctuation">,</span> <span class="token string">'Location'</span><span class="token punctuation">,</span> <span class="token string">'northwest'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
grid on<span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span> <span class="token operator">&gt;</span> P_total
    annotation_text <span class="token operator">=</span> <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'Demand (%.1fkW) &gt; Supply (%.1fkW)\nRates adjusted by ADMM.'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>
    annotation_color <span class="token operator">=</span> <span class="token string">'yellow'</span><span class="token punctuation">;</span>
<span class="token keyword">elseif</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span> <span class="token operator">&lt;</span> P_total
    annotation_text <span class="token operator">=</span> <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'Demand (%.1fkW) &lt; Supply (%.1fkW)\nRates adjusted by ADMM.'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>
    annotation_color <span class="token operator">=</span> <span class="token string">'cyan'</span><span class="token punctuation">;</span>
<span class="token keyword">else</span>
    annotation_text <span class="token operator">=</span> <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'Demand (%.1fkW) == Supply (%.1fkW)'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>
    annotation_color <span class="token operator">=</span> <span class="token string">'green'</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
<span class="token function">annotation</span><span class="token punctuation">(</span><span class="token string">'textbox'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0.55</span><span class="token punctuation">,</span> <span class="token number">0.15</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'String'</span><span class="token punctuation">,</span> annotation_text<span class="token punctuation">,</span> <span class="token punctuation">...</span>
        <span class="token string">'FitBoxToText'</span><span class="token punctuation">,</span><span class="token string">'on'</span><span class="token punctuation">,</span> <span class="token string">'BackgroundColor'</span><span class="token punctuation">,</span> annotation_color<span class="token punctuation">,</span> <span class="token string">'FontSize'</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><strong>Key Elements and Changes:</strong></p>
<ol>
<li><strong>ADMM Framework:</strong> プライマル更新、双対更新、およびコンセンサスという中核的な反復構造は、分散問題に適用されるADMMの特徴です。</li>
<li><strong>Dual Variables (<code>lambda_i</code>):</strong> これらは電力の「価格」を表します。ADMMは、エージェントが市場をクリアする（つまり、需要を <code>P_total</code> に一致させる）最適な価格に収束するのを助けます。</li>
<li><strong>Proximal Term (<code>beta</code>):</strong> <code>p_i</code> 更新における <code>(beta/2)*(p_val - p_i^k)^2</code> 項は近接項です。これは更新を正則化し、<code>p_i</code> が1回の反復で急激に変化するのを防ぎます。これにより、特に <code>rho</code> がうまく調整されていない場合に、安定性と収束性が向上します。<code>beta=0</code> の場合、<code>p_i</code> 更新はより単純で、（拡張）ラグランジアン法または双対上昇法のステップに対応します。</li>
<li><strong>Penalty Parameter (<code>rho</code>):</strong> これはADMMにおいて重要です。目的関数の最小化と制約充足のバランスを取ります。<code>rho</code>（および <code>beta</code>）の調整は、収束速度に大きな影響を与える可能性があります。</li>
<li><strong>Nested Consensus:</strong><ul>
<li><strong>Summation of <code>p_i</code>:</strong> <code>sum p_i = P_total</code> 制約を確認するために、エージェントは現在の合計を知る必要があります。これは、分散平均化（または合計）プロトコル（ここでは <code>W_consensus</code> を使用した単純化された反復平均化）を実行することによって達成されます。</li>
<li><strong>Consensus on <code>lambda_i</code>:</strong> 各エージェントが（推定された）グローバルな電力不一致に基づいて「望ましい」次の <code>lambda_i</code> を計算した後、すべての <code>lambda_i</code> が共通の値に収束するように別のコンセンサスラウンドを実行します。これにより、ネットワーク全体で価格シグナルが一貫性を持ちます。</li>
</ul>
</li>
<li><strong>Modularity:</strong> コンセンサスステップはサブルーチンと見なすことができます。より高度なコンセンサスアルゴリズム（例：特定のグラフトポロジーに対するより速い収束率を持つもの、または最適化されたステップサイズのDGD）をプラグインすることができます。</li>
</ol>
<p><strong>How it Compares to the Simpler DGD for Averaging:</strong></p>
<ul>
<li>以前のDGDの例は <code>mean(a)</code> を計算するために使用され、その後、最適な <code>p_i</code> の解析式に<em>代入</em>されました。</li>
<li>このADMMアプローチは、制約付き最適化問題を反復的に<em>直接解き</em>ます。DGDのようなコンセンサスは、ADMMの<em>内部ループ</em>コンポーネントとなり、情報交換（<code>p</code> の合計と <code>lambda</code> の平均化）に使用されます。</li>
<li>ADMMは一般に、制約の処理に対してよりロバストであり、より弱い条件下で、または平均化後の単純な解析解が利用できないより複雑な問題に対して収束することができます。</li>
</ul>
<p>このADMMの例は、結合制約を持つ分散最適化問題に取り組むための、より洗練された一般化可能な方法を提供します。</p>
<h3 class="atx" id="結果-1">結果</h3>
<pre><code class="fenced-code-block language-matlab">Starting ADMM<span class="token punctuation">...</span>
ADMM Iter <span class="token number">10</span><span class="token operator">/</span><span class="token number">100</span><span class="token operator">:</span> Sum P <span class="token operator">=</span> <span class="token number">50.01</span> <span class="token punctuation">(</span>Target P_total <span class="token operator">=</span> <span class="token number">50.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Avg Lambda <span class="token operator">=</span> <span class="token number">1.03</span>
ADMM Iter <span class="token number">20</span><span class="token operator">/</span><span class="token number">100</span><span class="token operator">:</span> Sum P <span class="token operator">=</span> <span class="token number">50.00</span> <span class="token punctuation">(</span>Target P_total <span class="token operator">=</span> <span class="token number">50.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Avg Lambda <span class="token operator">=</span> <span class="token number">1.03</span>
ADMM Iter <span class="token number">30</span><span class="token operator">/</span><span class="token number">100</span><span class="token operator">:</span> Sum P <span class="token operator">=</span> <span class="token number">50.00</span> <span class="token punctuation">(</span>Target P_total <span class="token operator">=</span> <span class="token number">50.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Avg Lambda <span class="token operator">=</span> <span class="token number">1.03</span>
ADMM Iter <span class="token number">40</span><span class="token operator">/</span><span class="token number">100</span><span class="token operator">:</span> Sum P <span class="token operator">=</span> <span class="token number">50.00</span> <span class="token punctuation">(</span>Target P_total <span class="token operator">=</span> <span class="token number">50.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Avg Lambda <span class="token operator">=</span> <span class="token number">1.03</span>
ADMM Iter <span class="token number">50</span><span class="token operator">/</span><span class="token number">100</span><span class="token operator">:</span> Sum P <span class="token operator">=</span> <span class="token number">50.00</span> <span class="token punctuation">(</span>Target P_total <span class="token operator">=</span> <span class="token number">50.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Avg Lambda <span class="token operator">=</span> <span class="token number">1.03</span>
ADMM Iter <span class="token number">60</span><span class="token operator">/</span><span class="token number">100</span><span class="token operator">:</span> Sum P <span class="token operator">=</span> <span class="token number">50.00</span> <span class="token punctuation">(</span>Target P_total <span class="token operator">=</span> <span class="token number">50.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Avg Lambda <span class="token operator">=</span> <span class="token number">1.03</span>
ADMM Iter <span class="token number">70</span><span class="token operator">/</span><span class="token number">100</span><span class="token operator">:</span> Sum P <span class="token operator">=</span> <span class="token number">50.00</span> <span class="token punctuation">(</span>Target P_total <span class="token operator">=</span> <span class="token number">50.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Avg Lambda <span class="token operator">=</span> <span class="token number">1.03</span>
ADMM Iter <span class="token number">80</span><span class="token operator">/</span><span class="token number">100</span><span class="token operator">:</span> Sum P <span class="token operator">=</span> <span class="token number">50.00</span> <span class="token punctuation">(</span>Target P_total <span class="token operator">=</span> <span class="token number">50.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Avg Lambda <span class="token operator">=</span> <span class="token number">1.03</span>
ADMM Iter <span class="token number">90</span><span class="token operator">/</span><span class="token number">100</span><span class="token operator">:</span> Sum P <span class="token operator">=</span> <span class="token number">50.00</span> <span class="token punctuation">(</span>Target P_total <span class="token operator">=</span> <span class="token number">50.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Avg Lambda <span class="token operator">=</span> <span class="token number">1.03</span>
ADMM Iter <span class="token number">100</span><span class="token operator">/</span><span class="token number">100</span><span class="token operator">:</span> Sum P <span class="token operator">=</span> <span class="token number">50.00</span> <span class="token punctuation">(</span>Target P_total <span class="token operator">=</span> <span class="token number">50.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Avg Lambda <span class="token operator">=</span> <span class="token number">1.03</span>
ADMM Finished<span class="token punctuation">.</span>

ADMM Final Allocations <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
EV # <span class="token operator">|</span> <span class="token function">Preferred</span> <span class="token punctuation">(</span>kW<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token function">Allocated</span> <span class="token punctuation">(</span>kW<span class="token punctuation">)</span> <span class="token operator">|</span> Final Lambda_i
   <span class="token number">1</span> <span class="token operator">|</span>           <span class="token number">6.34</span> <span class="token operator">|</span>           <span class="token number">5.82</span> <span class="token operator">|</span>         <span class="token number">1.0341</span>
   <span class="token number">2</span> <span class="token operator">|</span>           <span class="token number">8.76</span> <span class="token operator">|</span>           <span class="token number">8.25</span> <span class="token operator">|</span>         <span class="token number">1.0341</span>
   <span class="token number">3</span> <span class="token operator">|</span>           <span class="token number">3.00</span> <span class="token operator">|</span>           <span class="token number">2.48</span> <span class="token operator">|</span>         <span class="token number">1.0341</span>
   <span class="token number">4</span> <span class="token operator">|</span>           <span class="token number">5.42</span> <span class="token operator">|</span>           <span class="token number">4.90</span> <span class="token operator">|</span>         <span class="token number">1.0341</span>
   <span class="token number">5</span> <span class="token operator">|</span>           <span class="token number">4.17</span> <span class="token operator">|</span>           <span class="token number">3.66</span> <span class="token operator">|</span>         <span class="token number">1.0341</span>
   <span class="token number">6</span> <span class="token operator">|</span>           <span class="token number">3.74</span> <span class="token operator">|</span>           <span class="token number">3.22</span> <span class="token operator">|</span>         <span class="token number">1.0341</span>
   <span class="token number">7</span> <span class="token operator">|</span>           <span class="token number">4.49</span> <span class="token operator">|</span>           <span class="token number">3.97</span> <span class="token operator">|</span>         <span class="token number">1.0341</span>
   <span class="token number">8</span> <span class="token operator">|</span>           <span class="token number">5.76</span> <span class="token operator">|</span>           <span class="token number">5.25</span> <span class="token operator">|</span>         <span class="token number">1.0341</span>
   <span class="token number">9</span> <span class="token operator">|</span>           <span class="token number">6.17</span> <span class="token operator">|</span>           <span class="token number">5.66</span> <span class="token operator">|</span>         <span class="token number">1.0341</span>
  <span class="token number">10</span> <span class="token operator">|</span>           <span class="token number">7.31</span> <span class="token operator">|</span>           <span class="token number">6.79</span> <span class="token operator">|</span>         <span class="token number">1.0341</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
Sum of Preferred Rates<span class="token operator">:</span> <span class="token number">55.17</span> kW
Sum of Allocated <span class="token function">Rates</span> <span class="token punctuation">(</span>ADMM<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token number">50.00</span> <span class="token function">kW</span> <span class="token punctuation">(</span>Target<span class="token operator">:</span> <span class="token number">50.00</span> kW<span class="token punctuation">)</span>
Final Lambda values std dev<span class="token operator">:</span> <span class="token number">0.0000e+00</span> <span class="token punctuation">(</span>should be small <span class="token keyword">if</span> consensus worked<span class="token punctuation">)</span></code></pre>
<p><img alt="" src="admm_1.png"></p>
<p><img alt="" src="admm_2.png"></p>
<p><img alt="" src="admm_3.png"></p>
<p><img alt="" src="admm_4.png"></p>
<hr>
<p>次に、MATLABのGlobal Optimization Toolboxの <code>particleswarm</code> 関数を使用して、EV充電リソース割り当て問題を粒子群最適化 (PSO) を用いて解いてみましょう。</p>
<h2 class="atx" id="solve-with-particle-swarm-optimization-pso">Solve with Particle Swarm Optimization (PSO)</h2>
<p><strong>Challenge with PSO for this Problem:</strong>
標準の <code>particleswarm</code> 関数は、境界制約 (<code>lb</code>, <code>ub</code>) を直接扱いますが、<code>sum(p_i) = P_total</code> のような一般的な線形または非線形の等式制約は扱いません。これは<strong>ペナルティ法</strong>を使用して対処します。合計制約に違反する解に大きなペナルティを課すように目的関数を変更します。</p>
<p><strong>Modified Optimization Problem for PSO:</strong></p>
<p>Minimize <code>f(p) = sum_i (p_i - p_pref_i)^2 + C * (sum_i p_i - P_total)^2</code>
Subject to:</p>
<ol>
<li><code>0 &lt;= p_i &lt;= P_total</code> (または、既知であればより厳しい上限、例：個々のEVの最大充電レート)</li>
</ol>
<p>ここで <code>C</code> は大きなペナルティ係数です。</p>
<pre><code class="fenced-code-block language-matlab"><span class="token comment">% Distributed Resource Allocation for EV Charging via PSO</span>
<span class="token comment">%-----------------------------------------------------------------</span>
clear<span class="token punctuation">;</span> clc<span class="token punctuation">;</span> close all<span class="token punctuation">;</span>

<span class="token comment">% --- Problem Setup ---</span>
<span class="token comment">% --- 問題設定 ---</span>
N <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>                         <span class="token comment">% Number of EVs (agents) (EVの数（エージェント）)</span>
P_total <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>                   <span class="token comment">% Total Power Capacity (kW) (総電力容量 (kW))</span>
p_pref <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">8</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">;</span>     <span class="token comment">% Preferred rates (3 to 11 kW) (優先レート (3から11kW))</span>

<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Preferred charging rates (kW):\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">disp</span><span class="token punctuation">(</span>p_pref<span class="token operator">'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Sum of preferred rates: %.2f kW\n'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Total available power: %.2f kW\n\n'</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% --- PSO Parameters ---</span>
<span class="token comment">% --- PSOパラメータ ---</span>
nvars <span class="token operator">=</span> N<span class="token punctuation">;</span>                      <span class="token comment">% Number of optimization variables (power for each EV) (最適化変数の数（各EVの電力）)</span>

<span class="token comment">% Lower bounds (p_i &gt;= 0)</span>
<span class="token comment">% 下限 (p_i &gt;= 0)</span>
lb <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% Upper bounds (0 &lt;= p_i &lt;= P_total theoretically, or max individual charge rate)</span>
<span class="token comment">% For simplicity, let's use P_total as a loose upper bound for each.</span>
<span class="token comment">% A tighter bound could be max(p_pref) or a physical EV charging limit.</span>
<span class="token comment">% 上限 (理論的には 0 &lt;= p_i &lt;= P_total、または個々の最大充電レート)</span>
<span class="token comment">% 簡単のため、各EVの緩い上限としてP_totalを使用する。</span>
<span class="token comment">% より厳しい境界はmax(p_pref)や物理的なEV充電制限など。</span>
ub <span class="token operator">=</span> P_total <span class="token operator">*</span> <span class="token function">ones</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">% ub = min(P_total, max(15, p_pref * 1.5)); % Example of slightly tighter UB (少し厳しい上限の例)</span>

<span class="token comment">% Penalty coefficient for the sum constraint</span>
<span class="token comment">% 合計制約のペナルティ係数</span>
penalty_coefficient <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span> <span class="token comment">% This might need tuning (調整が必要な場合がある)</span>

<span class="token comment">% --- Objective Function for PSO (with penalty) ---</span>
<span class="token comment">% --- PSOの目的関数（ペナルティ付き）---</span>
<span class="token comment">% The input 'p' to this function will be a row vector (PSO standard)</span>
<span class="token comment">% この関数への入力'p'は行ベクトルになる（PSO標準）</span>
objectiveFunction <span class="token operator">=</span> <span class="token operator">@</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">(</span>p<span class="token operator">'</span> <span class="token operator">-</span> p_pref<span class="token punctuation">)</span><span class="token operator">.^</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">...</span>
                         penalty_coefficient <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token operator">-</span> P_total<span class="token punctuation">)</span><span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">;</span>
<span class="token comment">% Note: p' is used because p_pref is a column vector.</span>
<span class="token comment">% PSO passes 'p' as a row vector to the objective function.</span>
<span class="token comment">% 注意：p_prefは列ベクトルなのでp'を使用。</span>
<span class="token comment">% PSOは'p'を行ベクトルとして目的関数に渡す。</span>

<span class="token comment">% --- PSO Options ---</span>
<span class="token comment">% --- PSOオプション ---</span>
options <span class="token operator">=</span> <span class="token function">optimoptions</span><span class="token punctuation">(</span><span class="token string">'particleswarm'</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>
    <span class="token string">'SwarmSize'</span><span class="token punctuation">,</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token operator">*</span>nvars<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">...</span> <span class="token comment">% Number of particles (粒子数)</span>
    <span class="token string">'MaxIterations'</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token operator">*</span>nvars<span class="token punctuation">,</span> <span class="token punctuation">...</span>    <span class="token comment">% Max iterations (最大反復回数)</span>
    <span class="token string">'Display'</span><span class="token punctuation">,</span> <span class="token string">'iter'</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>           <span class="token comment">% Show iteration progress (反復の進行状況を表示)</span>
    <span class="token string">'ObjectiveLimit'</span><span class="token punctuation">,</span> <span class="token number">1e-4</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>      <span class="token comment">% Stop if objective is good enough (目的が十分に良ければ停止)</span>
    <span class="token string">'FunctionTolerance'</span><span class="token punctuation">,</span> <span class="token number">1e-6</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>   <span class="token comment">% Stop if objective change is small (目的の変化が小さければ停止)</span>
    <span class="token string">'UseParallel'</span><span class="token punctuation">,</span> false<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">% Set to true if you have Parallel Computing Toolbox</span>
                                      <span class="token comment">% and problem is large enough.</span>
                                      <span class="token comment">% Parallel Computing Toolboxがあり、問題が十分に大きい場合はtrueに設定。</span>

<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Starting PSO...\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">% --- Run PSO ---</span>
<span class="token comment">% --- PSO実行 ---</span>
<span class="token comment">% particleswarm(objectiveFunction, nvars, lb, ub, options)</span>
<span class="token punctuation">[</span>p_optimal_pso_raw<span class="token punctuation">,</span> fval_pso<span class="token punctuation">,</span> exitflag<span class="token punctuation">,</span> output_pso<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">particleswarm</span><span class="token punctuation">(</span>objectiveFunction<span class="token punctuation">,</span> nvars<span class="token punctuation">,</span> lb<span class="token punctuation">,</span> ub<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'PSO Finished.\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'PSO Exit Flag: %d\n'</span><span class="token punctuation">,</span> exitflag<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">disp</span><span class="token punctuation">(</span>output_pso<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Objective function value at solution: %.4e\n'</span><span class="token punctuation">,</span> fval_pso<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Constraint term value: %.4e * (%.4f - %.1f)^2 = %.4e\n'</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>
    penalty_coefficient<span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_optimal_pso_raw<span class="token punctuation">)</span><span class="token punctuation">,</span> P_total<span class="token punctuation">,</span> <span class="token punctuation">...</span>
    penalty_coefficient <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span>p_optimal_pso_raw<span class="token punctuation">)</span> <span class="token operator">-</span> P_total<span class="token punctuation">)</span><span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% --- Post-processing the PSO solution ---</span>
<span class="token comment">% --- PSO解の後処理 ---</span>
<span class="token comment">% PSO solution is a row vector, convert to column for consistency</span>
<span class="token comment">% PSO解は行ベクトルなので、一貫性のために列ベクトルに変換</span>
p_allocated_pso <span class="token operator">=</span> p_optimal_pso_raw<span class="token operator">'</span><span class="token punctuation">;</span>

<span class="token comment">% Check the sum constraint satisfaction</span>
<span class="token comment">% 合計制約の満足度をチェック</span>
sum_p_pso <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_allocated_pso<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Sum of allocated rates (PSO raw): %.4f kW (Target: %.2f kW)\n'</span><span class="token punctuation">,</span> sum_p_pso<span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% If the sum is not exactly P_total due to penalty approximation,</span>
<span class="token comment">% we can apply a simple scaling as a heuristic, provided the solution is "close".</span>
<span class="token comment">% This is common practice if the penalty method gets us near the feasible region.</span>
<span class="token comment">% ペナルティ近似のために合計が正確にP_totalでない場合、</span>
<span class="token comment">% 解が「近い」場合に限り、ヒューリスティックとして単純なスケーリングを適用できる。</span>
<span class="token comment">% これは、ペナルティ法が実行可能領域の近くに到達した場合の一般的な慣行。</span>
<span class="token keyword">if</span> <span class="token function">abs</span><span class="token punctuation">(</span>sum_p_pso <span class="token operator">-</span> P_total<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">1e-3</span> <span class="token operator">&amp;&amp;</span> sum_p_pso <span class="token operator">&gt;</span> <span class="token number">1e-6</span> <span class="token comment">% Add tolerance and check if sum is not zero (許容誤差を追加し、合計がゼロでないことを確認)</span>
    <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Normalizing PSO solution to meet sum constraint exactly.\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    p_allocated_pso_normalized <span class="token operator">=</span> p_allocated_pso <span class="token operator">*</span> <span class="token punctuation">(</span>P_total <span class="token operator">/</span> sum_p_pso<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">% Ensure non-negativity again after scaling (though unlikely to be an issue if lb was 0 and scaling factor &gt; 0)</span>
    <span class="token comment">% スケーリング後に再度非負性を保証（lbが0でスケーリング係数が&gt;0であれば問題になる可能性は低い）</span>
    p_allocated_pso_normalized <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> p_allocated_pso_normalized<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">% If this re-normalization drastically changes the solution or violates other complex constraints</span>
    <span class="token comment">% (not present here), then the penalty method or PSO tuning needs more work.</span>
    <span class="token comment">% この再正規化が解を大幅に変更したり、他の複雑な制約（ここでは存在しない）に違反したりする場合、</span>
    <span class="token comment">% ペナルティ法またはPSOの調整がさらに必要。</span>
<span class="token keyword">else</span>
    p_allocated_pso_normalized <span class="token operator">=</span> p_allocated_pso<span class="token punctuation">;</span>
<span class="token keyword">end</span>
<span class="token comment">% Re-check sum after potential normalization</span>
<span class="token comment">% 正規化の可能性の後に合計を再確認</span>
sum_p_pso_normalized <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_allocated_pso_normalized<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'\n--- PSO Final Allocations (after potential normalization) ---\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">disp</span><span class="token punctuation">(</span><span class="token string">'EV # | Preferred (kW) | Allocated (kW)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token number">i</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span>N
    <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'%4d | %14.2f | %14.2f\n'</span><span class="token punctuation">,</span> <span class="token number">i</span><span class="token punctuation">,</span> <span class="token function">p_pref</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">p_allocated_pso_normalized</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'--------------------------------------------------------------------\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Sum of Preferred Rates: %.2f kW\n'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Sum of Allocated Rates (PSO normalized): %.2f kW (Target: %.2f kW)\n'</span><span class="token punctuation">,</span> sum_p_pso_normalized<span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Original objective value (without penalty) for PSO solution: %.4f\n'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">(</span>p_allocated_pso_normalized <span class="token operator">-</span> p_pref<span class="token punctuation">)</span><span class="token operator">.^</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">% --- Analytical Optimal Solution (for comparison, same as in ADMM example) ---</span>
<span class="token comment">% --- 解析的な最適解（比較用、ADMMの例と同じ）---</span>
f_to_solve <span class="token operator">=</span> <span class="token operator">@</span><span class="token punctuation">(</span>lambda_star<span class="token punctuation">)</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> p_pref <span class="token operator">-</span> lambda_star<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> P_total<span class="token punctuation">;</span>
<span class="token keyword">try</span>
    lambda_star_optimal <span class="token operator">=</span> <span class="token function">fzero</span><span class="token punctuation">(</span>f_to_solve<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    p_optimal_analytical <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> p_pref <span class="token operator">-</span> lambda_star_optimal<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    analytical_available <span class="token operator">=</span> true<span class="token punctuation">;</span>
    <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'Analytical optimal objective value: %.4f\n'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">(</span>p_optimal_analytical <span class="token operator">-</span> p_pref<span class="token punctuation">)</span><span class="token operator">.^</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">catch</span>
    <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'fzero failed to find analytical lambda_star. Plotting without it.\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    p_optimal_analytical <span class="token operator">=</span> <span class="token function">nan</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    analytical_available <span class="token operator">=</span> false<span class="token punctuation">;</span>
<span class="token keyword">end</span>

<span class="token comment">% --- Plotting ---</span>
<span class="token comment">% --- プロット ---</span>
figure<span class="token punctuation">;</span>
bar_data <span class="token operator">=</span> <span class="token punctuation">[</span>p_pref<span class="token punctuation">,</span> p_allocated_pso_normalized<span class="token punctuation">]</span><span class="token punctuation">;</span>
legend_items <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Preferred Rate'</span><span class="token punctuation">,</span> <span class="token string">'PSO Allocated Rate'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> analytical_available
    bar_data <span class="token operator">=</span> <span class="token punctuation">[</span>bar_data<span class="token punctuation">,</span> p_optimal_analytical<span class="token punctuation">]</span><span class="token punctuation">;</span>
    legend_items <span class="token operator">=</span> <span class="token punctuation">[</span>legend_items<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'Analytical Optimal'</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

b <span class="token operator">=</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span>N<span class="token punctuation">,</span> bar_data<span class="token punctuation">,</span> <span class="token string">'grouped'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">xlabel</span><span class="token punctuation">(</span><span class="token string">'Electric Vehicle (Agent)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">ylabel</span><span class="token punctuation">(</span><span class="token string">'Charging Rate (kW)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">title</span><span class="token punctuation">(</span><span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'Preferred vs. Allocated Charging Rates (PSO, Penalty Coeff: %g)'</span><span class="token punctuation">,</span> penalty_coefficient<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">xticks</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span>N<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">legend</span><span class="token punctuation">(</span>legend_items<span class="token punctuation">,</span> <span class="token string">'Location'</span><span class="token punctuation">,</span> <span class="token string">'northwest'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
grid on<span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span> <span class="token operator">&gt;</span> P_total
    annotation_text <span class="token operator">=</span> <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'Demand (%.1fkW) &gt; Supply (%.1fkW)\nRates adjusted by PSO.'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>
    annotation_color <span class="token operator">=</span> <span class="token string">'yellow'</span><span class="token punctuation">;</span>
<span class="token keyword">elseif</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span> <span class="token operator">&lt;</span> P_total
    annotation_text <span class="token operator">=</span> <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'Demand (%.1fkW) &lt; Supply (%.1fkW)\nRates adjusted by PSO.'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>
    annotation_color <span class="token operator">=</span> <span class="token string">'cyan'</span><span class="token punctuation">;</span>
<span class="token keyword">else</span>
    annotation_text <span class="token operator">=</span> <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'Demand (%.1fkW) == Supply (%.1fkW)'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>
    annotation_color <span class="token operator">=</span> <span class="token string">'green'</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
<span class="token function">annotation</span><span class="token punctuation">(</span><span class="token string">'textbox'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0.55</span><span class="token punctuation">,</span> <span class="token number">0.15</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'String'</span><span class="token punctuation">,</span> annotation_text<span class="token punctuation">,</span> <span class="token punctuation">...</span>
        <span class="token string">'FitBoxToText'</span><span class="token punctuation">,</span><span class="token string">'on'</span><span class="token punctuation">,</span> <span class="token string">'BackgroundColor'</span><span class="token punctuation">,</span> annotation_color<span class="token punctuation">,</span> <span class="token string">'FontSize'</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% --- Convergence Plot (if you want to see PSO progress, requires custom output function) ---</span>
<span class="token comment">% --- 収束プロット（PSOの進行状況を確認したい場合、カスタム出力関数が必要）---</span>
<span class="token comment">% To get iteration-wise best fitness for plotting convergence:</span>
<span class="token comment">% 収束プロットのために反復ごとの最良適合度を得るには：</span>
<span class="token comment">% 1. Define an output function:</span>
<span class="token comment">% 1. 出力関数を定義：</span>
<span class="token comment">%    function [state,options,optchanged] = psoIterDisplay(options,state,flag)</span>
<span class="token comment">%        optchanged = false;</span>
<span class="token comment">%        if strcmp(flag,'iter')</span>
<span class="token comment">%            if ~isfield(state,'BestFitnessHistory')</span>
<span class="token comment">%                state.BestFitnessHistory = [];</span>
<span class="token comment">%            end</span>
<span class="token comment">%            state.BestFitnessHistory = [state.BestFitnessHistory, state.BestFitness];</span>
<span class="token comment">%        end</span>
<span class="token comment">%    end</span>
<span class="token comment">% 2. Add 'OutputFcn', @psoIterDisplay to optimoptions</span>
<span class="token comment">% 2. optimoptionsに'OutputFcn', @psoIterDisplayを追加</span>
<span class="token comment">% 3. After running PSO:</span>
<span class="token comment">% 3. PSO実行後：</span>
<span class="token comment">%    figure;</span>
<span class="token comment">%    plot(output_pso.BestFitnessHistory); % Assuming BestFitnessHistory was populated (BestFitnessHistoryが入力されたと仮定)</span>
<span class="token comment">%    xlabel('Iteration'); ylabel('Best Objective Value (incl. penalty)');</span>
<span class="token comment">%    title('PSO Convergence'); grid on;</span>
<span class="token comment">% Note: The standard 'Display','iter' option gives some info, but for a plot,</span>
<span class="token comment">% a custom output function or capturing iteration data is needed.</span>
<span class="token comment">% The 'output_pso' struct doesn't store the full history by default.</span>
<span class="token comment">% Let's try to use a built-in plot function if available or make a simple one.</span>
<span class="token comment">% 注意：標準の'Display','iter'オプションはいくつかの情報を提供するが、プロットのためには、</span>
<span class="token comment">% カスタム出力関数または反復データのキャプチャが必要。</span>
<span class="token comment">% 'output_pso'構造体はデフォルトで完全な履歴を保存しない。</span>
<span class="token comment">% 利用可能であれば組み込みプロット関数を使用するか、単純なものを作成してみよう。</span>
<span class="token keyword">if</span> <span class="token function">isfield</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> <span class="token string">'PlotFcn'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">~</span><span class="token function">isempty</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>PlotFcn<span class="token punctuation">)</span>
    <span class="token comment">% If a plot function was specified and ran, figures might already exist.</span>
    <span class="token comment">% For example, 'PlotFcns', @psoplotswarm shows particle movement.</span>
    <span class="token comment">% @psoplotbestf shows best fitness.</span>
    <span class="token comment">% プロット関数が指定されて実行された場合、図が既に存在する可能性がある。</span>
    <span class="token comment">% 例：'PlotFcns', @psoplotswarm は粒子の動きを示す。</span>
    <span class="token comment">% @psoplotbestf は最良適合度を示す。</span>
    <span class="token function">fprintf</span><span class="token punctuation">(</span>"If <span class="token string">'PlotFcns'</span> was used in options<span class="token punctuation">,</span> relevant plots might already be displayed<span class="token operator">.\</span>n"<span class="token punctuation">)</span>
<span class="token keyword">else</span>
    <span class="token comment">% If no PlotFcn was used, we can try to plot the objective value from fval_pso</span>
    <span class="token comment">% (which is only the final value). To get a convergence plot, you'd typically</span>
    <span class="token comment">% need to set options.PlotFcns = @psoplotbestf;</span>
    <span class="token comment">% PlotFcnが使用されなかった場合、fval_psoから目的値をプロットしてみることができる</span>
    <span class="token comment">% （これは最終値のみ）。収束プロットを得るには、通常</span>
    <span class="token comment">% options.PlotFcns = @psoplotbestf; を設定する必要がある。</span>
    <span class="token function">fprintf</span><span class="token punctuation">(</span>"To see PSO convergence plot<span class="token punctuation">,</span> set options<span class="token punctuation">.</span>PlotFcns <span class="token operator">=</span> <span class="token operator">@</span>psoplotbestf<span class="token punctuation">;</span><span class="token operator">\</span>n"<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">fprintf</span><span class="token punctuation">(</span>"Example<span class="token operator">:</span> options <span class="token operator">=</span> <span class="token function">optimoptions</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> <span class="token string">'PlotFcns'</span><span class="token punctuation">,</span> <span class="token operator">@</span>psoplotbestf<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">\</span>n"<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span></code></pre>
<p><strong>Explanation of PSO Implementation:</strong></p>
<ol>
<li><p><strong>Problem Formulation for PSO:</strong></p>
<ul>
<li>中核となるアイデアは、等式制約 <code>sum(p_i) = P_total</code> を処理するためにペナルティ関数を使用することです。</li>
<li>目的関数は次のようになります: <code>f(p) = sum_i (p_i - p_pref_i)^2 + penalty_coefficient * (sum_i p_i - P_total)^2</code>。</li>
<li><code>penalty_coefficient</code> は、PSOが <code>sum(p_i)</code> が <code>P_total</code> に非常に近い解を見つけるように強制するのに十分な大きさでなければなりません。その値は調整が必要な場合があります。</li>
<li>制約 <code>p_i &gt;= 0</code> および <code>p_i &lt;= P_total</code> (またはより厳しい個々の上限) は、<code>particleswarm</code> の <code>lb</code> (下限) および <code>ub</code> (上限) 引数によって直接処理されます。</li>
</ul>
</li>
<li><p><strong><code>particleswarm</code> Function Call:</strong></p>
<ul>
<li><code>objectiveFunction</code>: (ペナルティを含む) フィットネス関数へのハンドル。</li>
<li><code>nvars</code>: 変数の数 (<code>N</code>、EVの数)。</li>
<li><code>lb</code>: 下限のベクトル (すべてゼロ)。</li>
<li><code>ub</code>: 上限のベクトル (例: 各EVに対して <code>P_total</code>、または個々の最大充電レート)。</li>
<li><code>options</code>: PSOの動作を制御する構造体:<ul>
<li><code>SwarmSize</code>: スウォーム内の粒子数。</li>
<li><code>MaxIterations</code>: 最大反復回数。</li>
<li><code>Display</code>: <code>'iter'</code> はコマンドウィンドウに進捗を表示します。</li>
<li><code>ObjectiveLimit</code>, <code>FunctionTolerance</code>: 停止基準。</li>
<li><code>UseParallel</code>: Parallel Computing Toolbox がある場合、計算を高速化できます。</li>
<li>実行中にこれまでに検出された最良の目的値のライブプロットを表示するために、オプションに <code>'PlotFcns', @psoplotbestf</code> を追加することもできます。</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>Post-Processing:</strong></p>
<ul>
<li><code>particleswarm</code> からの解 <code>p_optimal_pso_raw</code> は、電力割り当てのセットです。</li>
<li><strong>Constraint Check:</strong> ペナルティ法が制約をどれだけうまく強制したかを確認するために、<code>sum(p_optimal_pso_raw)</code> を明示的にチェックします。</li>
<li><strong>Normalization (Heuristic):</strong> 合計が <code>P_total</code> からわずかにずれている (しかし近い) 場合、一般的なヒューリスティックは解を比例的にスケーリングすることです: <code>p_allocated_pso_normalized = p_allocated_pso * (P_total / sum_p_pso)</code>。これにより、合計制約が正確に満たされるようになります。その後、スケーリングによって値がわずかに負になった場合に備えて ( <code>sum_p_pso</code> と <code>P_total</code> が正で近い場合はありそうにないですが)、<code>max(0, ...)</code> を再適用します。このステップは、PSOによって見つけられた電力の<em>分布</em>が良いと仮定していますが、ペナルティ近似のために合計が完全に正確ではない場合でも同様です。</li>
</ul>
</li>
<li><p><strong>Comparison:</strong></p>
<ul>
<li>結果は、優先レートおよび解析解 (計算可能な場合) と棒グラフで比較されます。</li>
</ul>
</li>
</ol>
<p><strong>Advantages of PSO for this type of problem:</strong></p>
<ul>
<li><strong>Derivative-Free:</strong> 勾配情報を必要としないため、複雑なまたは微分不可能な目的関数に適しています (ただし、ここでの目的関数は微分可能です)。</li>
<li><strong>Global Search:</strong> 一部の勾配ベースの方法と比較して、特に探索空間が複雑な場合に、局所最適解に陥る可能性が低くなります。</li>
<li><strong>Ease of Handling Bounds:</strong> <code>lb</code> と <code>ub</code> は自然に処理されます。</li>
</ul>
<p><strong>Disadvantages/Considerations:</strong></p>
<ul>
<li><strong>Equality Constraints:</strong> ペナルティ関数を介した等式制約の処理は厄介な場合があります。ペナルティ係数は慎重な調整が必要です。低すぎると制約に違反し、高すぎると探索ランドスケープを歪め、元の問題の真の最適解を見つけるのが難しくなる可能性があります。</li>
<li><strong>Computational Cost:</strong> PSOは、そのようなソルバーが適用可能な問題に対して、特化した凸最適化ソルバー (適切なアルゴリズムを持つ <code>fmincon</code> など) よりも計算コストが高くなる可能性があります。</li>
<li><strong>No Guarantee of Optimality:</strong> PSOのようなメタヒューリスティクスは良い解を提供しますが、通常、有限時間でグローバルな最適解を見つけることを保証しません (特に連続問題の場合)。</li>
<li><strong>Stochastic Nature:</strong> PSOを複数回実行すると、わずかに異なる結果が得られる場合があります。</li>
</ul>
<p>このPSOアプローチは、特に問題構造がより複雑な場合や、勾配情報が利用できないか信頼できない場合に、リソース割り当て問題を解決するための実行可能な代替手段を提供します。</p>
<h3 class="atx" id="結果-2">結果</h3>
<pre><code class="fenced-code-block language-matlab">Starting PSO<span class="token punctuation">...</span>
Optimization ended<span class="token operator">:</span> relative change in the objective value 
over the last OPTIONS<span class="token punctuation">.</span>MaxStallIterations iterations is less than OPTIONS<span class="token punctuation">.</span>FunctionTolerance<span class="token punctuation">.</span>
PSO Finished<span class="token punctuation">.</span>
PSO Exit Flag<span class="token operator">:</span> <span class="token number">1</span>
Optimization ended<span class="token operator">:</span> relative change in the objective value 
over the last OPTIONS<span class="token punctuation">.</span>MaxStallIterations iterations is less than OPTIONS<span class="token punctuation">.</span>FunctionTolerance<span class="token punctuation">.</span>
Objective <span class="token keyword">function</span> value at solution<span class="token operator">:</span> <span class="token number">3.6154e+01</span>
Constraint term value<span class="token operator">:</span> <span class="token number">1.0000e+03</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">49.9936</span> <span class="token operator">-</span> <span class="token number">50.0</span><span class="token punctuation">)</span><span class="token operator">^</span><span class="token number">2</span> <span class="token operator">=</span> <span class="token number">4.0709e-02</span>
Sum of allocated <span class="token function">rates</span> <span class="token punctuation">(</span>PSO raw<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token number">49.9936</span> <span class="token function">kW</span> <span class="token punctuation">(</span>Target<span class="token operator">:</span> <span class="token number">50.00</span> kW<span class="token punctuation">)</span>
Normalizing PSO solution to meet sum constraint exactly<span class="token punctuation">.</span>

<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span> PSO Final <span class="token function">Allocations</span> <span class="token punctuation">(</span>after potential normalization<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
EV # <span class="token operator">|</span> <span class="token function">Preferred</span> <span class="token punctuation">(</span>kW<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token function">Allocated</span> <span class="token punctuation">(</span>kW<span class="token punctuation">)</span>
   <span class="token number">1</span> <span class="token operator">|</span>           <span class="token number">6.34</span> <span class="token operator">|</span>           <span class="token number">5.87</span>
   <span class="token number">2</span> <span class="token operator">|</span>           <span class="token number">8.76</span> <span class="token operator">|</span>          <span class="token number">10.24</span>
   <span class="token number">3</span> <span class="token operator">|</span>           <span class="token number">3.00</span> <span class="token operator">|</span>           <span class="token number">4.60</span>
   <span class="token number">4</span> <span class="token operator">|</span>           <span class="token number">5.42</span> <span class="token operator">|</span>           <span class="token number">0.30</span>
   <span class="token number">5</span> <span class="token operator">|</span>           <span class="token number">4.17</span> <span class="token operator">|</span>           <span class="token number">2.35</span>
   <span class="token number">6</span> <span class="token operator">|</span>           <span class="token number">3.74</span> <span class="token operator">|</span>           <span class="token number">4.54</span>
   <span class="token number">7</span> <span class="token operator">|</span>           <span class="token number">4.49</span> <span class="token operator">|</span>           <span class="token number">4.28</span>
   <span class="token number">8</span> <span class="token operator">|</span>           <span class="token number">5.76</span> <span class="token operator">|</span>           <span class="token number">5.51</span>
   <span class="token number">9</span> <span class="token operator">|</span>           <span class="token number">6.17</span> <span class="token operator">|</span>           <span class="token number">5.30</span>
  <span class="token number">10</span> <span class="token operator">|</span>           <span class="token number">7.31</span> <span class="token operator">|</span>           <span class="token number">7.00</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
Sum of Preferred Rates<span class="token operator">:</span> <span class="token number">55.17</span> kW
Sum of Allocated <span class="token function">Rates</span> <span class="token punctuation">(</span>PSO normalized<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token number">50.00</span> <span class="token function">kW</span> <span class="token punctuation">(</span>Target<span class="token operator">:</span> <span class="token number">50.00</span> kW<span class="token punctuation">)</span>
Original objective <span class="token function">value</span> <span class="token punctuation">(</span>without penalty<span class="token punctuation">)</span> <span class="token keyword">for</span> PSO solution<span class="token operator">:</span> <span class="token number">36.1156</span>
Analytical optimal objective value<span class="token operator">:</span> <span class="token number">2.6732</span></code></pre>
<p><img alt="" src="pso.png"></p>
<hr>
<h2 class="atx" id="solve-with-ga">Solve with GA</h2>
<p>遺伝的アルゴリズム（GA）は、MATLAB の Global Optimization Toolbox に含まれる集団ベースのメタヒューリスティック手法です。自然選択のプロセスに着想を得ており、選択、交叉、突然変異といったオペレータを用いて解の集団を進化させ、最適解に近づけます。本問題における <code>ga</code> の標準的な <code>particleswarm</code> に対する大きな利点は、線形等式制約を含む各種制約を洗練された方法で直接扱える点にあります。
<strong>EV 充電問題への GA 適用：</strong> </p>
<ul>
<li><p><strong>目的関数</strong> <code>sum_i (p_i - p_pref_i)^2</code> を最小化</p>
</li>
<li><p><strong>制約</strong> <code>0 &lt;= p_i &lt;= P_total</code>（またはより厳しい個別上限）</p>
</li>
</ul>
<p>— 境界制約として <code>ga</code> が直接扱います。<code>sum_i p_i = P_total</code></p>
<p>— 線形等式制約で、<code>Aeq</code>／<code>beq</code> 引数を使い、候補解を可行部分空間に射影する形で扱います。</p>
<p>このように等式制約を直接組み込むことで、PSO のペナルティ法に頼る場合と比べ、より高精度かつ可行な解が得られやすくなります。</p>
<pre><code class="fenced-code-block language-matlab"><span class="token comment">% 遺伝的アルゴリズム（GA）による EV 充電リソース割り当て</span>
<span class="token comment">%-----------------------------------------------------------------</span>
clear<span class="token punctuation">;</span> clc<span class="token punctuation">;</span> close all<span class="token punctuation">;</span>

<span class="token comment">% --- 問題設定 ---</span>
N <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>                         <span class="token comment">% EV（エージェント）数</span>
P_total <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>                   <span class="token comment">% 総電力容量 (kW)</span>
<span class="token comment">% 比較のため、p_pref を乱数生成する場合はシードを固定</span>
<span class="token function">rng</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token comment">% 任意の固定シードでも可</span>
p_pref <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">8</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">;</span>     <span class="token comment">% 希望充電レート (3～11 kW)（列ベクトル）</span>

<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'希望充電レート (kW):\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">disp</span><span class="token punctuation">(</span>p_pref<span class="token operator">'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'希望レート合計: %.2f kW\n'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'総利用可能電力: %.2f kW\n\n'</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% --- GA パラメータ ---</span>
nvars <span class="token operator">=</span> N<span class="token punctuation">;</span>                      <span class="token comment">% 最適化変数数（各 EV の充電出力）</span>

<span class="token comment">% 目的関数：GA は 'x' を行ベクトルとして渡す</span>
<span class="token comment">% p_pref は列ベクトル</span>
objectiveFunction <span class="token operator">=</span> <span class="token operator">@</span><span class="token punctuation">(</span>p_row<span class="token punctuation">)</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">(</span>p_row<span class="token operator">'</span> <span class="token operator">-</span> p_pref<span class="token punctuation">)</span><span class="token operator">.^</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% 境界制約</span>
lb <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> nvars<span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">% 下限 (p_i &gt;= 0)、GA は行ベクトルを期待</span>
<span class="token comment">% 上限 (0 &lt;= p_i &lt;= P_total、または個別最大充電レート)</span>
ub <span class="token operator">=</span> P_total <span class="token operator">*</span> <span class="token function">ones</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> nvars<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">% GA は行ベクトルを期待</span>
<span class="token comment">% 例：より厳しい上限の例（行ベクトルを保証）</span>
<span class="token comment">% ub = min(P_total, max(15, p_pref' * 1.5));</span>

<span class="token comment">% 線形等式制約: sum(p_i) = P_total</span>
Aeq <span class="token operator">=</span> <span class="token function">ones</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> nvars<span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">% p1 + p2 + … + pN の係数</span>
beq <span class="token operator">=</span> P_total<span class="token punctuation">;</span>                  <span class="token comment">% 合計が P_total に等しいべき</span>

<span class="token comment">% 線形不等式制約なし</span>
A <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">% 非線形制約関数なし</span>
nonlcon <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">% 整数制約なし</span>
IntCon <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">% --- GA オプション ---</span>
options <span class="token operator">=</span> <span class="token function">optimoptions</span><span class="token punctuation">(</span><span class="token string">'ga'</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>
    <span class="token string">'PopulationSize'</span><span class="token punctuation">,</span>      <span class="token function">max</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span>  <span class="token number">10</span><span class="token operator">*</span>nvars<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>  <span class="token comment">% 集団の個体数</span>
    <span class="token string">'MaxGenerations'</span><span class="token punctuation">,</span>      <span class="token number">200</span> <span class="token operator">*</span> nvars<span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>      <span class="token comment">% 最大世代数</span>
    <span class="token string">'Display'</span><span class="token punctuation">,</span>             <span class="token string">'iter'</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>              <span class="token comment">% 進捗を表示</span>
    <span class="token string">'PlotFcn'</span><span class="token punctuation">,</span>             <span class="token punctuation">{</span><span class="token operator">@</span>gaplotbestf<span class="token punctuation">,</span> <span class="token operator">@</span>gaplotstopping<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">...</span> <span class="token comment">% 最良適合度＆停止条件プロット</span>
    <span class="token string">'FunctionTolerance'</span><span class="token punctuation">,</span>   <span class="token number">1e-7</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>                <span class="token comment">% 目的関数変化小 → 停止</span>
    <span class="token string">'ConstraintTolerance'</span><span class="token punctuation">,</span> <span class="token number">1e-7</span><span class="token punctuation">,</span> <span class="token punctuation">...</span>                <span class="token comment">% 制約満足の許容誤差</span>
    <span class="token string">'UseParallel'</span><span class="token punctuation">,</span>         false<span class="token punctuation">)</span><span class="token punctuation">;</span>                  <span class="token comment">% 並列計算する場合は true</span>

<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'GA 開始...\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">% --- GA 実行 ---</span>
<span class="token punctuation">[</span>p_optimal_ga_row<span class="token punctuation">,</span> fval_ga<span class="token punctuation">,</span> exitflag_ga<span class="token punctuation">,</span> output_ga<span class="token punctuation">,</span> population_ga<span class="token punctuation">,</span> scores_ga<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">...</span>
    <span class="token function">ga</span><span class="token punctuation">(</span>objectiveFunction<span class="token punctuation">,</span> nvars<span class="token punctuation">,</span> A<span class="token punctuation">,</span> b<span class="token punctuation">,</span> Aeq<span class="token punctuation">,</span> beq<span class="token punctuation">,</span> lb<span class="token punctuation">,</span> ub<span class="token punctuation">,</span> nonlcon<span class="token punctuation">,</span> IntCon<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'GA 終了。\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'GA Exit Flag: %d\n'</span><span class="token punctuation">,</span> exitflag_ga<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">disp</span><span class="token punctuation">(</span>output_ga<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'得られた解の目的関数値: %.4e\n'</span><span class="token punctuation">,</span> fval_ga<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% --- GA 解の後処理 ---</span>
<span class="token comment">% GA の解は行ベクトルなので，整合性のため列ベクトルに変換</span>
p_allocated_ga <span class="token operator">=</span> p_optimal_ga_row<span class="token operator">'</span><span class="token punctuation">;</span>

<span class="token comment">% 総和制約の満足度を確認（高精度であるはず）</span>
sum_p_ga <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_allocated_ga<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'GA 割当てレート合計: %.4f kW (目標: %.2f kW)\n'</span><span class="token punctuation">,</span> sum_p_ga<span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'制約からのずれ: %.4e\n'</span><span class="token punctuation">,</span> sum_p_ga <span class="token operator">-</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'\n--- GA 最終割当 ---\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">disp</span><span class="token punctuation">(</span><span class="token string">'EV # | 希望 (kW) | 割当 (kW)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token number">i</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span>N
    <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'%4d | %10.2f | %10.2f\n'</span><span class="token punctuation">,</span> <span class="token number">i</span><span class="token punctuation">,</span> <span class="token function">p_pref</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">p_allocated_ga</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'--------------------------------------------------------------------\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'希望レート合計: %.2f kW\n'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'GA 割当て合計: %.2f kW (目標: %.2f kW)\n'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_allocated_ga<span class="token punctuation">)</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'GA 解の目的値 (二乗誤差和): %.4f\n'</span><span class="token punctuation">,</span> fval_ga<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% --- 解析的最適解（ADMM/PSO例と同様に比較用） ---</span>
<span class="token comment">% KKT 条件により解く: p_i_opt = max(0, p_pref_i - lambda_star/2)</span>
<span class="token comment">% sum(max(0, p_pref_i - lambda_star/2)) = P_total となる lambda_star を求める</span>
f_to_solve <span class="token operator">=</span> <span class="token operator">@</span><span class="token punctuation">(</span>lambda_s<span class="token punctuation">)</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> p_pref <span class="token operator">-</span> lambda_s<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> P_total<span class="token punctuation">;</span>
<span class="token keyword">try</span>
    lambda_star_optimal <span class="token operator">=</span> <span class="token function">fzero</span><span class="token punctuation">(</span>f_to_solve<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">% 適当な範囲で探索</span>
    <span class="token keyword">if</span> <span class="token function">isnan</span><span class="token punctuation">(</span>lambda_star_optimal<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">abs</span><span class="token punctuation">(</span><span class="token function">f_to_solve</span><span class="token punctuation">(</span>lambda_star_optimal<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">1e-3</span>
        lambda_star_optimal <span class="token operator">=</span> <span class="token function">fzero</span><span class="token punctuation">(</span>f_to_solve<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">% 別の初期値を試す</span>
    <span class="token keyword">end</span>
    p_optimal_analytical <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> p_pref <span class="token operator">-</span> lambda_star_optimal<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    analytical_available <span class="token operator">=</span> true<span class="token punctuation">;</span>
    <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'解析的最適解の目的値: %.4f\n'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">(</span>p_optimal_analytical <span class="token operator">-</span> p_pref<span class="token punctuation">)</span><span class="token operator">.^</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'解析的解の合計: %.4f\n'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_optimal_analytical<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">catch</span> ME
    <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'解析的 lambda_star の探索に失敗: %s\n'</span><span class="token punctuation">,</span> ME<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    p_optimal_analytical <span class="token operator">=</span> <span class="token function">nan</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    analytical_available <span class="token operator">=</span> false<span class="token punctuation">;</span>
<span class="token keyword">end</span>

<span class="token comment">% --- プロット ---</span>
figure<span class="token punctuation">;</span>  <span class="token comment">% 棒グラフ用の新規図</span>
bar_data <span class="token operator">=</span> <span class="token punctuation">[</span>p_pref<span class="token punctuation">,</span> p_allocated_ga<span class="token punctuation">]</span><span class="token punctuation">;</span>
legend_items <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'希望レート'</span><span class="token punctuation">,</span> <span class="token string">'GA 割当てレート'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> analytical_available <span class="token operator">&amp;&amp;</span> <span class="token operator">~</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token function">isnan</span><span class="token punctuation">(</span>p_optimal_analytical<span class="token punctuation">)</span><span class="token punctuation">)</span>
    bar_data <span class="token operator">=</span> <span class="token punctuation">[</span>bar_data<span class="token punctuation">,</span> p_optimal_analytical<span class="token punctuation">]</span><span class="token punctuation">;</span>
    legend_items <span class="token operator">=</span> <span class="token punctuation">[</span>legend_items<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'解析的最適解'</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

b <span class="token operator">=</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span>N<span class="token punctuation">,</span> bar_data<span class="token punctuation">,</span> <span class="token string">'grouped'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">xlabel</span><span class="token punctuation">(</span><span class="token string">'Electric Vehicle (Agent)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">ylabel</span><span class="token punctuation">(</span><span class="token string">'Charging Rate (kW)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">title</span><span class="token punctuation">(</span><span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'希望 vs. GA 割当てレート (GA, N=%d)'</span><span class="token punctuation">,</span> N<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">xticks</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span>N<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">legend</span><span class="token punctuation">(</span>legend_items<span class="token punctuation">,</span> <span class="token string">'Location'</span><span class="token punctuation">,</span><span class="token string">'northwest'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
grid on<span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span> <span class="token operator">&gt;</span> P_total
    annotation_text <span class="token operator">=</span> <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'需要 (%.1fkW) &gt; 供給 (%.1fkW)\nGA で調整済み。'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>
    annotation_color <span class="token operator">=</span> <span class="token string">'yellow'</span><span class="token punctuation">;</span>
<span class="token keyword">elseif</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span> <span class="token operator">&lt;</span> P_total
    annotation_text <span class="token operator">=</span> <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'需要 (%.1fkW) &lt; 供給 (%.1fkW)\nGA で調整済み。'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>
    annotation_color <span class="token operator">=</span> <span class="token string">'cyan'</span><span class="token punctuation">;</span>
<span class="token keyword">else</span>
    annotation_text <span class="token operator">=</span> <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'需要 (%.1fkW) == 供給 (%.1fkW)'</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p_pref<span class="token punctuation">)</span><span class="token punctuation">,</span> P_total<span class="token punctuation">)</span><span class="token punctuation">;</span>
    annotation_color <span class="token operator">=</span> <span class="token string">'green'</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
<span class="token function">annotation</span><span class="token punctuation">(</span><span class="token string">'textbox'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0.55</span><span class="token punctuation">,</span><span class="token number">0.15</span><span class="token punctuation">,</span><span class="token number">0.1</span><span class="token punctuation">,</span><span class="token number">0.1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'String'</span><span class="token punctuation">,</span> annotation_text<span class="token punctuation">,</span> <span class="token punctuation">...</span>
           <span class="token string">'FitBoxToText'</span><span class="token punctuation">,</span><span class="token string">'on'</span><span class="token punctuation">,</span> <span class="token string">'BackgroundColor'</span><span class="token punctuation">,</span>annotation_color<span class="token punctuation">,</span> <span class="token string">'FontSize'</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% GA のプロット（最良適合度と停止条件）は PlotFcn によって別図で生成されます。</span>
<span class="token function">disp</span><span class="token punctuation">(</span><span class="token string">'最良適合度と停止条件のプロットが別図として表示されているはずです。'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 class="atx" id="結果-3">結果</h3>
<pre><code class="fenced-code-block language-matlab">ga stopped because it exceeded options<span class="token punctuation">.</span>MaxGenerations<span class="token punctuation">.</span>
GA Finished<span class="token punctuation">.</span>
GA Exit Flag<span class="token operator">:</span> <span class="token number">0</span>
ga stopped because it exceeded options<span class="token punctuation">.</span>MaxGenerations<span class="token punctuation">.</span>
Objective <span class="token keyword">function</span> value at solution<span class="token operator">:</span> <span class="token number">2.6765e+00</span>
Sum of allocated <span class="token function">rates</span> <span class="token punctuation">(</span>GA<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token number">50.0000</span> <span class="token function">kW</span> <span class="token punctuation">(</span>Target<span class="token operator">:</span> <span class="token number">50.00</span> kW<span class="token punctuation">)</span>
Deviation from sum constraint<span class="token operator">:</span> <span class="token number">6.3949e-14</span>

<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span> GA Final Allocations <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
EV # <span class="token operator">|</span> <span class="token function">Preferred</span> <span class="token punctuation">(</span>kW<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token function">Allocated</span> <span class="token punctuation">(</span>kW<span class="token punctuation">)</span>
   <span class="token number">1</span> <span class="token operator">|</span>           <span class="token number">6.34</span> <span class="token operator">|</span>           <span class="token number">5.81</span>
   <span class="token number">2</span> <span class="token operator">|</span>           <span class="token number">8.76</span> <span class="token operator">|</span>           <span class="token number">8.24</span>
   <span class="token number">3</span> <span class="token operator">|</span>           <span class="token number">3.00</span> <span class="token operator">|</span>           <span class="token number">2.48</span>
   <span class="token number">4</span> <span class="token operator">|</span>           <span class="token number">5.42</span> <span class="token operator">|</span>           <span class="token number">4.90</span>
   <span class="token number">5</span> <span class="token operator">|</span>           <span class="token number">4.17</span> <span class="token operator">|</span>           <span class="token number">3.65</span>
   <span class="token number">6</span> <span class="token operator">|</span>           <span class="token number">3.74</span> <span class="token operator">|</span>           <span class="token number">3.28</span>
   <span class="token number">7</span> <span class="token operator">|</span>           <span class="token number">4.49</span> <span class="token operator">|</span>           <span class="token number">3.97</span>
   <span class="token number">8</span> <span class="token operator">|</span>           <span class="token number">5.76</span> <span class="token operator">|</span>           <span class="token number">5.24</span>
   <span class="token number">9</span> <span class="token operator">|</span>           <span class="token number">6.17</span> <span class="token operator">|</span>           <span class="token number">5.65</span>
  <span class="token number">10</span> <span class="token operator">|</span>           <span class="token number">7.31</span> <span class="token operator">|</span>           <span class="token number">6.79</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
Sum of Preferred Rates<span class="token operator">:</span> <span class="token number">55.17</span> kW
Sum of Allocated <span class="token function">Rates</span> <span class="token punctuation">(</span>GA<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token number">50.00</span> <span class="token function">kW</span> <span class="token punctuation">(</span>Target<span class="token operator">:</span> <span class="token number">50.00</span> kW<span class="token punctuation">)</span>
Objective <span class="token function">value</span> <span class="token punctuation">(</span>sum of squared differences<span class="token punctuation">)</span> <span class="token keyword">for</span> GA solution<span class="token operator">:</span> <span class="token number">2.6765</span>
Analytical optimal objective value<span class="token operator">:</span> <span class="token number">2.6732</span>
Analytical sum<span class="token operator">:</span> <span class="token number">50.0000</span>
GA plots <span class="token keyword">for</span> best fitness and stopping criteria should have been displayed in separate figures<span class="token punctuation">.</span></code></pre>
<p><img alt="" src="ga_iter.png"></p>
<p><img alt="" src="ga.png"></p>
<hr>
<h2 class="atx" id="discussion">Discussion</h2>
<p>本稿では、EV充電リソース割り当て問題に対し、分散型勾配降下法（DGD）、交替方向乗数法（ADMM）、粒子群最適化（PSO）、および遺伝的アルゴリズム（GA）の4つの異なる手法を適用しました。</p>
<h3 class="atx" id="1-分散型勾配降下法-distributed-gradient-descent---dgd">1. 分散型勾配降下法 (Distributed Gradient Descent - DGD)</h3>
<ul>
<li><strong>全体的な振る舞い：</strong> DGDは、局所的な勾配情報とコンセンサス平均化を用いて、各EVの推定値を希望充電率の平均値に近づけます。この平均値は、電力割り当てを決定するための解析的な式で使用されます。</li>
<li><strong>長所：</strong><ul>
<li>分散方式で簡単に実装できます。</li>
<li>平均化のためのコンセンサス部分はよく理解されています。</li>
</ul>
</li>
<li><strong>短所：</strong><ul>
<li>最終的な割り当てステップ <code>p_i = p_pref_i + P_total/N - z_i</code>（ここで <code>z_i</code> は推定平均値）は、<code>z_i</code> が完全に収束していない場合や、境界 <code>p_i &gt;= 0</code> が有効になった場合に、<code>sum(p_i) = P_total</code> を本質的に保証しません。</li>
<li>制約を満たすために事後的なスケーリング（<code>max(0, ...)</code> および比例スケーリング）が必要であり、これにより解が真の最適解から逸脱する可能性があります。</li>
</ul>
</li>
<li><strong>結果：</strong> <strong>可</strong>。分散型アプローチを提供しますが、厳密な制約充足のためにはヒューリスティックに依存します。解の品質は、コンセンサスの精度とヒューリスティックスケーリングの影響に左右されます。</li>
</ul>
<hr>
<h3 class="atx" id="2-交替方向乗数法-alternating-direction-method-of-multipliers---admm">2. 交替方向乗数法 (Alternating Direction Method of Multipliers - ADMM)</h3>
<ul>
<li><strong>全体的な振る舞い：</strong> ADMMは問題を、局所的なEVサブ問題（価格シグナルを考慮した二次コストの最小化）と、大域的な制約 <code>sum(p_i) = P_total</code> を強制するために分散型コンセンサスを使用する価格更新メカニズムに分解します。</li>
<li><strong>長所：</strong><ul>
<li><strong>総電力制約</strong>と非負制約を効果的に満たします。</li>
<li>この凸問題に対して、解析的なKKT最適解に非常に近い解に収束します。</li>
<li>分散型制約付き最適化のための堅牢なフレームワークです。</li>
</ul>
</li>
<li><strong>短所：</strong><ul>
<li>ネストされたコンセンサスループ（合計推定と価格合意のため）と慎重なパラメータ調整（<code>rho</code>, <code>beta</code>）のため、DGDよりも実装が複雑です。</li>
<li>ADMMイテレーション内のコンセンサスが十分なステップ実行されない場合や、ADMMパラメータが適切に調整されていない場合、収束が遅くなることがあります。</li>
</ul>
</li>
<li><strong>結果：</strong> <strong>優（分散型手法のチャンピオン）</strong>。ADMMは、この問題に対して、全ての制約を確実に強制し、真に分散化された方法でほぼ最適な割り当てを達成します。</li>
</ul>
<hr>
<h3 class="atx" id="3-粒子群最適化-particle-swarm-optimization---pso">3. 粒子群最適化 (Particle-Swarm Optimization - PSO)</h3>
<ul>
<li><strong>全体的な振る舞い：</strong> 大域的最適化メタヒューリスティックであるPSOは、この問題に集中的に適用されました。等式制約 <code>sum(p_i) = P_total</code> は目的関数内のペナルティ項を使用して処理されました。境界制約（<code>p_i &gt;= 0</code>, <code>p_i &lt;= ub_i</code>）は直接処理されました。</li>
<li><strong>長所：</strong><ul>
<li>微分不要で、複雑な目的関数にも容易に適用できます。</li>
<li>探索空間の大域的な探索に適しています。</li>
</ul>
</li>
<li><strong>短所：</strong><ul>
<li><strong>ペナルティによる等式制約の扱いの難しさ</strong>：解が <code>sum(p_i) = P_total</code> を遵守するかどうかは、ペナルティ係数とPSOがペナルティ項を最小化する能力に大きく依存します。多くの場合、これによりわずかな違反が生じ、事後的な正規化が必要になります。</li>
<li>解の品質は、ペナルティ係数とPSOパラメータに敏感である可能性があります。</li>
<li>得られた解は、特にペナルティが探索状況を歪める場合、ADMMやGAほど真の最適解に近くないかもしれません。</li>
</ul>
</li>
<li><strong>結果：</strong> <strong>劣～可</strong>。標準的なPSOは、特殊なメカニズム（修復オペレータなど）や非常に慎重なペナルティ調整なしでは、正確な等式制約の充足に苦労します。事後的な正規化の必要性が欠点です。</li>
</ul>
<hr>
<h3 class="atx" id="4-遺伝的アルゴリズム-genetic-algorithm---ga">4. 遺伝的アルゴリズム (Genetic Algorithm - GA)</h3>
<ul>
<li><strong>全体的な振る舞い：</strong> もう一つの大域的最適化メタヒューリスティックであるGAも、集中的に適用されました。重要なことに、MATLABの <code>ga</code> は、境界制約に加えて、線形等式制約（<code>Aeq*x = beq</code>）を直接処理できます。</li>
<li><strong>長所：</strong><ul>
<li><strong>線形等式制約の効果的な処理</strong>：制約 <code>sum(p_i) = P_total</code> は、通常 <code>ConstraintTolerance</code> の範囲内で高い精度で満たされました。</li>
<li>微分不要で、大域的な探索に適しています。</li>
<li>解析的な最適値に非常に近い目的関数値を達成しました。</li>
</ul>
</li>
<li><strong>短所：</strong><ul>
<li>この特定の凸問題に対しては、特殊な凸ソルバーやADMMよりも計算量が多くなる可能性があります。</li>
<li>性能はGAパラメータの調整に依存する可能性があります（ただし、デフォルトは多くの場合堅牢です）。</li>
<li>メタヒューリスティックとして、大域的最適解への確率的な収束を提供します。</li>
</ul>
</li>
<li><strong>結果：</strong> <strong>非常に良い</strong>。GAは、組み込みのメカニズムのおかげで、特に困難な合計制約を含む全ての制約を尊重する高品質な解を提供しました。直接的な制約処理が利用可能な場合、強力な大域的最適化の代替手段となります。</li>
</ul>
<hr>
<h3 class="atx" id="まとめ-takeaway">まとめ (Takeaway)</h3>
<ul>
<li><strong>線形制約を持つ凸二次計画リソース割り当て問題の場合：</strong><ul>
<li><strong>分散型手法</strong>：ADMMは非常に効果的であり、分散化された方法で制約を厳密に強制しながら、ほぼ最適な解を提供します。</li>
<li><strong>集中型手法</strong>：<code>quadprog</code> のようなソルバー（図示されていませんが、この特定の問題タイプを一元的に解く場合に理想的）が最も効率的です。一般的な大域的オプティマイザの中では、**遺伝的アルゴリズム（GA）**は線形等式制約を直接処理できるため、そのような制約に対してより単純なペナルティ法に依存するPSOよりも優れた性能を示します。</li>
</ul>
</li>
<li>DGDのようなより単純な分散型手法は、基本的な調整や、制約充足のための何らかのヒューリスティックな事後処理が許容できる場合に役立ちます。</li>
<li>PSOのような標準的なメタヒューリスティックは、厳しい等式制約のある問題を確実に解くために、慎重な適応（例：特殊な制約処理技術、修復オペレータ、またはハイブリッド化）が必要です。基本的なペナルティ関数だけに頼るのでは、多くの場合、精度が不十分です。</li>
<li>ソルバーの選択は、問題の性質（凸性、微分可能性）、分散型解と集中型解のどちらが必要か、制約の複雑さ、および要求される精度に依存します。この特定のEV充電問題では、ADMM（分散型）とGA（集中型大域的）の両方が優れた結果をもたらしましたが、ADMMの方が「分散最適化」のテーマにより適合していました。</li>
</ul>
<h2 class="atx" id="references">References</h2>
<ol start="2">
<li><p>D. P. Bertsekas, A. Nedić, and A. Ozdaglar, <em>Convex Analysis and Optimization</em>, Athena Scientific.</p>
</li>
<li><p><strong>Average Consensus Problem</strong> 、<em>Distributed Multi-Agent Optimization via Dual Decomposition</em> (Section 2.8) <a href="https://www.diva-portal.org/smash/get/diva2%3A453798/FULLTEXT01.pdf">Diva Portal</a> 。</p>
</li>
<li><p>A. Nedić and A. Ozdaglar, “Distributed Subgradient Methods for Multi‐Agent Optimization,” <em>IEEE Trans. Autom. Control</em>, 54(1): 48–61, 2009 <a href="https://www.scirp.org/%28S%28czeh2tfqw2orz553k1w0r45%29%29/reference/referencespapers?referenceid=3220708">SCIRP</a> 。</p>
</li>
<li><p>A. Nedić and A. Ozdaglar, “Distributed Subgradient Methods for Multi-Agent Optimization” (最終稿), MIT <a href="https://web.mit.edu/Asuman/Desktop/asuman/www/documents/distributed-journal-final.pdf">Massachusetts Institute of Technology</a> 。</p>
</li>
<li><p>S. Boyd et al., “Distributed Optimization and Statistical Learning via the Alternating Direction Method of Multipliers,” <em>Foundations and Trends in Machine Learning</em>, 3(1): 1–122, 2011 <a href="https://web.stanford.edu/~boyd/papers/pdf/admm_distr_stats.pdf">Stanford University</a> 。</p>
</li>
<li><p><strong>Consensus ALADIN</strong> 非凸コンセンサス最適化のためのフレームワーク, Xu Du et al., 2023 <a href="https://arxiv.org/pdf/2306.05662">arXiv</a> 。</p>
</li>
<li><p>G. Buzzard et al., “Optimization-Free Reconstruction Using Consensus Equilibrium,” SIIMS, 2019 <a href="https://engineering.purdue.edu/~bouman/Plug-and-Play/webdocs/SIIMS01.pdf">Purdue Engineering</a> 。</p>
</li>
<li><p>マルチエージェント制御におけるイベントトリガー更新を伴う分散時変最適化 <a href="https://www.sciencedirect.com/science/article/abs/pii/S0893608023006925">ScienceDirect</a> 。</p>
</li>
<li><p>多目的問題のための多層分散コンセンサスアルゴリズム <a href="https://www.sciencedirect.com/science/article/abs/pii/S0306261921007923">ScienceDirect</a> 。</p>
</li>
<li><p><strong>Subgradient Method</strong> 、Wikipedia、2024年 <a href="https://en.wikipedia.org/wiki/Subgradient_method">en.wikipedia.org</a> 。</p>
</li>
</ol>
</article>
</body>
</html>